<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>黑马人力资源项目 | IZDLOYL's Blog</title><meta name="author" content="IZDLOYL"><meta name="copyright" content="IZDLOYL"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="一、项目介绍及初始化1.项目架构1.1 项目架构和解决方案 1.2 课程安排 1.3 课程具备能力 2. 基础代码拉取 拉取命令 1$ git clone  https:&#x2F;&#x2F;github.com&#x2F;PanJiaChen&#x2F;vue-admin-template.git  升级core-js版本到3.25.5 1$ npm i core-js@3.25.5 # npm  安装完整依赖 1$ npm i #">
<meta property="og:type" content="article">
<meta property="og:title" content="黑马人力资源项目">
<meta property="og:url" content="http://www.izdloyl.cn/2024/08/01/vue-Vue2%E4%BA%BA%E5%8A%9B%E8%B5%84%E6%BA%90%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="IZDLOYL&#39;s Blog">
<meta property="og:description" content="一、项目介绍及初始化1.项目架构1.1 项目架构和解决方案 1.2 课程安排 1.3 课程具备能力 2. 基础代码拉取 拉取命令 1$ git clone  https:&#x2F;&#x2F;github.com&#x2F;PanJiaChen&#x2F;vue-admin-template.git  升级core-js版本到3.25.5 1$ npm i core-js@3.25.5 # npm  安装完整依赖 1$ npm i #">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://source.fomal.cc/img/default_cover_9.webp">
<meta property="article:published_time" content="2024-08-01T13:30:57.457Z">
<meta property="article:modified_time" content="2024-08-02T12:55:21.066Z">
<meta property="article:author" content="IZDLOYL">
<meta property="article:tag" content="vue2">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://source.fomal.cc/img/default_cover_9.webp"><link rel="shortcut icon" href="https://www.fomal.cc/favicon.ico"><link rel="canonical" href="http://www.izdloyl.cn/2024/08/01/vue-Vue2%E4%BA%BA%E5%8A%9B%E8%B5%84%E6%BA%90%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体中文","cht_to_chs":"你已切换为简体中文","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-right"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '黑马人力资源项目',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-08-02 20:55:21'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/universe.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../source/gallery/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">3</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://source.fomal.cc/img/default_cover_9.webp')"><nav id="nav"><span id="blog-info"><a href="/" title="IZDLOYL's Blog"><span class="site-name">IZDLOYL's Blog</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">黑马人力资源项目</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-08-01T13:30:57.457Z" title="发表于 2024-08-01 21:30:57">2024-08-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-08-02T12:55:21.066Z" title="更新于 2024-08-02 20:55:21">2024-08-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E9%A1%B9%E7%9B%AE/">项目</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">42.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>212分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="黑马人力资源项目"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="一、项目介绍及初始化"><a href="#一、项目介绍及初始化" class="headerlink" title="一、项目介绍及初始化"></a>一、项目介绍及初始化</h1><h2 id="1-项目架构"><a href="#1-项目架构" class="headerlink" title="1.项目架构"></a>1.项目架构</h2><h3 id="1-1-项目架构和解决方案"><a href="#1-1-项目架构和解决方案" class="headerlink" title="1.1 项目架构和解决方案"></a>1.1 项目架构和解决方案</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022005490.png" alt="image.png"></p>
<h3 id="1-2-课程安排"><a href="#1-2-课程安排" class="headerlink" title="1.2 课程安排"></a>1.2 课程安排</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022005017.png" alt="image.png"></p>
<h3 id="1-3-课程具备能力"><a href="#1-3-课程具备能力" class="headerlink" title="1.3 课程具备能力"></a>1.3 课程具备能力</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022005317.png" alt="image.png"></p>
<h2 id="2-基础代码拉取"><a href="#2-基础代码拉取" class="headerlink" title="2. 基础代码拉取"></a>2. 基础代码拉取</h2><ul>
<li><p>拉取命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span>  https://github.com/PanJiaChen/vue-admin-template.git</span><br></pre></td></tr></table></figure>
</li>
<li><p>升级core-js版本到<strong>3.25.5</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i core-js@3.25.5 <span class="comment"># npm</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>安装完整依赖</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i <span class="comment"># npm</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>启动命令在package.json中查看</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm run dev</span><br></pre></td></tr></table></figure>
</li>
<li><p>需要检查VsCode本身的插件ESLint 和 Vutur</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022005304.png" alt="image.png"></p>
<h2 id="3-项目目录和入口文件介绍"><a href="#3-项目目录和入口文件介绍" class="headerlink" title="3.项目目录和入口文件介绍"></a>3.项目目录和入口文件介绍</h2><ul>
<li><p>项目目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">├── src                        <span class="comment"># 源代码目录</span></span><br><span class="line">│   ├── api                    <span class="comment"># 所有请求</span></span><br><span class="line">│   ├── assets                 <span class="comment"># 主题 字体等静态资源</span></span><br><span class="line">│   ├── components             <span class="comment"># 全局公用组件</span></span><br><span class="line">│   ├── icons                  <span class="comment"># 项目所有 svg icons</span></span><br><span class="line">│   ├── layout                 <span class="comment"># 全局 layout</span></span><br><span class="line">│   ├── router                 <span class="comment"># 路由</span></span><br><span class="line">│   ├── store                  <span class="comment"># 全局 store管理</span></span><br><span class="line">│   ├── styles                 <span class="comment"># 全局样式</span></span><br><span class="line">│   ├── utils                  <span class="comment"># 全局公用方法</span></span><br><span class="line">│   ├── views                  <span class="comment"># views 所有页面</span></span><br><span class="line">│   ├── App.vue                <span class="comment"># 入口页面</span></span><br><span class="line">│   ├── main.js                <span class="comment"># 入口文件 加载组件 初始化等</span></span><br><span class="line">│   └── permission.js          <span class="comment"># 权限管理</span></span><br><span class="line">│   └── settings.js            <span class="comment"># 配置文件</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>入口文件</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022006806.png" alt="image.png"></p>
<h2 id="4-App-vue根组件解析"><a href="#4-App-vue根组件解析" class="headerlink" title="4.App.vue根组件解析"></a>4.App.vue根组件解析</h2><ul>
<li>App.vue组件</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022006600.png" alt="image.png"></p>
<ul>
<li>layout布局</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022006071.png" alt="image.png"></p>
<h2 id="5-基础设置settings-js和导航守卫permission-js"><a href="#5-基础设置settings-js和导航守卫permission-js" class="headerlink" title="5.基础设置settings.js和导航守卫permission.js"></a>5.基础设置settings.js和导航守卫permission.js</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022006253.png" alt="image.png"></p>
<blockquote>
<p>settings.js导出网站基础配置，包括：网站标题、固定header、显示logo<br>permission.js(权限)，主要负责路由导航守卫</p>
</blockquote>
<h2 id="6-Vuex的结构"><a href="#6-Vuex的结构" class="headerlink" title="6.Vuex的结构"></a>6.Vuex的结构</h2><h4 id="模板中的结构"><a href="#模板中的结构" class="headerlink" title="模板中的结构"></a>模板中的结构</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022006219.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022006517.png" alt="image.png"></p>
<p>注意：人资资源项目主要针对<strong>用户模块user </strong>进行改造和重写</p>
<h4 id="Vuex的设计思想"><a href="#Vuex的设计思想" class="headerlink" title="Vuex的设计思想"></a>Vuex的设计思想</h4><ul>
<li>1.页面交互状态（折叠侧边栏-固定头部）</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022006764.png" alt="image.png"></p>
<ul>
<li>2.使用全局状态Vuex根据功能拆分成不同的模块（modules）</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022006576.png" alt="image.png"> </p>
<ul>
<li>3.进行状态管理通过getters建立对于模块中属性的快捷访问</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022006497.png" alt="image.png"></p>
<h2 id="7-使用模板中的Icon图标"><a href="#7-使用模板中的Icon图标" class="headerlink" title="7.使用模板中的Icon图标"></a>7.使用模板中的Icon图标</h2><ul>
<li>src/icons/svg目录下的图标都可以使用</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022006284.png" alt="image.png"> </p>
<ul>
<li>图标文件名直接设置为svg-icon组件的iconClass属性</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022007147.png" alt="image.png"></p>
<h2 id="8-扩展—解析Icon图标的实现思路"><a href="#8-扩展—解析Icon图标的实现思路" class="headerlink" title="8.扩展—解析Icon图标的实现思路"></a>8.扩展—解析Icon图标的实现思路</h2><ul>
<li>引入目录所有的svg</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022007223.png" alt="image.png"></p>
<ul>
<li>全局注册svg-icon组件</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022007332.png" alt="image.png"></p>
<ul>
<li>loader插件打包svg</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022007842.png" alt="image.png"> </p>
<ul>
<li>svg-icon引用svg的链接</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022007387.png" alt="image.png"></p>
<ul>
<li>知识扩展</li>
</ul>
<p>1.了解：require.context(路径，是否扫描子目录， 正则匹配) 可以引入某个目录下的内容<br>2.了解：svg-sprite-loader打包了所有svg到一个svg标签上，将svg名称作为symbol标签的id属性<br>3.了解：svg-icon使用iconClass属性引用了symbol的id</p>
<h2 id="9-导入样式资源并使用git管理"><a href="#9-导入样式资源并使用git管理" class="headerlink" title="9.导入样式资源并使用git管理"></a>9.导入样式资源并使用git管理</h2><ul>
<li>将教学资源中的初始化<strong>图片-样式-svg </strong>拷贝到src目录下</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022007308.png" alt="image.png"></p>
<blockquote>
<p>因为项目是从github上拉取下来的，所以git记录了之前模版的信息，所以删除需要建立git</p>
</blockquote>
<ul>
<li>删除原有的.git文件</li>
<li><p>初始化仓库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git init <span class="comment"># 初始化仓库</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>添加到暂存区</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git add . <span class="comment"># 添加到暂存区</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>提交本地仓库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -m <span class="string">&quot;初始化人力资源项目&quot;</span> <span class="comment"># 提交本地仓库</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>接下来，同学们需要在gitee上新建一个自己的远程仓库，然后将本地的仓库推送到远程仓库托管</p>
</blockquote>
</li>
<li><p>本地仓库配置远程仓库地址</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add origin &lt;你的远程仓库地址&gt;  <span class="comment"># 本地仓库配置远程仓库地址</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>推送到远程仓库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push -u origin master <span class="comment"># 推送到远程仓库</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="二、登录模块"><a href="#二、登录模块" class="headerlink" title="二、登录模块"></a>二、登录模块</h1><h2 id="1-登录页的结构和表单"><a href="#1-登录页的结构和表单" class="headerlink" title="1.登录页的结构和表单"></a>1.登录页的结构和表单</h2><blockquote>
<p>接下来需要实现登录页的表单结构和表单内容</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022007413.png" alt="image.png"></p>
<ul>
<li>拷贝登录页的基本结构布局-代码位置(<strong>src/views/login/index.vue)</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;login-container&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;logo&quot; /&gt;</span><br><span class="line">    &lt;div class=&quot;form&quot;&gt;</span><br><span class="line">      &lt;h1&gt;登录&lt;/h1&gt;</span><br><span class="line">      &lt;el-card shadow=&quot;never&quot; class=&quot;login-card&quot;&gt;</span><br><span class="line">        &lt;!--登录表单--&gt;</span><br><span class="line">      &lt;/el-card&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name : &quot;Login&quot;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style lang=&quot;scss&quot;&gt;</span><br><span class="line">.login-container &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  align-items: stretch;</span><br><span class="line">  height: 100vh;</span><br><span class="line">  .logo &#123;</span><br><span class="line">    flex: 3;</span><br><span class="line">    background: rgba(38, 72, 176) url(../../assets/common/login_back.png)</span><br><span class="line">      no-repeat center / cover;</span><br><span class="line">    border-top-right-radius: 60px;</span><br><span class="line">    display: flex;</span><br><span class="line">    flex-direction: column;</span><br><span class="line">    align-items: flex-end;</span><br><span class="line">    justify-content: center;</span><br><span class="line">    padding: 0 100px;</span><br><span class="line">    .icon &#123;</span><br><span class="line">      background: url(../../assets/common/logo.png) no-repeat 70px center /</span><br><span class="line">        contain;</span><br><span class="line">      width: 300px;</span><br><span class="line">      height: 50px;</span><br><span class="line">      margin-bottom: 50px;</span><br><span class="line">    &#125;</span><br><span class="line">    p &#123;</span><br><span class="line">      color: #fff;</span><br><span class="line">      font-size: 18px;</span><br><span class="line">      margin-top: 20px;</span><br><span class="line">      width: 300px;</span><br><span class="line">      text-align: center;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  .form &#123;</span><br><span class="line">    flex: 2;</span><br><span class="line">    display: flex;</span><br><span class="line">    flex-direction: column;</span><br><span class="line">    justify-content: center;</span><br><span class="line">    padding-left: 176px;</span><br><span class="line">    .el-card &#123;</span><br><span class="line">      border: none;</span><br><span class="line">      padding: 0;</span><br><span class="line">    &#125;</span><br><span class="line">    h1 &#123;</span><br><span class="line">      padding-left: 20px;</span><br><span class="line">      font-size: 24px;</span><br><span class="line">    &#125;</span><br><span class="line">    .el-input &#123;</span><br><span class="line">      width: 350px;</span><br><span class="line">      height: 44px;</span><br><span class="line">      .el-input__inner &#123;</span><br><span class="line">        background: #f4f5fb;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .el-checkbox &#123;</span><br><span class="line">      color:#606266;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>实现登录表单的结构</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-card</span> <span class="attr">shadow</span>=<span class="string">&quot;never&quot;</span> <span class="attr">class</span>=<span class="string">&quot;login-card&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--登录表单--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- el-form &gt; el-form-item &gt; el-input --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入手机号&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入密码&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-checkbox</span>&gt;</span></span><br><span class="line">          用户平台使用协议</span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-checkbox</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">style</span>=<span class="string">&quot;width:350px&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>提交代码</p>
</li>
</ul>
<h2 id="2-登录表单校验-实现"><a href="#2-登录表单校验-实现" class="headerlink" title="2.登录表单校验-实现"></a>2.登录表单校验-实现</h2><ol>
<li><p>定义数据和校验规则</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Login&#x27;</span></span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Login&#x27;</span>,</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">loginForm</span>: &#123;</span><br><span class="line">        <span class="attr">mobile</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">isAgree</span>: <span class="literal">false</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">loginRules</span>: &#123;</span><br><span class="line">        <span class="attr">mobile</span>: [&#123;</span><br><span class="line">          <span class="attr">required</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&#x27;请输入手机号&#x27;</span>,</span><br><span class="line">          <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">          <span class="attr">pattern</span>: <span class="regexp">/^1[3-9]\d&#123;9&#125;$/</span>,</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&#x27;手机号格式不正确&#x27;</span>,</span><br><span class="line">          <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span></span><br><span class="line"></span><br><span class="line">        &#125;],</span><br><span class="line">        <span class="attr">password</span>: [&#123;</span><br><span class="line">          <span class="attr">required</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&#x27;请输入密码&#x27;</span>,</span><br><span class="line">          <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">          <span class="attr">min</span>: <span class="number">6</span>,</span><br><span class="line">          <span class="attr">max</span>: <span class="number">16</span>,</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&#x27;密码长度应该为6-16位之间&#x27;</span>,</span><br><span class="line">          <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span></span><br><span class="line"></span><br><span class="line">        &#125;],</span><br><span class="line">        <span class="comment">// required只能检查 null &quot;&quot; undefined</span></span><br><span class="line">        <span class="attr">isAgree</span>: [&#123;</span><br><span class="line">          <span class="attr">validator</span>: <span class="function">(<span class="params">rule, value, callback</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// rule规则</span></span><br><span class="line">            <span class="comment">// value检查的数据 true/false</span></span><br><span class="line">            <span class="comment">// callback 函数 执行这个函数</span></span><br><span class="line">            <span class="comment">// 成功执行callback 失败也执行callback(错误对象 new Error(错误信息))</span></span><br><span class="line">            value ? <span class="title function_">callback</span>() : <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;没有勾选用户平台协议&#x27;</span>))</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">login</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">form</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">isOK</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isOK) &#123;</span><br><span class="line">          <span class="title function_">alert</span>(<span class="string">&#x27;校验通过&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>绑定组件的对应属性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> &lt;el-form ref=&quot;form&quot; :model=&quot;loginForm&quot; :rules=&quot;loginRules&quot;&gt;</span><br><span class="line">      &lt;el-form-item prop=&quot;mobile&quot;&gt;</span><br><span class="line">            &lt;el-input v-model=&quot;loginForm.mobile&quot; placeholder=&quot;请输入手机号&quot; /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item prop=&quot;password&quot;&gt;</span><br><span class="line">          &lt;el-input v-model=&quot;loginForm.password&quot; show-password placeholder=&quot;请输入密码&quot; /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item prop=&quot;isAgree&quot;&gt;</span><br><span class="line">          &lt;el-checkbox v-model=&quot;loginForm.isAgree&quot;&gt;</span><br><span class="line">              用户平台使用协议</span><br><span class="line">          &lt;/el-checkbox&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item&gt;</span><br><span class="line">          &lt;el-button style=&quot;width:350px&quot; type=&quot;primary&quot; @click=&quot;login&quot;&gt;登录&lt;/el-button&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">&lt;/el-form&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="3-分析登录流程"><a href="#3-分析登录流程" class="headerlink" title="3. 分析登录流程"></a>3. 分析登录流程</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/8435673/1677660537041-ce27cc25-b47f-44f0-8658-7c86a29d426a.png#clientId=u60b73d67-62d7-4&amp;from=paste&amp;height=459&amp;id=u6da3ee15&amp;name=image.png&amp;originHeight=918&amp;originWidth=1994&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=110407&amp;status=done&amp;style=none&amp;taskId=uc92adc89-73eb-4124-aaac-39d1fc4ac34&amp;title=&amp;width=997" alt="image.png"></p>
<blockquote>
<p>传统思路都是登录校验通过之后，直接调用接口，获取token之后，跳转到主页。</p>
</blockquote>
<ul>
<li>vue-element-admin的登录思路：</li>
</ul>
<ol>
<li>登录表单校验通过</li>
<li>调用Vuex提供的登录的action</li>
<li>登录的Action中会调用接口</li>
<li>登录接口如果成功执行，会返回token</li>
<li>利用Vuex的特性，将token共享的到Vuex中，这样Vuex就统一管理了token,别的地方想要使用，直接通过Vuex就可以</li>
<li>登录接口会调用单独封装的请求模块(api)</li>
<li>请求模块中又会使用用到axios封装的请求工具</li>
<li>而请求工具又要考虑区分 开发环境和生产环境的问题</li>
<li>请求时还要考虑前后分离项目产生的跨域问题，要使用代理解决跨域</li>
</ol>
<h2 id="4-Vuex中用户模块的实现"><a href="#4-Vuex中用户模块的实现" class="headerlink" title="4. Vuex中用户模块的实现"></a>4. Vuex中用户模块的实现</h2><blockquote>
<p>登录流程中最核心的是用户模块，所以这部分我们单独拿出来进行重写。</p>
</blockquote>
<p>代码位置(<strong>src/store/modules/user.js</strong>)</p>
<ul>
<li>删除原有模板中用户模块中的内容</li>
<li>导出Vuex子模块-声明一个状态token</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">  <span class="attr">token</span>: <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> mutations = &#123;&#125;</span><br><span class="line"><span class="keyword">const</span> actions = &#123;&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">   <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">   state,</span><br><span class="line">   mutations,</span><br><span class="line">   actions</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>实现token的Vue数据持久化</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getToken, setToken, removeToken &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/auth&#x27;</span></span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">  <span class="attr">token</span>: <span class="title function_">getToken</span>(), <span class="comment">// 从缓存中读取初始值</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">  <span class="title function_">setToken</span>(<span class="params">state, token</span>) &#123;</span><br><span class="line">    state.<span class="property">token</span> = token</span><br><span class="line">    <span class="comment">// 同步到缓存</span></span><br><span class="line">    <span class="title function_">setToken</span>(token)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">removeToken</span>(<span class="params">state</span>) &#123;</span><br><span class="line">    <span class="comment">// 删除Vuex的token</span></span><br><span class="line">    state.<span class="property">token</span> = <span class="literal">null</span></span><br><span class="line">    <span class="title function_">removeToken</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>, <span class="comment">// 开启命名空间</span></span><br><span class="line">  state,</span><br><span class="line">  mutations,</span><br><span class="line">  actions</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>实现登录的action方法</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">  <span class="comment">// context上下文，传入参数</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">login</span>(<span class="params">context, data</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br><span class="line">    <span class="comment">// todo: 调用登录接口</span></span><br><span class="line">    <span class="keyword">const</span> token = <span class="keyword">await</span> <span class="title function_">login</span>(data)</span><br><span class="line">    <span class="comment">// 返回一个token 123456</span></span><br><span class="line">    context.<span class="title function_">commit</span>(<span class="string">&#x27;setToken&#x27;</span>, token)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>在登录组件中调用该action方法-代码位置(<strong>src/views/login/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">login</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">form</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">isOK</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isOK) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&quot;user/login&quot;</span>, <span class="variable language_">this</span>.<span class="property">loginForm</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意： 因为user模块导出的时候<strong>namespaced为true</strong>，所以我们调用action的时候要加上模块名称如<strong>user/login</strong></p>
<h2 id="5-Vue-cli代理解决跨域"><a href="#5-Vue-cli代理解决跨域" class="headerlink" title="5.Vue-cli代理解决跨域"></a>5.Vue-cli代理解决跨域</h2><blockquote>
<p>上个小节，完成了Vuex用户模块的创建和持久化管理，现在已经调通了 <strong>登录页面- action，</strong>继续往下需要处理<br><strong>请求模块-axios封装-跨域-区分环境</strong></p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022008343.png" alt="image.png"></p>
<blockquote>
<p>我们要先把跨域问题解决才能考虑其他内容的开发</p>
</blockquote>
<ul>
<li>首先为什么会有跨域？</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022008548.png" alt="image.png"></p>
<blockquote>
<p>在后端没有开启cors的情况下，浏览器的同源策略会直接限制后端返回的数据给到前端。这是因为我们目前所有的项目都是前后分离，前端一个服务， 后端一个服务，后端不开cors只能前端自己想办法。</p>
</blockquote>
<ul>
<li>代理是怎么解决跨域的？</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022008178.png" alt="image.png"></p>
<blockquote>
<p>既然前端不能直接请求后端服务，那就搞个中间服务，中间服务刚好和我们的前端服务同源，前端和中间服务可以通信，而中间服务是node, node后台向后端发请求是不受同源策略影响的，因为<strong>同源策略只针对浏览器！！！</strong>， 这样就是代理，中间层的服务将前端的请求代理给了后端接口。</p>
</blockquote>
<ul>
<li>具体怎么做呢？</li>
</ul>
<blockquote>
<p>跨域有开发环境跨域和生产环境跨域，我们最后上线的时候要考虑生产环境跨域，目前只需要考虑开发环境。</p>
</blockquote>
<ul>
<li>配置文件可以直接配置代理 vue.config.js</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devServer</span>: &#123;</span><br><span class="line">  <span class="attr">port</span>: port,</span><br><span class="line">  <span class="attr">open</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">overlay</span>: &#123;</span><br><span class="line">    <span class="attr">warnings</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">errors</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">proxy</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">      <span class="attr">target</span>: <span class="string">&#x27;https://heimahr.itheima.net&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// before: require(&#x27;./mock/mock-server.js&#x27;)</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>注意： 要去掉before这个选项，这个是mock数据，会影响到我们的请求，并且修改完成之后要重启服务。</p>
<h2 id="6-axios封装"><a href="#6-axios封装" class="headerlink" title="6.axios封装"></a>6.axios封装</h2><blockquote>
<p>完成了代理跨域，就可以考虑axios的封装了。</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022008739.png" alt="image.png"></p>
<blockquote>
<p>axios封装主要封装做哪些呢？</p>
</blockquote>
<ul>
<li>基础地址，超时时间</li>
<li>请求拦截器-统一注入token</li>
<li>响应拦截器-解构数据-处理异常</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022009181.png" alt="image.png"></p>
<ul>
<li>axios的基础功能</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022009628.png" alt="image.png"></p>
<p>代码位置(src/utils/request.js)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;@/store&#x27;</span></span><br><span class="line"><span class="keyword">const</span> service = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">&#x27;/api&#x27;</span>,</span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">10000</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 注入token</span></span><br><span class="line"><span class="comment">//  this.$store.getters</span></span><br><span class="line">  <span class="comment">// store.getters.token =&gt; 请求头里面</span></span><br><span class="line">  <span class="keyword">if</span> (store.<span class="property">getters</span>.<span class="property">token</span>) &#123;</span><br><span class="line">    config.<span class="property">headers</span>.<span class="property">Authorization</span> = <span class="string">`Bearer <span class="subst">$&#123;store.getters.token&#125;</span>`</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> config</span><br><span class="line">&#125;, <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 失败执行promise</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 响应拦截器</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; data, message, success &#125; = response.<span class="property">data</span> <span class="comment">// 默认json格式</span></span><br><span class="line">  <span class="keyword">if</span> (success) &#123;</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title class_">Message</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>, message &#125;)</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(message))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="title function_">async</span>(error) =&gt; &#123;</span><br><span class="line">  <span class="comment">// error.message</span></span><br><span class="line">  <span class="title class_">Message</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>, <span class="attr">message</span>: error.<span class="property">message</span> &#125;)</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service</span><br></pre></td></tr></table></figure>
<h2 id="7-环境区分"><a href="#7-环境区分" class="headerlink" title="7.环境区分"></a>7.环境区分</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022009073.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022039126.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022040621.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022009697.png" alt="image.png"></p>
<ul>
<li>将.env.development中的值改为 /api 作为请求工具的基础地址</li>
<li><strong>process.env.VUE_APP_BASE_API </strong>的表示读取该变量，npm run dev时该变量为 /api,  npm run build:prod时 该变量为 /prod-api</li>
</ul>
<h2 id="8-登录联调"><a href="#8-登录联调" class="headerlink" title="8. 登录联调"></a>8. 登录联调</h2><blockquote>
<p>目前登录功能只剩下红色的部分还需要</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022009416.png" alt="image.png"></p>
<ul>
<li>首先封装登录的API请求-代码位置(<strong>src/api/user.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">login</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/sys/login&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    data</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Vuex中的用户模块调用登录接口-代码位置(<strong>src/store/modules/user.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">  <span class="comment">// context上下文，传入参数</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">login</span>(<span class="params">context, data</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br><span class="line">    <span class="comment">// todo: 调用登录接口</span></span><br><span class="line">    <span class="keyword">const</span> token = <span class="keyword">await</span> <span class="title function_">login</span>(data)</span><br><span class="line">    <span class="comment">// 返回一个token 123456</span></span><br><span class="line">    context.<span class="title function_">commit</span>(<span class="string">&#x27;setToken&#x27;</span>, token)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>登录成功后，跳转到主页-代码位置(<strong>src/views/login/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">login</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">form</span>.<span class="title function_">validate</span>(<span class="title function_">async</span>(isOK) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (isOK) &#123;</span><br><span class="line">        <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;user/login&#x27;</span>, <span class="variable language_">this</span>.<span class="property">loginForm</span>)</span><br><span class="line">        <span class="comment">// Vuex 中的action 返回的promise</span></span><br><span class="line">        <span class="comment">// 跳转主页</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>区分不同环境的数据-代码位置(<strong>src/views/login/index.vue</strong>)</li>
</ul>
<blockquote>
<p>因为开发环境为了便利，我们将用户的账户信息和密码都默认写在了页面上，但是真正的项目我们不可能将数据进行暴露出去，所以在生产环境时应该将 用户的手机号和密码抹去</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Login&#x27;</span>,</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">loginForm</span>: &#123;</span><br><span class="line">        <span class="attr">mobile</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;development&#x27;</span> ? <span class="string">&#x27;13800000002&#x27;</span> : <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">password</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;development&#x27;</span> ? <span class="string">&#x27;123456&#x27;</span> : <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">isAgree</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;development&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="9-主页权限验证—鉴权"><a href="#9-主页权限验证—鉴权" class="headerlink" title="9.主页权限验证—鉴权"></a>9.主页权限验证—鉴权</h2><blockquote>
<p>当前项目用户是否有权限访问主页，要考虑当前有没有token,  如果有token, 用户还想去登录页，我们可以直接去主页-这个就是免登录功能。有token的情况下，直接到主页。</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022009304.png" alt="image.png"></p>
<ul>
<li>访问主页-有token放过，没有token跳到登录页</li>
<li>访问登录-有token跳到主页，没有token放过</li>
</ul>
<p>代码实现-代码位置(<strong>src/pemission.js</strong>)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> nprogress <span class="keyword">from</span> <span class="string">&#x27;nprogress&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;nprogress/nprogress.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;@/store&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *前置守卫</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> whiteList = [<span class="string">&#x27;/login&#x27;</span>, <span class="string">&#x27;/404&#x27;</span>]</span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="title function_">async</span>(to, <span class="keyword">from</span>, next) =&gt; &#123;</span><br><span class="line">  nprogress.<span class="title function_">start</span>()</span><br><span class="line">  <span class="keyword">if</span> (store.<span class="property">getters</span>.<span class="property">token</span>) &#123;</span><br><span class="line">    <span class="comment">// 存在token</span></span><br><span class="line">    <span class="keyword">if</span> (to.<span class="property">path</span> === <span class="string">&#x27;/login&#x27;</span>) &#123;</span><br><span class="line">      <span class="comment">// 跳转到主页</span></span><br><span class="line">      <span class="title function_">next</span>(<span class="string">&#x27;/&#x27;</span>) <span class="comment">// 中转到主页</span></span><br><span class="line">      <span class="comment">// next（地址）并没有执行后置守卫</span></span><br><span class="line">      nprogress.<span class="title function_">done</span>()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="title function_">next</span>() <span class="comment">// 放行</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 没有token</span></span><br><span class="line">    <span class="keyword">if</span> (whiteList.<span class="title function_">includes</span>(to.<span class="property">path</span>)) &#123;</span><br><span class="line">      <span class="title function_">next</span>()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title function_">next</span>(<span class="string">&#x27;/login&#x27;</span>) <span class="comment">// 中转到登录页</span></span><br><span class="line">      nprogress.<span class="title function_">done</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> * 后置守卫</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  nprogress.<span class="title function_">done</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="三、主页"><a href="#三、主页" class="headerlink" title="三、主页"></a>三、主页</h1><h2 id="1-获取用户资料在Vuex中共享"><a href="#1-获取用户资料在Vuex中共享" class="headerlink" title="1.获取用户资料在Vuex中共享"></a>1.获取用户资料在Vuex中共享</h2><blockquote>
<p>登录成功跳转到主页之后，可以获取用户资料，获取的资料在Vuex中共享，这样用户就可以很方便的获取该信息</p>
</blockquote>
<ul>
<li>获取流程</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022009209.png" alt="image.png"></p>
<ul>
<li>在什么位置获取？</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022009623.png" alt="image.png"></p>
<blockquote>
<p>之前在导航守卫的位置，可以确定已经有了token，这个位置获取资料更佳，因为导航守卫在页面发生跳转时出发，这时不论你从何时何地进来，如果发现你没获取资料，都可以非常清楚直观的获取资料。判断条件也使得不会发生重复的加载。</p>
</blockquote>
<ul>
<li>封装获取用户资料的API-代码位置(<strong>src/api/user.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getUserInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/sys/profile&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Vuex中声明用户信息状态，修改用户信息的mutations， 和获取用户信息的action-代码位置(<strong>src/store/modules/user.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">  <span class="attr">token</span>: <span class="title function_">getToken</span>(),</span><br><span class="line">  <span class="attr">userInfo</span>: &#123;&#125; <span class="comment">// 这里有一个空对象，为了放置后面取数据报错</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">  <span class="title function_">setUserInfo</span>(<span class="params">state, userInfo</span>) &#123;</span><br><span class="line">    state.<span class="property">userInfo</span> = userInfo</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">  <span class="keyword">async</span> getUserInfo (context) &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title function_">getUserInfo</span>()</span><br><span class="line">    context.<span class="title function_">commit</span>(<span class="string">&quot;setUserInfo&quot;</span>, result)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>通过getters声明userId(快捷访问)-代码位置(<strong>src/store/getters.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getters = &#123;</span><br><span class="line">  <span class="attr">userId</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">user</span>.<span class="property">userInfo</span>.<span class="property">userId</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> getters</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>在权限拦截处调用action-代码位置(<strong>src/pemission.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> nprogress <span class="keyword">from</span> <span class="string">&#x27;nprogress&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;nprogress/nprogress.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;@/store&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *前置守卫</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> whiteList = [<span class="string">&#x27;/login&#x27;</span>, <span class="string">&#x27;/404&#x27;</span>]</span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="title function_">async</span>(to, <span class="keyword">from</span>, next) =&gt; &#123;</span><br><span class="line">  nprogress.<span class="title function_">start</span>()</span><br><span class="line">  <span class="keyword">if</span> (store.<span class="property">getters</span>.<span class="property">token</span>) &#123;</span><br><span class="line">    <span class="comment">// 存在token</span></span><br><span class="line">    <span class="keyword">if</span> (to.<span class="property">path</span> === <span class="string">&#x27;/login&#x27;</span>) &#123;</span><br><span class="line">      <span class="comment">// 跳转到主页</span></span><br><span class="line">      <span class="title function_">next</span>(<span class="string">&#x27;/&#x27;</span>) <span class="comment">// 中转到主页</span></span><br><span class="line">      <span class="comment">// next（地址）并没有执行后置守卫</span></span><br><span class="line">      nprogress.<span class="title function_">done</span>()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="keyword">if</span>(!store.<span class="property">getters</span>.<span class="property">userId</span>) &#123;</span><br><span class="line">         <span class="keyword">await</span> store.<span class="title function_">diapatch</span>(<span class="string">&quot;user/getUserInfo&quot;</span>)</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="title function_">next</span>() <span class="comment">// 放行</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 没有token</span></span><br><span class="line">    <span class="keyword">if</span> (whiteList.<span class="title function_">includes</span>(to.<span class="property">path</span>)) &#123;</span><br><span class="line">      <span class="title function_">next</span>()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title function_">next</span>(<span class="string">&#x27;/login&#x27;</span>) <span class="comment">// 中转到登录页</span></span><br><span class="line">      nprogress.<span class="title function_">done</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>有同学会问，为什么用户信息不做持久化管理呢？ 不需要缓存吗？ 用户信息不同于token，token是当前用户的唯一标识，在几个小时内都是有效的，但是用户信息可能会进行修改或者发生变化，所以用户信息在一般的项目或者业务中不进行缓存。</p>
</blockquote>
<h2 id="2-显示用户头像和用户名"><a href="#2-显示用户头像和用户名" class="headerlink" title="2.显示用户头像和用户名"></a>2.显示用户头像和用户名</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022009859.png" alt="image.png"> </p>
<blockquote>
<p>首先解析一下顶部组件的内部位置</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022009526.png" alt="image.png"></p>
<blockquote>
<p>因为上个小节，将资料已经放到了Vuex中，可以通过getters开放属性，直接在组件中引用即可</p>
</blockquote>
<ul>
<li>Vuex中使用getters暴露属性-代码位置(<strong>src/store/getters.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getters = &#123;</span><br><span class="line">  <span class="attr">token</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">user</span>.<span class="property">token</span>,</span><br><span class="line">  <span class="attr">userId</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">user</span>.<span class="property">userInfo</span>.<span class="property">userId</span>,</span><br><span class="line">  <span class="attr">avatar</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">user</span>.<span class="property">userInfo</span>.<span class="property">staffPhoto</span>, <span class="comment">// 头像</span></span><br><span class="line">  <span class="attr">name</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">user</span>.<span class="property">userInfo</span>.<span class="property">username</span>, <span class="comment">// 用户名称</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> getters</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>在Navbar组件引入getters-代码位置(<strong>src/layout/components/NavBar.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  computed: &#123;</span><br><span class="line">    // 引入头像和用户名称</span><br><span class="line">    ...mapGetters([</span><br><span class="line">      &#x27;sidebar&#x27;,</span><br><span class="line">      &#x27;avatar&#x27;,</span><br><span class="line">      &#x27;name&#x27;</span><br><span class="line">    ])</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>NavBar组件显示用户名和头像-代码位置(<strong>src/layout/components/NavBar.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;avatar-wrapper&quot;&gt;</span><br><span class="line">          &lt;!-- 头像 --&gt;</span><br><span class="line">          &lt;img :src=&quot;avatar&quot; class=&quot;user-avatar&quot;&gt;</span><br><span class="line">          &lt;!-- 用户名称 --&gt;</span><br><span class="line">          &lt;span class=&quot;name&quot;&gt;&#123;&#123; name &#125;&#125;&lt;/span&gt;</span><br><span class="line">          &lt;!-- 图标 --&gt;</span><br><span class="line">          &lt;i class=&quot;el-icon-setting&quot; /&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>设置头像和用户名的样式-代码位置(<strong>src/layout/components/NavBar.vue</strong>)</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.avatar-wrapper</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="selector-class">.name</span> &#123;</span><br><span class="line">    //  用户名称距离右侧距离</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.el-icon-setting</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.user-avatar</span> &#123;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br></pre></td></tr></table></figure>
<h2 id="3-处理头像为空的场景"><a href="#3-处理头像为空的场景" class="headerlink" title="3.处理头像为空的场景"></a>3.处理头像为空的场景</h2><blockquote>
<p>不是所有用户都有头像的，当用户没有头像时要显示对应的内容</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022010215.png" alt="image.png"></p>
<ul>
<li>条件判断-代码位置(<strong>src/layout/components/NavBar.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;avatar-wrapper&quot;&gt;</span><br><span class="line">          &lt;!-- 头像 --&gt;</span><br><span class="line">          &lt;img v-if=&quot;avatar&quot; :src=&quot;avatar&quot; class=&quot;user-avatar&quot;&gt;</span><br><span class="line">          &lt;span v-else class=&quot;username&quot;&gt;&#123;&#123; name?.charAt(0) &#125;&#125;&lt;/span&gt;</span><br><span class="line">          &lt;!-- 用户名称 --&gt;</span><br><span class="line">          &lt;span class=&quot;name&quot;&gt;&#123;&#123; name &#125;&#125;&lt;/span&gt;</span><br><span class="line">          &lt;!-- 图标 --&gt;</span><br><span class="line">          &lt;i class=&quot;el-icon-setting&quot; /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>样式</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.username</span> &#123;</span><br><span class="line">         <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">         <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">         <span class="attribute">text-align</span>: center;</span><br><span class="line">         <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">         <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">         <span class="attribute">background</span>: <span class="number">#04c9be</span>;</span><br><span class="line">         <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">         <span class="attribute">margin-right</span>: <span class="number">4px</span>;</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这里我们使用了可选链操作符 ？， 它的意思是当？前面的变量为空时，它不会继续往下执行，防止报错，如<br>null?.name，但是我们当前的版本不支持？的编译，所以需要升级一下对应的版本</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm i vue@2.7.0  vue-template-compiler@2.7.0   <span class="comment"># 升级vue版本️</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>升级完成后，重启服务就可以了。</p>
</blockquote>
<h2 id="4-处理token失效的问题"><a href="#4-处理token失效的问题" class="headerlink" title="4.处理token失效的问题"></a>4.处理token失效的问题</h2><blockquote>
<p>token是有时效性的，当token超时，我们需要做一下处理</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022010909.png" alt="image.png"></p>
<ul>
<li>请求拦截器处理-代码位置(<strong>src/utils/request.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 响应拦截器</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(..., <span class="title function_">async</span>(error) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span> === <span class="number">401</span>) &#123;</span><br><span class="line">    <span class="title class_">Message</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;warning&#x27;</span>, <span class="attr">message</span>: <span class="string">&#x27;token超时了&#x27;</span> &#125;)</span><br><span class="line">    <span class="comment">// 说明token超时了</span></span><br><span class="line">    <span class="keyword">await</span> store.<span class="title function_">dispatch</span>(<span class="string">&#x27;user/logout&#x27;</span>) <span class="comment">// 调用action 退出登录</span></span><br><span class="line">    <span class="comment">//  主动跳到登录页</span></span><br><span class="line">    router.<span class="title function_">push</span>(<span class="string">&#x27;/login&#x27;</span>) <span class="comment">// 跳转到登录页</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// error.message</span></span><br><span class="line">  <span class="title class_">Message</span>.<span class="title function_">error</span>(error.<span class="property">message</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>实现Vuex的登出action-代码位置(<strong>src/store/modules/user.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">  <span class="comment">// 退出登录的action</span></span><br><span class="line">  <span class="title function_">logout</span>(<span class="params">context</span>) &#123;</span><br><span class="line">    context.<span class="title function_">commit</span>(<span class="string">&#x27;removeToken&#x27;</span>) <span class="comment">// 删除token</span></span><br><span class="line">    context.<span class="title function_">commit</span>(<span class="string">&#x27;setUserInfo&#x27;</span>, &#123;&#125;) <span class="comment">// 设置用户信息为空对象</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-调整下拉菜单，实现退出登录"><a href="#5-调整下拉菜单，实现退出登录" class="headerlink" title="5.调整下拉菜单，实现退出登录"></a>5.调整下拉菜单，实现退出登录</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022010872.png" alt="image.png"></p>
<blockquote>
<p>退出登录流程</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022010696.png" alt="image.png"></p>
<ul>
<li>Navbar中点击退出登录-代码位置(<strong>src/layout/components/NavBar.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-dropdown-item @click.native=&quot;logout&quot;&gt;</span><br><span class="line">        &lt;span style=&quot;display:block;&quot;&gt;登出&lt;/span&gt;</span><br><span class="line">&lt;/el-dropdown-item&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>退出方法-代码位置(<strong>src/layout/components/NavBar.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">export default  &#123;</span><br><span class="line">  methods: &#123;</span><br><span class="line">     async logout() &#123;</span><br><span class="line">      // 调用退出登录的action</span><br><span class="line">      await this.$store.dispatch(&#x27;user/logout&#x27;)</span><br><span class="line">      this.$router.push(&#x27;/login&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意：native修饰符表示给组件的根元素注册事件️</p>
<h2 id="6-修改密码功能实现"><a href="#6-修改密码功能实现" class="headerlink" title="6.修改密码功能实现"></a>6.修改密码功能实现</h2><ul>
<li>整体流程</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022010998.png" alt="image.png"> </p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022010784.png" alt="image.png"></p>
<h3 id="6-1-修改密码-弹出层"><a href="#6-1-修改密码-弹出层" class="headerlink" title="6.1-修改密码-弹出层"></a>6.1-修改密码-弹出层</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022010365.png" alt="image.png"> </p>
<ul>
<li>注册修改密码点击事件-代码位置(<strong>src/layout/components/NavBar.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- prevent阻止默认事件 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">a</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> @<span class="attr">click.prevent</span>=<span class="string">&quot;updatePassword&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-dropdown-item</span>&gt;</span>修改密码<span class="tag">&lt;/<span class="name">el-dropdown-item</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>声明变量和方法控制弹层显示-代码位置(<strong>src/layout/components/NavBar.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return  &#123;</span><br><span class="line">      showDialog: false</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    updatePassword() &#123;</span><br><span class="line">      this.showDialog = true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>放置弹层组件-代码位置(<strong>src/layout/components/NavBar.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-dialog width=&quot;500px&quot; title=&quot;修改密码&quot; :visible.sync=&quot;showDialog&quot; &gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br></pre></td></tr></table></figure>
<h3 id="6-2-修改密码-表单结构"><a href="#6-2-修改密码-表单结构" class="headerlink" title="6.2-修改密码-表单结构"></a>6.2-修改密码-表单结构</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022010627.png" alt="image.png"></p>
<ul>
<li>表单结构-代码位置(<strong>src/layout/components/NavBar.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-form  label-width=&quot;120px&quot; &gt;</span><br><span class="line">      &lt;el-form-item label=&quot;旧密码&quot; &gt;</span><br><span class="line">        &lt;el-input  show-password size=&quot;small&quot; /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;新密码&quot; &gt;</span><br><span class="line">        &lt;el-input  show-password size=&quot;small&quot; /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;重复密码&quot; &gt;</span><br><span class="line">        &lt;el-input  show-password size=&quot;small&quot; /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item&gt;</span><br><span class="line">        &lt;el-button size=&quot;mini&quot; type=&quot;primary&quot; &gt;确认修改&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button size=&quot;mini&quot; &gt;取消&lt;/el-button&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br></pre></td></tr></table></figure>
<h3 id="6-3-修改密码-表单校验"><a href="#6-3-修改密码-表单校验" class="headerlink" title="6.3-修改密码-表单校验"></a>6.3-修改密码-表单校验</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022010583.png" alt="image.png"> </p>
<ul>
<li>声明数据和规则-代码位置(<strong>src/layout/components/NavBar.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span>  &#123;</span><br><span class="line">     <span class="attr">passForm</span>: &#123;</span><br><span class="line">        <span class="attr">oldPassword</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 旧密码</span></span><br><span class="line">        <span class="attr">newPassword</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 新密码</span></span><br><span class="line">        <span class="attr">confirmPassword</span>: <span class="string">&#x27;&#x27;</span> <span class="comment">// 确认密码字段</span></span><br><span class="line">      &#125;,</span><br><span class="line">     <span class="attr">rules</span>: &#123;</span><br><span class="line">        <span class="attr">oldPassword</span>: [&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;旧密码不能为空&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;], <span class="comment">// 旧密码</span></span><br><span class="line">        <span class="attr">newPassword</span>: [&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;新密码不能为空&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;, &#123;</span><br><span class="line">          <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>,</span><br><span class="line">          <span class="attr">min</span>: <span class="number">6</span>,</span><br><span class="line">          <span class="attr">max</span>: <span class="number">16</span>,</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&#x27;新密码的长度为6-16位之间&#x27;</span></span><br><span class="line">        &#125;], <span class="comment">// 新密码</span></span><br><span class="line">        <span class="attr">confirmPassword</span>: [&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;重复密码不能为空&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;, &#123;</span><br><span class="line">          <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>,</span><br><span class="line">          <span class="attr">validator</span>: <span class="function">(<span class="params">rule, value, callback</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// value</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">passForm</span>.<span class="property">newPassword</span> === value) &#123;</span><br><span class="line">              <span class="title function_">callback</span>()</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;重复密码和新密码输入不一致&#x27;</span>))</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;] <span class="comment">// 确认密码字段</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>绑定属性-代码位置(<strong>src/layout/components/NavBar.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-form ref=&quot;passForm&quot; label-width=&quot;120px&quot; :model=&quot;passForm&quot; :rules=&quot;rules&quot;&gt;</span><br><span class="line">  &lt;el-form-item label=&quot;旧密码&quot; prop=&quot;oldPassword&quot;&gt;</span><br><span class="line">    &lt;el-input v-model=&quot;passForm.oldPassword&quot; show-password size=&quot;small&quot; /&gt;</span><br><span class="line">  &lt;/el-form-item&gt;</span><br><span class="line">  &lt;el-form-item label=&quot;新密码&quot; prop=&quot;newPassword&quot;&gt;</span><br><span class="line">    &lt;el-input v-model=&quot;passForm.newPassword&quot; show-password size=&quot;small&quot; /&gt;</span><br><span class="line">  &lt;/el-form-item&gt;</span><br><span class="line">  &lt;el-form-item label=&quot;重复密码&quot; prop=&quot;confirmPassword&quot;&gt;</span><br><span class="line">    &lt;el-input v-model=&quot;passForm.confirmPassword&quot; show-password size=&quot;small&quot; /&gt;</span><br><span class="line">  &lt;/el-form-item&gt;</span><br><span class="line">  &lt;el-form-item&gt;</span><br><span class="line">    &lt;el-button size=&quot;mini&quot; type=&quot;primary&quot; &gt;确认修改&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button size=&quot;mini&quot; &gt;取消&lt;/el-button&gt;</span><br><span class="line">  &lt;/el-form-item&gt;</span><br><span class="line">&lt;/el-form&gt;</span><br></pre></td></tr></table></figure>
<h3 id="6-4-修改密码-确定和取消"><a href="#6-4-修改密码-确定和取消" class="headerlink" title="6.4-修改密码-确定和取消"></a>6.4-修改密码-确定和取消</h3><ul>
<li>确定和取消流程</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022010479.png" alt="image.png"></p>
<ul>
<li>封装修改密码方法-代码位置(<strong>src/api/user.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 更新密码</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">updatePassword</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/sys/user/updatePass&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;put&#x27;</span>,</span><br><span class="line">    data</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>确定方法-代码位置(<strong>src/layout/components/NavBar.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 确定</span></span><br><span class="line">    <span class="title function_">btnOK</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">passForm</span>.<span class="title function_">validate</span>(<span class="keyword">async</span> isOK =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (isOK) &#123;</span><br><span class="line">          <span class="comment">// 调用接口</span></span><br><span class="line">          <span class="keyword">await</span> <span class="title function_">updatePassword</span>(<span class="variable language_">this</span>.<span class="property">passForm</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;修改密码成功&#x27;</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">btnCancel</span>()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>
<ul>
<li>取消方法-代码位置(<strong>src/layout/components/NavBar.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">btnCancel</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">passForm</span>.<span class="title function_">resetFields</span>() <span class="comment">// 重置表单</span></span><br><span class="line">      <span class="comment">// 关闭弹层</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">showDialog</span> = <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>监听弹层关闭事件</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-dialog @close=&quot;btnCancel&quot; width=&quot;500px&quot; title=&quot;修改密码&quot; :visible.sync=&quot;showDialog&quot; &gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>有同学有疑惑，不是用了.sync修饰符吗？可以直接关闭弹层，为何还要监听close事件，这是因为sync修饰符只能关闭弹层，我们还需要将表单进行重置，因为你之前打开弹层可能修改了一半或者残留一些校验信息，再打开的时候这些信息应该都被重置，所以这里用监听事件的方式再重置一下表单，保证功能的体验和完整性。</p>
</blockquote>
<h2 id="7-清理组件和路由"><a href="#7-清理组件和路由" class="headerlink" title="7. 清理组件和路由"></a>7. 清理组件和路由</h2><blockquote>
<p>主页功能开发完了，我们要清理一下模板中残余文件</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022011378.png" alt="image.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/8435673/1677731001663-0c373e48-4eb6-4691-9f60-29048729645b.png#averageHue=%23b6b6b6&amp;clientId=udd47902c-ce16-4&amp;from=paste&amp;height=400&amp;id=u4e457222&amp;name=image.png&amp;originHeight=800&amp;originWidth=1908&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=166425&amp;status=done&amp;style=none&amp;taskId=u8610b8d9-8690-445e-abf9-dac59fc210c&amp;title=&amp;width=954" alt="image.png"></p>
<ul>
<li>路由只保留登录-主页-404</li>
<li>请求模块只保留user.js模块</li>
</ul>
<h2 id="8-创建项目所需要的组件和路由"><a href="#8-创建项目所需要的组件和路由" class="headerlink" title="8.创建项目所需要的组件和路由"></a>8.创建项目所需要的组件和路由</h2><blockquote>
<p>人力资源项目需要这些模块</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">├── approval            <span class="comment"># 审批管理</span></span><br><span class="line">├── attendance          <span class="comment"># 考勤管理</span></span><br><span class="line">├── department          <span class="comment"># 组织架构</span></span><br><span class="line">├── employee            <span class="comment"># 员工管理</span></span><br><span class="line">├── permission          <span class="comment"># 权限管理</span></span><br><span class="line">├── role                <span class="comment"># 角色管理</span></span><br><span class="line">├── salary              <span class="comment"># 工资管理</span></span><br><span class="line">├── social              <span class="comment"># 社保管理</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>创建模块</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022011336.png" alt="image.png"></p>
<blockquote>
<p>大家可以直接从当天课程的素材中拷贝已经准备好的路由/组件</p>
</blockquote>
<p>组件结构样例：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022011966.png" alt="image.png"></p>
<p>路由模块样例：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022011570.png" alt="image.png"></p>
<p>路由的统一导入：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022011211.png" alt="image.png"></p>
<p>在src/router/index.js中集成到当前路由中：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022011544.png" alt="image.png"></p>
<h2 id="9-扩展—解析左侧菜单原理"><a href="#9-扩展—解析左侧菜单原理" class="headerlink" title="9.扩展—解析左侧菜单原理"></a>9.扩展—解析左侧菜单原理</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022011939.png" alt="image.png"></p>
<blockquote>
<p>左侧菜单的数据来源于路由模块的信息， 会根据路由信息的hidden属性来判断是否显示该路由信息到菜单，<br>菜单属性中的图表和标题来源于路由meta中的icon和title属性</p>
</blockquote>
<ul>
<li>分析过程</li>
</ul>
<p>sidebar组件引入路由信息：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022012599.png" alt="image.png"></p>
<p>循环渲染路由信息<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022012624.png" alt="image.png"></p>
<p>sidebarItem组件根据条件渲染-传递icon和title属性给item组件<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022012057.png" alt="image.png"></p>
<p>item组件接收icon和title属性，使用函数型组件完成渲染<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022012508.png" alt="image.png"></p>
<h2 id="10-左侧菜单显示项目logo"><a href="#10-左侧菜单显示项目logo" class="headerlink" title="10. 左侧菜单显示项目logo"></a>10. 左侧菜单显示项目logo</h2><blockquote>
<p>logo有两种展示形态，当菜单展开时，显示大图，当菜单折叠时，显示小图</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022013374.png" alt="image.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022013048.png" alt="image.png"></p>
<ul>
<li>通过settings.js的设置，将logo显示出来-代码位置(<strong>src/settings.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line"></span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;人力资源后台管理系统&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@type</span> &#123;<span class="type">boolean</span>&#125; true | false</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@description</span> Whether fix the header</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">fixedHeader</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@type</span> &#123;<span class="type">boolean</span>&#125; true | false</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@description</span> Whether show the logo in sidebar</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">sidebarLogo</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>调整logo的页面结构-代码位置(<strong>src/layout/components/Sidebar/Logo.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;sidebar-logo-container&quot; :class=&quot;&#123;&#x27;collapse&#x27;:collapse&#125;&quot;&gt;</span><br><span class="line">    &lt;transition name=&quot;sidebarLogoFade&quot;&gt;</span><br><span class="line">      &lt;router-link key=&quot;collapse&quot; class=&quot;sidebar-logo-link&quot; to=&quot;/&quot;&gt;</span><br><span class="line">        &lt;img src=&quot;@/assets/common/logo.png&quot; class=&quot;sidebar-logo&quot;&gt;</span><br><span class="line">      &lt;/router-link&gt;</span><br><span class="line">    &lt;/transition&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>调整logo样式-代码位置(<strong>src/layout/components/Sidebar/Logo.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.sidebarLogoFade-enter-active &#123;</span><br><span class="line">  transition: opacity 1.5s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.sidebarLogoFade-enter,</span><br><span class="line">.sidebarLogoFade-leave-to &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.sidebar-logo-container &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 50px;</span><br><span class="line">  line-height: 50px;</span><br><span class="line">  text-align: center;</span><br><span class="line">  overflow: hidden;</span><br><span class="line"></span><br><span class="line">  &amp; .sidebar-logo-link &#123;</span><br><span class="line">    height: 100%;</span><br><span class="line">    width: 100%;</span><br><span class="line"></span><br><span class="line">    &amp; .sidebar-logo &#123;</span><br><span class="line">      width: 140px;</span><br><span class="line">      vertical-align: middle;</span><br><span class="line">      margin-right: 12px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &amp; .sidebar-title &#123;</span><br><span class="line">      display: inline-block;</span><br><span class="line">      margin: 0;</span><br><span class="line">      color: #fff;</span><br><span class="line">      font-weight: 600;</span><br><span class="line">      line-height: 50px;</span><br><span class="line">      font-size: 14px;</span><br><span class="line">      font-family: Avenir, Helvetica Neue, Arial, Helvetica, sans-serif;</span><br><span class="line">      vertical-align: middle;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;.collapse &#123;</span><br><span class="line">    .sidebar-logo &#123;</span><br><span class="line">      margin-right: 0px;</span><br><span class="line">      width: 32px;</span><br><span class="line">      height: 32px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="四、组织架构"><a href="#四、组织架构" class="headerlink" title="四、组织架构"></a>四、组织架构</h1><h2 id="1-树组件应用"><a href="#1-树组件应用" class="headerlink" title="1.树组件应用"></a>1.树组件应用</h2><ul>
<li>树形组件-用层级结构展示信息，可展开或折叠。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022013599.png" alt="image.png"></p>
<ul>
<li>element-ui提供了树组件<a target="_blank" rel="noopener" href="https://element.eleme.cn/#/zh-CN/component/tree">el-tree</a>的应用</li>
<li>data（绑定数据）</li>
<li>props (设置属性) - children(设置子节点的字段名) / label(设置显示内容的字段名)</li>
<li>default-expand-all (默认展开所有节点)</li>
</ul>
<ul>
<li>在组织架构组件中放置树形组件-代码位置(<strong>src/views/department/index.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-tree default-expand-all :data=&quot;depts&quot; :props=&quot;defaultProps&quot;&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>声明树组件相关的数据</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;Department&#x27;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return  &#123;</span><br><span class="line">      depts: [&#123;</span><br><span class="line">        name: &#x27;传智教育&#x27;,</span><br><span class="line">        children: [</span><br><span class="line">          &#123; name: &#x27;总裁办&#x27;&#125;,</span><br><span class="line">          &#123; name: &#x27;行政部&#x27;&#125;,</span><br><span class="line">          &#123; name: &#x27;财务部&#x27;&#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;],</span><br><span class="line">      defaultProps: &#123;</span><br><span class="line">        children: &#x27;children&#x27;,</span><br><span class="line">        label: &#x27;name&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-树组件自定义结构"><a href="#2-树组件自定义结构" class="headerlink" title="2.树组件自定义结构"></a>2.树组件自定义结构</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022013605.png" alt="image.png"></p>
<blockquote>
<p>通过在el-tree中传入插槽内容，就可以渲染数据</p>
</blockquote>
<ul>
<li>自定义树形结构-代码位置(<strong>src/views/department/index.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-tree default-expand-all :data=&quot;depts&quot; :props=&quot;defaultProps&quot;&gt;</span><br><span class="line">        &lt;!-- 节点结构 --&gt;</span><br><span class="line">        &lt;!-- v-slot=&quot;&#123; node, data &#125;&quot; 只能作用在template --&gt;</span><br><span class="line">        &lt;template v-slot=&quot;&#123; data &#125;&quot;&gt;</span><br><span class="line">          &lt;el-row style=&quot;width:100%;height:40px&quot; type=&quot;flex&quot; justify=&quot;space-between&quot; align=&quot;middle&quot;&gt;</span><br><span class="line">            &lt;el-col&gt;&#123;&#123; data.name &#125;&#125;&lt;/el-col&gt;</span><br><span class="line">            &lt;el-col :span=&quot;4&quot;&gt;</span><br><span class="line">              &lt;span class=&quot;tree-manager&quot;&gt;&#123;&#123; data.managerName &#125;&#125;&lt;/span&gt;</span><br><span class="line">              &lt;!-- $event 实参 表示类型 --&gt;</span><br><span class="line">              &lt;el-dropdown &gt;</span><br><span class="line">                &lt;!-- 显示区域内容 --&gt;</span><br><span class="line">                &lt;span class=&quot;el-dropdown-link&quot;&gt;</span><br><span class="line">                  操作&lt;i class=&quot;el-icon-arrow-down el-icon--right&quot; /&gt;</span><br><span class="line">                &lt;/span&gt;</span><br><span class="line">                &lt;!-- 下拉菜单选项 --&gt;</span><br><span class="line">                &lt;el-dropdown-menu slot=&quot;dropdown&quot;&gt;</span><br><span class="line">                  &lt;el-dropdown-item command=&quot;add&quot;&gt;添加子部门&lt;/el-dropdown-item&gt;</span><br><span class="line">                  &lt;el-dropdown-item command=&quot;edit&quot;&gt;编辑部门&lt;/el-dropdown-item&gt;</span><br><span class="line">                  &lt;el-dropdown-item command=&quot;del&quot;&gt;删除&lt;/el-dropdown-item&gt;</span><br><span class="line">                &lt;/el-dropdown-menu&gt;</span><br><span class="line">              &lt;/el-dropdown&gt;</span><br><span class="line">            &lt;/el-col&gt;</span><br><span class="line">          &lt;/el-row&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">  &lt;/el-tree&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>样式-代码位置(<strong>src/views/department/index.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;style scoped&gt;</span><br><span class="line">.app-container &#123;</span><br><span class="line">  padding: 30px 140px;</span><br><span class="line">  font-size: 14px;</span><br><span class="line">&#125;</span><br><span class="line">.tree-manager &#123;</span><br><span class="line">  width: 50px;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="3-获取组织架构数据"><a href="#3-获取组织架构数据" class="headerlink" title="3.获取组织架构数据"></a>3.获取组织架构数据</h2><ul>
<li>封装获取组织的API-代码位置(<strong>src/api/department.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 获取组织架构数据</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getDepartment</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/company/department&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>在组织架构初始化时调用方法-代码位置(<strong>src/views/department/index.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; getDepartment &#125; from &#x27;@/api/department&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;Department&#x27;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return  &#123;</span><br><span class="line">      depts: [],</span><br><span class="line">      defaultProps: &#123;</span><br><span class="line">        children: &#x27;children&#x27;,</span><br><span class="line">        label: &#x27;name&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getDepartment()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">   async getDepartment() &#123;</span><br><span class="line">    const result = await getDepartment()</span><br><span class="line">    this.depts = result</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="4-递归转化树形结构"><a href="#4-递归转化树形结构" class="headerlink" title="4.递归转化树形结构"></a>4.递归转化树形结构</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022013813.png" alt="image.png"></p>
<ol>
<li>首先分析数据的关联关系</li>
<li>封装递归函数根据关联关系转化层级结构</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022013695.png" alt="image.png"></p>
<blockquote>
<p>通过分析了解到，父级的id为子级的pid</p>
</blockquote>
<ul>
<li>封装公共方法-代码位置(src/utils/index.js)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 列表型数据转化树形</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">transListToTreeData</span>(<span class="params">list, rootValue</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> arr = []</span><br><span class="line">  list.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (item.<span class="property">pid</span> === rootValue) &#123;</span><br><span class="line">      <span class="comment">// 找到了匹配的节点</span></span><br><span class="line">      <span class="comment">// 当前节点的id 和 当前节点的子节点的pid是想等的</span></span><br><span class="line">      <span class="keyword">const</span> children = <span class="title function_">transListToTreeData</span>(list, item.<span class="property">id</span>) <span class="comment">// 找到的节点的子节点</span></span><br><span class="line">      item.<span class="property">children</span> = children  <span class="comment">// 将子节点赋值给当前节点</span></span><br><span class="line">      arr.<span class="title function_">push</span>(item)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>获取完的组织数据使用转化方法转化成树形-代码位置(<strong>src/views/department/index.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">created() &#123;</span><br><span class="line">  this.getDepartment() // 调用获取数据的接口</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">  // 封装好方法</span><br><span class="line">  async getDepartment() &#123;</span><br><span class="line">    const result = await getDepartment()</span><br><span class="line">    this.depts = transListToTreeData(result, 0)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>总结：递归特点</p>
<ul>
<li>一般用来处理未知层级的数据</li>
<li>递归要有跳出条件</li>
<li>自身调用自身时参数不能重复</li>
</ul>
<h2 id="5-添加子部门—新建弹层组件"><a href="#5-添加子部门—新建弹层组件" class="headerlink" title="5.添加子部门—新建弹层组件"></a>5.添加子部门—新建弹层组件</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022013923.png" alt="image.png"><br>步骤：</p>
<ul>
<li>注册添加子部门事件</li>
<li>封装弹层组件</li>
<li><p>控制弹层显示隐藏</p>
</li>
<li><p>注册下拉菜单点击事件-代码位置(<strong>src/views/department/index.vue</strong>)</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-dropdown</span> @<span class="attr">command</span>=<span class="string">&quot;operateDept&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 显示区域内容 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;el-dropdown-link&quot;</span>&gt;</span></span><br><span class="line">            操作<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-arrow-down el-icon--right&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 下拉菜单选项 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-dropdown-menu</span> <span class="attr">slot</span>=<span class="string">&quot;dropdown&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-dropdown-item</span> <span class="attr">command</span>=<span class="string">&quot;add&quot;</span>&gt;</span>添加子部门<span class="tag">&lt;/<span class="name">el-dropdown-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-dropdown-item</span> <span class="attr">command</span>=<span class="string">&quot;edit&quot;</span>&gt;</span>编辑部门<span class="tag">&lt;/<span class="name">el-dropdown-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-dropdown-item</span> <span class="attr">command</span>=<span class="string">&quot;del&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-dropdown-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-dropdown-menu</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-dropdown</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>声明变量控制弹层显示隐藏-代码位置(<strong>src/views/department/index.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      showDialog: false</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    operateDept(type) &#123;</span><br><span class="line">      if(type === &#x27;add&#x27;) &#123;</span><br><span class="line">        this.showDialog = true</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>封装新增组织部门组件-代码位置(<strong>src/views/department/components/add-dept.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-dialog title=&quot;新增部门&quot; :visible=&quot;showDialog&quot; @close=&quot;close&quot;&gt;</span><br><span class="line">  &lt;/el-dialog&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;AddDept&#x27;</span><br><span class="line">  props: &#123;</span><br><span class="line">    showDialog: &#123;</span><br><span class="line">      type: Boolean,</span><br><span class="line">      default: false</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    close() &#123;</span><br><span class="line">      this.$emit(&#x27;update:showDialog&#x27;, false)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>在组织架构中放置新增部门组件-代码位置(<strong>src/views/department/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">add-dept</span>  <span class="attr">:show-dialog.sync</span>=<span class="string">&quot;showDialog&quot;</span>  /&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>这里我们同样使用了sync修饰符，可以监听子组件传过来的 <strong>update:属性名</strong>的事件，直接将父组件的值进行修改</p>
</blockquote>
<ul>
<li>设置el-tree组件的点击属性-(点击树不可以折叠，只有点击折叠展开图标才可以)-代码位置(<strong>src/views/department/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-tree</span> <span class="attr">:expand-on-click-node</span>=<span class="string">&quot;false&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">el-tree</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="6-添加子部门—表单结构"><a href="#6-添加子部门—表单结构" class="headerlink" title="6.添加子部门—表单结构"></a>6.添加子部门—表单结构</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022013684.png" alt="image.png"> </p>
<ul>
<li>新增组织架构结构-代码位置(<strong>src/views/department/components/add-dept.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-form  label-width=&quot;120px&quot;&gt;</span><br><span class="line">      &lt;el-form-item prop=&quot;name&quot; label=&quot;部门名称&quot;&gt;</span><br><span class="line">        &lt;el-input  placeholder=&quot;2-10个字符&quot; style=&quot;width: 80%&quot; size=&quot;mini&quot; /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;部门编码&quot;&gt;</span><br><span class="line">        &lt;el-input  placeholder=&quot;2-10个字符&quot; style=&quot;width: 80%&quot; size=&quot;mini&quot; /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;部门负责人&quot;&gt;</span><br><span class="line">        &lt;el-select  placeholder=&quot;请选择负责人&quot; style=&quot;width: 80%&quot; size=&quot;mini&quot;&gt;</span><br><span class="line">        &lt;/el-select&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item  label=&quot;部门介绍&quot;&gt;</span><br><span class="line">        &lt;el-input  placeholder=&quot;1-100个字符&quot; type=&quot;textarea&quot; size=&quot;mini&quot; :rows=&quot;4&quot; style=&quot;width: 80%&quot; /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item&gt;</span><br><span class="line">        &lt;!-- 按钮 --&gt;</span><br><span class="line">        &lt;el-row type=&quot;flex&quot; justify=&quot;center&quot;&gt;</span><br><span class="line">          &lt;el-col :span=&quot;12&quot;&gt;</span><br><span class="line">            &lt;el-button size=&quot;mini&quot; type=&quot;primary&quot; &gt;确定&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button size=&quot;mini&quot; &gt;取消&lt;/el-button&gt;</span><br><span class="line">          &lt;/el-col&gt;</span><br><span class="line">        &lt;/el-row&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br></pre></td></tr></table></figure>
<h2 id="7-添加子部门—表单基本校验"><a href="#7-添加子部门—表单基本校验" class="headerlink" title="7.添加子部门—表单基本校验"></a>7.添加子部门—表单基本校验</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022014581.png" alt="image.png"><br>表单校验规则</p>
<ul>
<li>规则表单项必填/表单项长度限制</li>
<li>部门名称和已有部门不重复</li>
<li>部门编码和已有编码不重复</li>
</ul>
<p>步骤：</p>
<ol>
<li>定义数据架构</li>
<li>绑定属性</li>
<li>定义规则</li>
</ol>
<p>基本校验</p>
<ul>
<li>声明数据和规则-代码位置(<strong>src/views/department/components/add-dept.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span>  &#123;</span><br><span class="line">      <span class="attr">formData</span>: &#123;</span><br><span class="line">        <span class="attr">code</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 部门编码</span></span><br><span class="line">        <span class="attr">introduce</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 部门介绍</span></span><br><span class="line">        <span class="attr">managerId</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 部门负责人id</span></span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 部门名称</span></span><br><span class="line">        <span class="attr">pid</span>: <span class="string">&#x27;&#x27;</span> <span class="comment">// 父级部门的id</span></span><br><span class="line">      &#125;,</span><br><span class="line">       <span class="attr">rules</span>: &#123;</span><br><span class="line">        <span class="attr">code</span>: [&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;部门编码不能为空&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">min</span>: <span class="number">2</span>, <span class="attr">max</span>: <span class="number">10</span>, <span class="attr">message</span>: <span class="string">&#x27;部门编码的长度为2-10个字符&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span></span><br><span class="line">          &#125;</span><br><span class="line">        ], <span class="comment">// 部门编码</span></span><br><span class="line">        <span class="attr">introduce</span>: [&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;部门介绍不能为空&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;, &#123;</span><br><span class="line">          <span class="attr">min</span>: <span class="number">1</span>, <span class="attr">max</span>: <span class="number">100</span>, <span class="attr">message</span>: <span class="string">&#x27;部门介绍的长度为1-100个字符&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span></span><br><span class="line">        &#125;], <span class="comment">// 部门介绍</span></span><br><span class="line">        <span class="attr">managerId</span>: [&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;部门负责人不能为空&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;], <span class="comment">// 部门负责人id</span></span><br><span class="line">        <span class="attr">name</span>: [&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;部门名称不能为空&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">min</span>: <span class="number">2</span>, <span class="attr">max</span>: <span class="number">10</span>, <span class="attr">message</span>: <span class="string">&#x27;部门名称的长度为2-10个字符&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span></span><br><span class="line">          &#125;] <span class="comment">// 部门名称</span></span><br><span class="line">        <span class="comment">// pid: &#x27;&#x27; // 父级部门的id 不需要做校验</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>绑定属性-代码位置(<strong>src/views/department/components/add-dept.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-form</span> <span class="attr">ref</span>=<span class="string">&quot;addDept&quot;</span> <span class="attr">:model</span>=<span class="string">&quot;formData&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;120px&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span> <span class="attr">label</span>=<span class="string">&quot;部门名称&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;formData.name&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;2-10个字符&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 80%&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;code&quot;</span> <span class="attr">label</span>=<span class="string">&quot;部门编码&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;formData.code&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;2-10个字符&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 80%&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;managerId&quot;</span> <span class="attr">label</span>=<span class="string">&quot;部门负责人&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-select</span> <span class="attr">v-model</span>=<span class="string">&quot;formData.managerId&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请选择负责人&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 80%&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;introduce&quot;</span> <span class="attr">label</span>=<span class="string">&quot;部门介绍&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;formData.introduce&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;1-100个字符&quot;</span> <span class="attr">type</span>=<span class="string">&quot;textarea&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">:rows</span>=<span class="string">&quot;4&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 80%&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 按钮 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">type</span>=<span class="string">&quot;flex&quot;</span> <span class="attr">justify</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> &gt;</span>确定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> &gt;</span>取消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="8-添加子部门—表单业务校验"><a href="#8-添加子部门—表单业务校验" class="headerlink" title="8.添加子部门—表单业务校验"></a>8.添加子部门—表单业务校验</h2><ul>
<li>部门名称和已有部门不重复</li>
<li>部门编码和已有编码不重复</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022014400.png" alt="image.png"></p>
<ul>
<li>部门和编码的重复校验-代码位置(<strong>src/views/department/components/add-dept.vue</strong>)</li>
</ul>
<blockquote>
<p>编码的校验规则</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">            <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>,</span><br><span class="line">            <span class="comment">// 自定义校验模式</span></span><br><span class="line">            <span class="attr">validator</span>: <span class="title function_">async</span>(rule, value, callback) =&gt; &#123;</span><br><span class="line">              <span class="comment">// value就是输入的编码</span></span><br><span class="line">              <span class="keyword">let</span> result = <span class="keyword">await</span> <span class="title function_">getDepartment</span>()</span><br><span class="line">              <span class="comment">// result数组中是否存在 value值</span></span><br><span class="line">              <span class="keyword">if</span> (result.<span class="title function_">some</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">code</span> === value)) &#123;</span><br><span class="line">                <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;部门中已经有该编码了&#x27;</span>))</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title function_">callback</span>()</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>部门的校验规则</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">            <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>,</span><br><span class="line">            <span class="comment">// 自定义校验模式</span></span><br><span class="line">            <span class="attr">validator</span>: <span class="title function_">async</span>(rule, value, callback) =&gt; &#123;</span><br><span class="line">              <span class="comment">// value就是输入的编码</span></span><br><span class="line">              <span class="keyword">let</span> result = <span class="keyword">await</span> <span class="title function_">getDepartment</span>()</span><br><span class="line">              <span class="comment">// result数组中是否存在 value值</span></span><br><span class="line">              <span class="keyword">if</span> (result.<span class="title function_">some</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">name</span> === value)) &#123;</span><br><span class="line">                <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;部门中已经有该名称了&#x27;</span>))</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title function_">callback</span>()</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br></pre></td></tr></table></figure>
<h2 id="9-添加子部门—获取负责人数据"><a href="#9-添加子部门—获取负责人数据" class="headerlink" title="9.添加子部门—获取负责人数据"></a>9.添加子部门—获取负责人数据</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022014321.png" alt="image.png"><br>步骤：</p>
<ol>
<li>获取负责人列表</li>
<li>绑定下拉组件</li>
</ol>
<ul>
<li>封装获取负责人的API-代码位置(<strong>src/api/department.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  获取部门负责人的数据</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getManagerList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/sys/user/simple&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>在组件初始化时调用-代码位置(<strong>src/views/department/components/add-dept.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getManagerList &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/department&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">managerList</span>: [], <span class="comment">// 存储负责人列表</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getManagerList</span>()</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">   <span class="keyword">async</span> <span class="title function_">getManagerList</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">managerList</span> = <span class="keyword">await</span> <span class="title function_">getManagerList</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>select渲染下拉选项-代码位置(<strong>src/views/department/components/add-dept.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-select</span> <span class="attr">v-model</span>=<span class="string">&quot;formData.managerId&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请选择负责人&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 80%&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- 下拉选项 循环 负责人数据 label表示显示的字段 value 存储字段 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">v-for</span>=<span class="string">&quot;item in managerList&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">:label</span>=<span class="string">&quot;item.username&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:value</span>=<span class="string">&quot;item.id&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="10-添加子部门—记录部门"><a href="#10-添加子部门—记录部门" class="headerlink" title="10.添加子部门—记录部门"></a>10.添加子部门—记录部门</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022014985.png" alt="image.png"></p>
<blockquote>
<p>因为添加子部门是基于当前部门，所以需要记录当前是在哪个部门添加的</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022014547.png" alt="image.png"> </p>
<ul>
<li>点击添加子部门时传递id-代码位置(<strong>src/views/department/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-dropdown</span> @<span class="attr">command</span>=<span class="string">&quot;operateDept($event, data.id)&quot;</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>$event 实参 表示点击菜单传出来的类型</p>
</blockquote>
<ul>
<li>声明一个响应式数据记录该id-代码位置(<strong>src/views/department/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span>  &#123;</span><br><span class="line">      <span class="attr">currentNodeId</span>: <span class="literal">null</span>, <span class="comment">// 存储当前点击的id</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>添加子部门方法-记录id-代码位置(<strong>src/views/department/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 操作部门方法</span></span><br><span class="line"> <span class="title function_">operateDept</span>(<span class="params">type, id</span>) &#123;</span><br><span class="line">   <span class="keyword">if</span> (type === <span class="string">&#x27;add&#x27;</span>) &#123;</span><br><span class="line">     <span class="comment">// 添加子部门</span></span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">showDialog</span> = <span class="literal">true</span> <span class="comment">// 显示弹层</span></span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">currentNodeId</span> = id</span><br><span class="line">   &#125; </span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>通过组件传递id-代码位置(<strong>src/views/department/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;add-dept :current-node-id=<span class="string">&quot;currentNodeId&quot;</span> :show-dialog.<span class="property">sync</span>=<span class="string">&quot;showDialog&quot;</span>  /&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>子组件接收id-代码位置(<strong>src/views/department/components/add-dept.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">currentNodeId</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">Number</span>,</span><br><span class="line">      <span class="attr">default</span>: <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="11-添加子部门—确定取消"><a href="#11-添加子部门—确定取消" class="headerlink" title="11.添加子部门—确定取消"></a>11.添加子部门—确定取消</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022014098.png" alt="image.png"></p>
<ul>
<li>封装新增部门的API-代码位置(<strong>src/api/department.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 新增组织</span></span><br><span class="line"><span class="comment"> * ***/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">addDepartment</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/company/department&#x27;</span>,</span><br><span class="line">    data</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>确定方法-代码位置(<strong>src/views/department/components/add-dept.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 点击确定时调用</span></span><br><span class="line">  <span class="title function_">btnOK</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">addDept</span>.<span class="title function_">validate</span>(<span class="keyword">async</span> isOK =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (isOK) &#123;</span><br><span class="line">        <span class="keyword">await</span> <span class="title function_">addDepartment</span>(&#123; ...<span class="variable language_">this</span>.<span class="property">formData</span>, <span class="attr">pid</span>: <span class="variable language_">this</span>.<span class="property">currentNodeId</span> &#125;)</span><br><span class="line">        <span class="comment">// 通知父组件更新</span></span><br><span class="line">        <span class="variable language_">this</span>.$emit(<span class="string">&#x27;updateDepartment&#x27;</span>)</span><br><span class="line">        <span class="comment">// 提示消息</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">`新增部门成功`</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">close</span>()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<ul>
<li>取消方法-代码位置(<strong>src/views/department/components/add-dept.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">close</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">addDept</span>.<span class="title function_">resetFields</span>() <span class="comment">// 重置表单</span></span><br><span class="line">      <span class="variable language_">this</span>.$emit(<span class="string">&#x27;update:showDialog&#x27;</span>, <span class="literal">false</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<ul>
<li>父组件监听updateDepartment事件</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">add-dept</span> @<span class="attr">updateDepartment</span>=<span class="string">&quot;getDepartment&quot;</span> /&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="12-编辑部门—弹出层获取数据"><a href="#12-编辑部门—弹出层获取数据" class="headerlink" title="12.编辑部门—弹出层获取数据"></a>12.编辑部门—弹出层获取数据</h2><blockquote>
<p>编辑部门和新增部门会共用一个组件，也就是add-dept组件要支持两种场景-新增场景-编辑场景</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022015210.png" alt="image.png"></p>
<ul>
<li>封装获取部门详情的API-代码位置(<strong>src/api/department.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取部门详情</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * ***/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getDepartmentDetail</span>(<span class="params">id</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/company/department/<span class="subst">$&#123;id&#125;</span>`</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>点击编辑时，弹出层，通过ref获取组件实例，调用获取详情的方法-代码位置(<strong>src/views/department/index.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;add-dept ref=&quot;addDept&quot; :current-node-id=&quot;currentNodeId&quot; :show-dialog.sync=&quot;showDialog&quot; @updateDepartment=&quot;getDepartment&quot; /&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>调用子组件方法-代码位置(<strong>src/views/department/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 操作部门方法</span></span><br><span class="line">   <span class="title function_">operateDept</span>(<span class="params">type, id</span>) &#123;</span><br><span class="line">     <span class="keyword">if</span> (type === <span class="string">&#x27;add&#x27;</span>) &#123;</span><br><span class="line">       <span class="comment">// 添加子部门</span></span><br><span class="line">       <span class="variable language_">this</span>.<span class="property">showDialog</span> = <span class="literal">true</span> <span class="comment">// 显示弹层</span></span><br><span class="line">       <span class="variable language_">this</span>.<span class="property">currentNodeId</span> = id</span><br><span class="line">     &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">&#x27;edit&#x27;</span>) &#123;</span><br><span class="line">       <span class="comment">// 编辑部门场景</span></span><br><span class="line">       <span class="variable language_">this</span>.<span class="property">showDialog</span> = <span class="literal">true</span></span><br><span class="line">       <span class="variable language_">this</span>.<span class="property">currentNodeId</span> = id <span class="comment">// 记录id 要用它获取数据</span></span><br><span class="line">       <span class="comment">// 更新props- 异步动作</span></span><br><span class="line">       <span class="comment">// 直接调用了子组件的方法 同步的方法</span></span><br><span class="line">       <span class="comment">// 要在子组件获取数据</span></span><br><span class="line">       <span class="comment">// 父组件调用子组件的方法来获取数据</span></span><br><span class="line">       <span class="variable language_">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">         <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">addDept</span>.<span class="title function_">getDepartmentDetail</span>() <span class="comment">// this.$refs.addDept等同于子组件的this</span></span><br><span class="line">       &#125;)</span><br><span class="line">     &#125; </span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这里为什么要用$nextTick，因为弹出层之后紧接着要调用子组件方法，第一次弹出层时，里面的组件还未完成渲染，所以要等到showDialog这个属性设置的数据完成渲染之后才进行调用</p>
</blockquote>
<ul>
<li>子组件提供获取详情的方法-代码位置(<strong>src/views/department/components/add-dept.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取组织的详情</span></span><br><span class="line">   <span class="keyword">async</span> <span class="title function_">getDepartmentDetail</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">formData</span> = <span class="keyword">await</span> <span class="title function_">getDepartmentDetail</span>(<span class="variable language_">this</span>.<span class="property">currentNodeId</span>)</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h2 id="13-编辑部门—编辑表单校验"><a href="#13-编辑部门—编辑表单校验" class="headerlink" title="13.编辑部门—编辑表单校验"></a>13.编辑部门—编辑表单校验</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022015342.png" alt="image.png"></p>
<blockquote>
<p>编辑部门表单校验和新增部门表单校验的区别就是编辑的数据已经在数据库存在了，必然是存在重复的</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022015636.png" alt="image.png"></p>
<ul>
<li><p>编辑场景下排出自身-</p>
</li>
<li><p>检查部门编码-代码位置(<strong>src/views/department/components/add-dept.vue</strong>)</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">            <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>,</span><br><span class="line">            <span class="comment">// 自定义校验模式</span></span><br><span class="line">            <span class="attr">validator</span>: <span class="title function_">async</span>(rule, value, callback) =&gt; &#123;</span><br><span class="line">              <span class="comment">// value就是输入的编码</span></span><br><span class="line">              <span class="keyword">let</span> result = <span class="keyword">await</span> <span class="title function_">getDepartment</span>()</span><br><span class="line">              <span class="comment">// 判断是否是编辑模式</span></span><br><span class="line">              <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">formData</span>.<span class="property">id</span>) &#123;</span><br><span class="line">                <span class="comment">// 编辑场景</span></span><br><span class="line">                result = result.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">id</span> !== <span class="variable language_">this</span>.<span class="property">formData</span>.<span class="property">id</span>)</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="comment">// result数组中是否存在 value值</span></span><br><span class="line">              <span class="keyword">if</span> (result.<span class="title function_">some</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">code</span> === value)) &#123;</span><br><span class="line">                <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;部门中已经有该编码了&#x27;</span>))</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title function_">callback</span>()</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>检查部门名称-代码位置(<strong>src/views/department/components/add-dept.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">            <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>,</span><br><span class="line">            <span class="comment">// 自定义校验模式</span></span><br><span class="line">            <span class="attr">validator</span>: <span class="title function_">async</span>(rule, value, callback) =&gt; &#123;</span><br><span class="line">              <span class="comment">// value就是输入的名称</span></span><br><span class="line">              <span class="keyword">let</span> result = <span class="keyword">await</span> <span class="title function_">getDepartment</span>()</span><br><span class="line">              <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">formData</span>.<span class="property">id</span>) &#123;</span><br><span class="line">                <span class="comment">// 编辑场景 排除自身</span></span><br><span class="line">                result = result.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">id</span> !== <span class="variable language_">this</span>.<span class="property">formData</span>.<span class="property">id</span>)</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="comment">// result数组中是否存在 value值</span></span><br><span class="line">              <span class="keyword">if</span> (result.<span class="title function_">some</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">name</span> === value)) &#123;</span><br><span class="line">                <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;部门中已经有该名称了&#x27;</span>))</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title function_">callback</span>()</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>
<h2 id="14-编辑部门—确认取消"><a href="#14-编辑部门—确认取消" class="headerlink" title="14.编辑部门—确认取消"></a>14.编辑部门—确认取消</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022015695.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022043463.png" alt="image.png"></p>
<ul>
<li>封装更新部门的API-代码位置(<strong>src/api/department.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> * 更新部门</span></span><br><span class="line"><span class="comment"> * ***/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">updateDepartment</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;put&#x27;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/company/department/<span class="subst">$&#123;data.id&#125;</span>`</span>,</span><br><span class="line">    data</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>确认时区分当前时编辑还是新增场景-代码位置(<strong>src/views/department/components/add-dept.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 点击确定时调用</span></span><br><span class="line">   <span class="title function_">btnOK</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">addDept</span>.<span class="title function_">validate</span>(<span class="keyword">async</span> isOK =&gt; &#123;</span><br><span class="line">       <span class="keyword">if</span> (isOK) &#123;</span><br><span class="line">         <span class="keyword">let</span> msg = <span class="string">&#x27;新增&#x27;</span></span><br><span class="line">         <span class="comment">// 通过formData中id</span></span><br><span class="line">         <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">formData</span>.<span class="property">id</span>) &#123;</span><br><span class="line">           <span class="comment">// 编辑场景</span></span><br><span class="line">           msg = <span class="string">&#x27;更新&#x27;</span></span><br><span class="line">           <span class="keyword">await</span> <span class="title function_">updateDepartment</span>(<span class="variable language_">this</span>.<span class="property">formData</span>)</span><br><span class="line">         &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           <span class="comment">// 新增场景</span></span><br><span class="line">           <span class="keyword">await</span> <span class="title function_">addDepartment</span>(&#123; ...<span class="variable language_">this</span>.<span class="property">formData</span>, <span class="attr">pid</span>: <span class="variable language_">this</span>.<span class="property">currentNodeId</span> &#125;)</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="comment">// 通知父组件更新</span></span><br><span class="line">         <span class="variable language_">this</span>.$emit(<span class="string">&#x27;updateDepartment&#x27;</span>)</span><br><span class="line">         <span class="comment">// 提示消息</span></span><br><span class="line">         <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">`<span class="subst">$&#123;msg&#125;</span>部门成功`</span>)</span><br><span class="line">         <span class="variable language_">this</span>.<span class="title function_">close</span>()</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;)</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure>
<ul>
<li>取消时重置数据-代码位置(<strong>src/views/department/components/add-dept.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">close</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="comment">// 修改父组件的值 子传父</span></span><br><span class="line">     <span class="comment">// resetFields 只能重置在模板中绑定的数据</span></span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">formData</span> = &#123;</span><br><span class="line">       <span class="attr">code</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 部门编码</span></span><br><span class="line">       <span class="attr">introduce</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 部门介绍</span></span><br><span class="line">       <span class="attr">managerId</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 部门负责人id</span></span><br><span class="line">       <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 部门名称</span></span><br><span class="line">       <span class="attr">pid</span>: <span class="string">&#x27;&#x27;</span> <span class="comment">// 父级部门的id</span></span><br><span class="line">     &#125;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">addDept</span>.<span class="title function_">resetFields</span>() <span class="comment">// 重置表单</span></span><br><span class="line">     <span class="variable language_">this</span>.$emit(<span class="string">&#x27;update:showDialog&#x27;</span>, <span class="literal">false</span>)</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure>
<ul>
<li>使用计算属性生成当前显示的弹层标题-代码位置(<strong>src/views/department/components/add-dept.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">  <span class="title function_">showTitle</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">formData</span>.<span class="property">id</span> ? <span class="string">&#x27;编辑部门&#x27;</span> : <span class="string">&#x27;新增部门&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>弹层标题使用计算属性-代码位置(<strong>src/views/department/components/add-dept.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-dialog :title=&quot;showTitle&quot; :visible=&quot;showDialog&quot; @close=&quot;close&quot;&gt;</span><br></pre></td></tr></table></figure>
<h2 id="15-删除部门"><a href="#15-删除部门" class="headerlink" title="15.删除部门"></a>15.删除部门</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022015596.png" alt="image.png"></p>
<ul>
<li>封装删除部门的API-代码位置(<strong>src/api/department.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 删除部门</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">delDepartment</span>(<span class="params">id</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;delete&#x27;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/company/department/<span class="subst">$&#123;id&#125;</span>`</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>在删除场景下调用API删除-代码位置(<strong>src/views/department/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 操作部门方法</span></span><br><span class="line">  <span class="title function_">operateDept</span>(<span class="params">type, id</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (type === <span class="string">&#x27;add&#x27;</span>) &#123;</span><br><span class="line">      <span class="comment">// 添加子部门</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">showDialog</span> = <span class="literal">true</span> <span class="comment">// 显示弹层</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">currentNodeId</span> = id</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">&#x27;edit&#x27;</span>) &#123;</span><br><span class="line">      <span class="comment">// 编辑部门场景</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">showDialog</span> = <span class="literal">true</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">currentNodeId</span> = id <span class="comment">// 记录id 要用它获取数据</span></span><br><span class="line">      <span class="comment">// 更新props- 异步动作</span></span><br><span class="line">      <span class="comment">// 直接调用了子组件的方法 同步的方法</span></span><br><span class="line">      <span class="comment">// 要在子组件获取数据</span></span><br><span class="line">      <span class="comment">// 父组件调用子组件的方法来获取数据</span></span><br><span class="line">      <span class="variable language_">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">addDept</span>.<span class="title function_">getDepartmentDetail</span>() <span class="comment">// this.$refs.addDept等同于子组件的this</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 删除部门</span></span><br><span class="line">      <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;您确认要删除该部门吗&#x27;</span>).<span class="title function_">then</span>(<span class="title function_">async</span>() =&gt; &#123;</span><br><span class="line">        <span class="keyword">await</span> <span class="title function_">delDepartment</span>(id)</span><br><span class="line">        <span class="comment">// 提示消息</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;删除部门成功&#x27;</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">getDepartment</span>()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h1 id="五、角色管理"><a href="#五、角色管理" class="headerlink" title="五、角色管理"></a>五、角色管理</h1><h2 id="1-搭建页面结构"><a href="#1-搭建页面结构" class="headerlink" title="1.搭建页面结构"></a>1.搭建页面结构</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022015287.png" alt="image.png"></p>
<ul>
<li>搭建角色管理的页面结构-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">      &lt;!-- 角色管理内容 --&gt;</span><br><span class="line">      &lt;div class=&quot;role-operate&quot;&gt;</span><br><span class="line">        &lt;el-button size=&quot;mini&quot; type=&quot;primary&quot;&gt;添加角色&lt;/el-button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- 放置table组件 --&gt;</span><br><span class="line">      &lt;el-table&gt;</span><br><span class="line">        &lt;!-- 放置列 --&gt;</span><br><span class="line">        &lt;el-table-column align=&quot;center&quot; width=&quot;200&quot; label=&quot;角色&quot; /&gt;</span><br><span class="line">        &lt;el-table-column align=&quot;center&quot; width=&quot;200&quot; label=&quot;启用&quot; /&gt;</span><br><span class="line">        &lt;el-table-column align=&quot;center&quot; label=&quot;描述&quot; /&gt;</span><br><span class="line">        &lt;el-table-column align=&quot;center&quot; label=&quot;操作&quot; /&gt;</span><br><span class="line">      &lt;/el-table&gt;</span><br><span class="line">      &lt;!-- 放置分页组件 --&gt;</span><br><span class="line">      &lt;el-row type=&quot;flex&quot; style=&quot;height:60px&quot; align=&quot;middle&quot; justify=&quot;end&quot;&gt;</span><br><span class="line">        &lt;!-- 放置分页组件 --&gt;</span><br><span class="line">        &lt;el-pagination layout=&quot;prev, pager, next&quot; /&gt;</span><br><span class="line">      &lt;/el-row&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>样式-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;style scoped&gt;</span><br><span class="line"><span class="selector-class">.role-operate</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="2-获取数据"><a href="#2-获取数据" class="headerlink" title="2.获取数据"></a>2.获取数据</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022015841.png" alt="image.png"> </p>
<ul>
<li>封装获取角色API-代码位置(<strong>src/api/role.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> * 获取角色列表</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getRoleList</span>(<span class="params">params</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/sys/role&#x27;</span>,</span><br><span class="line">    params <span class="comment">// 查询参数</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>在初始化时调用API-赋值给数据-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getRoleList &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/role&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Role&#x27;</span></span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Role&#x27;</span>,</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">list</span>: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getRoleList</span>()</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">getRoleList</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; rows &#125; = <span class="keyword">await</span> <span class="title function_">getRoleList</span>()</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">list</span> = rows <span class="comment">// 赋值数据</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>绑定表格属性-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 放置列 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span> <span class="attr">label</span>=<span class="string">&quot;角色&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;state&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span> <span class="attr">label</span>=<span class="string">&quot;启用&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;description&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">label</span>=<span class="string">&quot;描述&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="3-表格自定义结构"><a href="#3-表格自定义结构" class="headerlink" title="3.表格自定义结构"></a>3.表格自定义结构</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022015037.png" alt="image.png"></p>
<ul>
<li>自定义启用列和操作列的结构-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;state&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span> <span class="attr">label</span>=<span class="string">&quot;启用&quot;</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 自定义列结构 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;&#123; row &#125;&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>  &#123;&#123; row.state === 1 ? &quot;已启用&quot; : row.state === 0 ? &quot;未启用&quot; : &quot;无&quot; &#125;&#125; <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>自定义操作列结构-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 放置操作按钮 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span>分配权限<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="4-分页功能"><a href="#4-分页功能" class="headerlink" title="4.分页功能"></a>4.分页功能</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022016862.png" alt="image.png"><br>分页功能</p>
<ul>
<li>展示页码</li>
<li>切换分页获取数据</li>
</ul>
<p>分页组件属性</p>
<ul>
<li>当前页码</li>
<li>每页条数</li>
<li>总数</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022016380.png" alt="image.png"> </p>
<ul>
<li>定义分页信息-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span>  &#123;</span><br><span class="line">      <span class="attr">pageParams</span>: &#123;</span><br><span class="line">          <span class="attr">page</span>: <span class="number">1</span>, <span class="comment">// 第几页</span></span><br><span class="line">          <span class="attr">pagesize</span>: <span class="number">5</span>, <span class="comment">// 每页多少条</span></span><br><span class="line">          <span class="attr">total</span>: <span class="number">0</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>绑定分页信息-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:page-size</span>=<span class="string">&quot;pageParams.pagesize&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:current-page</span>=<span class="string">&quot;pageParams.page&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:total</span>=<span class="string">&quot;pageParams.total&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">layout</span>=<span class="string">&quot;prev, pager, next&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">current-change</span>=<span class="string">&quot;changePage&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>初始化时将总数赋值-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">getRoleList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; rows, total &#125; = <span class="keyword">await</span> <span class="title function_">getRoleList</span>(<span class="variable language_">this</span>.<span class="property">pageParams</span>)</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">list</span> = rows <span class="comment">// 赋值数据</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">pageParams</span>.<span class="property">total</span> = total</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<ul>
<li>切换分页时，获取对应页码的数据-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 切换分页时 请求新的数据</span></span><br><span class="line"><span class="title function_">changePage</span>(<span class="params">newPage</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">pageParams</span>.<span class="property">page</span> = newPage <span class="comment">// 赋值当前页码</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">getRoleList</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-新增功能弹层"><a href="#5-新增功能弹层" class="headerlink" title="5.新增功能弹层"></a>5.新增功能弹层</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022016001.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022016010.png" alt="image.png"></p>
<ul>
<li>放置弹层组件-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">width</span>=<span class="string">&quot;500px&quot;</span> <span class="attr">title</span>=<span class="string">&quot;新增角色&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;showDialog&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 表单内容 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">label-width</span>=<span class="string">&quot;120px&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;角色名称&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">style</span>=<span class="string">&quot;width:300px&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;启用&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-switch</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;角色描述&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;textarea&quot;</span> <span class="attr">:rows</span>=<span class="string">&quot;3&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:300px&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">type</span>=<span class="string">&quot;flex&quot;</span> <span class="attr">justify</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span>&gt;</span>确定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span>&gt;</span>取消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>声明变量控制弹层显示-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span>  &#123;</span><br><span class="line">      <span class="attr">showDialog</span>: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>点击按钮弹出层-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;showDialog = true&quot;</span>&gt;</span>添加角色<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>有同学可能会问，为啥组织架构要新增和编辑要单独封装一个组件，而角色管理不用呢?这里面有什么原因和讲究吗？ 其实在企业开发过程中，封装组件并不是必须的，当一个业务或者需求明确，并且会有复用的场景下，封装组件会更佳规范一些，而有的企业为了提升开发效率，速度优先, 不封装组件的情况也是很常见的。</p>
</blockquote>
<h2 id="6-表单数据校验"><a href="#6-表单数据校验" class="headerlink" title="6.表单数据校验"></a>6.表单数据校验</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022016081.png" alt="image.png"></p>
<ul>
<li>声明数据和规则-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>  &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">roleForm</span>: &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">description</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">state</span>: <span class="number">0</span> <span class="comment">// 默认未1启用 关闭 0 打开1</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">rules</span>: &#123;</span><br><span class="line">        <span class="attr">name</span>: [&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;角色名称不能为空&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;],</span><br><span class="line">        <span class="attr">description</span>: [&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;角色描述不能为空&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>绑定表单校验和数据-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-form</span> <span class="attr">ref</span>=<span class="string">&quot;roleForm&quot;</span> <span class="attr">:model</span>=<span class="string">&quot;roleForm&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;120px&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span> <span class="attr">label</span>=<span class="string">&quot;角色名称&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;roleForm.name&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:300px&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;启用&quot;</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 如果不需要校验 就不需要写 prop属性 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-switch</span> <span class="attr">v-model</span>=<span class="string">&quot;roleForm.state&quot;</span> <span class="attr">:active-value</span>=<span class="string">&quot;1&quot;</span> <span class="attr">:inactive-value</span>=<span class="string">&quot;0&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;description&quot;</span> <span class="attr">label</span>=<span class="string">&quot;角色描述&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;roleForm.description&quot;</span> <span class="attr">type</span>=<span class="string">&quot;textarea&quot;</span> <span class="attr">:rows</span>=<span class="string">&quot;3&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:300px&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        </span><br></pre></td></tr></table></figure>
<h2 id="7-新增角色—确定取消"><a href="#7-新增角色—确定取消" class="headerlink" title="7.新增角色—确定取消"></a>7.新增角色—确定取消</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022016352.png" alt="image.png"></p>
<ul>
<li>封装新增角色的API-代码位置(<strong>src/api/role.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** **</span></span><br><span class="line"><span class="comment"> * 新增角色</span></span><br><span class="line"><span class="comment"> * ***/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">addRole</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/sys/role&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    data</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>确定和取消方法</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">btnOK</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">roleForm</span>.<span class="title function_">validate</span>(<span class="keyword">async</span> isOK =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (isOK) &#123;</span><br><span class="line">          <span class="keyword">await</span> <span class="title function_">addRole</span>(<span class="variable language_">this</span>.<span class="property">roleForm</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;新增角色成功&#x27;</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">getRoleList</span>()</span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">btnCancel</span>()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line"><span class="title function_">btnCancel</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">roleForm</span>.<span class="title function_">resetFields</span>() <span class="comment">// 重置表单数据</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">showDialog</span> = <span class="literal">false</span> <span class="comment">// 关闭弹层</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<ul>
<li>弹层绑定关闭方法</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">width</span>=<span class="string">&quot;500px&quot;</span> <span class="attr">title</span>=<span class="string">&quot;新增角色&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;showDialog&quot;</span> @<span class="attr">close</span>=<span class="string">&quot;btnCancel&quot;</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="8-编辑角色—进入行内编辑"><a href="#8-编辑角色—进入行内编辑" class="headerlink" title="8.编辑角色—进入行内编辑"></a>8.编辑角色—进入行内编辑</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022016171.png" alt="image.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/8435673/1677752762094-a0a67f8f-852d-4562-b351-e13bb19d5546.png#averageHue=%23c6daec&amp;clientId=u437893ff-a4ad-4&amp;from=paste&amp;height=124&amp;id=ue23dbb1e&amp;name=image.png&amp;originHeight=248&amp;originWidth=2046&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=37554&amp;status=done&amp;style=none&amp;taskId=u094ccf42-5d1a-4fdc-bf33-a8c74276aea&amp;title=&amp;width=1023" alt="image.png"></p>
<ul>
<li>获取数据之后针对每个数据定义标识-使用$set-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 针对每一行数据添加一个编辑标记</span></span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">       <span class="comment">// item.isEdit = false // 添加一个属性 初始值为false</span></span><br><span class="line">       <span class="comment">// 数据响应式的问题  数据变化 视图更新</span></span><br><span class="line">       <span class="comment">// 添加的动态属性 不具备响应式特点</span></span><br><span class="line">       <span class="comment">// this.$set(目标对象, 属性名称, 初始值) 可以针对目标对象 添加的属性 添加响应式</span></span><br><span class="line">       <span class="variable language_">this</span>.$set(item, <span class="string">&#x27;isEdit&#x27;</span>, <span class="literal">false</span>)</span><br><span class="line">     &#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>为什么不使用item.isEdit = false , 因为动态添加的属性不具备响应式的特点，如果想要具备响应式，可以使用$set</p>
</blockquote>
<ul>
<li>点击编辑时，将当前行的标记isEdit设置为true-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table-column align=&quot;center&quot; label=&quot;操作&quot;&gt;</span><br><span class="line">    &lt;template&gt;</span><br><span class="line">        &lt;!-- 非编辑状态 --&gt;</span><br><span class="line">        &lt;el-button size=&quot;mini&quot; type=&quot;text&quot;&gt;分配权限&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button size=&quot;mini&quot; type=&quot;text&quot; @click=&quot;btnEditRow(row)&quot;&gt;编辑&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button size=&quot;mini&quot; type=&quot;text&quot;&gt;删除&lt;/el-button&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>点击编辑的方法-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 点击编辑行</span></span><br><span class="line"><span class="title function_">btnEditRow</span>(<span class="params">row</span>) &#123;</span><br><span class="line">  row.<span class="property">isEdit</span> = <span class="literal">true</span> <span class="comment">// 改变行的编辑状态</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>表格列中根据当前的isEdit标记-渲染结构-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span> <span class="attr">label</span>=<span class="string">&quot;角色&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;&#123; row &#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 条件判断 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-if</span>=<span class="string">&quot;row.isEdit&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-else</span>&gt;</span>&#123;&#123; row.name &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;state&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span> <span class="attr">label</span>=<span class="string">&quot;启用&quot;</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 自定义列结构 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;&#123; row &#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-switch</span> <span class="attr">v-if</span>=<span class="string">&quot;row.isEdit&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-else</span>&gt;</span>  &#123;&#123; row.state === 1 ? &quot;已启用&quot; : row.state === 0 ? &quot;未启用&quot; : &quot;无&quot; &#125;&#125; <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;description&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">label</span>=<span class="string">&quot;描述&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;&#123; row &#125;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-if</span>=<span class="string">&quot;row.isEdit&quot;</span> <span class="attr">type</span>=<span class="string">&quot;textarea&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-else</span>&gt;</span>&#123;&#123; row.description &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;&#123; row &#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">&quot;row.isEdit&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 编辑状态 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span>&gt;</span>确定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span>&gt;</span>取消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">              <span class="comment">&lt;!-- 非编辑状态 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span>分配权限<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;btnEditRow(row)&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>$set的应用</p>
</blockquote>
<ul>
<li>this.$set(目标对象, 属性名称, 初始值 ) </li>
<li>等价于 Vue.set(目标对象, 属性名称, 初始值)</li>
<li>向响应式对象中添加一个属性，并确保这个新属性同样是响应式的，且触发视图更新。</li>
</ul>
<h2 id="9-行内编辑—数据缓存"><a href="#9-行内编辑—数据缓存" class="headerlink" title="9.行内编辑—数据缓存"></a>9.行内编辑—数据缓存</h2><blockquote>
<p>为什么要做数据缓存？</p>
</blockquote>
<p>答： 因为编辑时，可以取消会滚到之前的状态，所以编辑时的数据是临时的数据。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022017750.png" alt="image.png"><br>如图，editRow的数据是针对当前行的数据做了一份拷贝，针对这个拷贝，我们可以随意修改。</p>
<ul>
<li>初始化时缓存数据-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">  <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// item.isEdit = false // 添加一个属性 初始值为false</span></span><br><span class="line">      <span class="comment">// 数据响应式的问题  数据变化 视图更新</span></span><br><span class="line">      <span class="comment">// 添加的动态属性 不具备响应式特点</span></span><br><span class="line">      <span class="comment">// this.$set(目标对象, 属性名称, 初始值) 可以针对目标对象 添加的属性 添加响应式</span></span><br><span class="line">      <span class="variable language_">this</span>.$set(item, <span class="string">&#x27;isEdit&#x27;</span>, <span class="literal">false</span>)</span><br><span class="line">      <span class="variable language_">this</span>.$set(item, <span class="string">&#x27;editRow&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">name</span>: item.<span class="property">name</span>,</span><br><span class="line">        <span class="attr">state</span>: item.<span class="property">state</span>,</span><br><span class="line">        <span class="attr">description</span>: item.<span class="property">description</span></span><br><span class="line">      &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>点击编辑时更新缓存数据-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">btnEditRow</span>(<span class="params">row</span>) &#123;</span><br><span class="line">      row.<span class="property">isEdit</span> = <span class="literal">true</span> <span class="comment">// 改变行的编辑状态</span></span><br><span class="line">      <span class="comment">// 更新缓存数据</span></span><br><span class="line">      row.<span class="property">editRow</span>.<span class="property">name</span> = row.<span class="property">name</span></span><br><span class="line">      row.<span class="property">editRow</span>.<span class="property">state</span> = row.<span class="property">state</span></span><br><span class="line">      row.<span class="property">editRow</span>.<span class="property">description</span> = row.<span class="property">description</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>将编辑时的表单双向绑定缓存数据-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span> <span class="attr">label</span>=<span class="string">&quot;角色&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;&#123; row &#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 条件判断 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-if</span>=<span class="string">&quot;row.isEdit&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;row.editRow.name&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-else</span>&gt;</span>&#123;&#123; row.name &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;state&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span> <span class="attr">label</span>=<span class="string">&quot;启用&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 自定义列结构 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;&#123; row &#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 开 1 关 0 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-switch</span> <span class="attr">v-if</span>=<span class="string">&quot;row.isEdit&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;row.editRow.state&quot;</span> <span class="attr">:active-value</span>=<span class="string">&quot;1&quot;</span> <span class="attr">:inactive-value</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-else</span>&gt;</span>  &#123;&#123; row.state === 1 ? &quot;已启用&quot; : row.state === 0 ? &quot;未启用&quot; : &quot;无&quot; &#125;&#125; <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;description&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">label</span>=<span class="string">&quot;描述&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;&#123; row &#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-if</span>=<span class="string">&quot;row.isEdit&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;row.editRow.description&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;textarea&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-else</span>&gt;</span>&#123;&#123; row.description &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="10-编辑角色—确定取消"><a href="#10-编辑角色—确定取消" class="headerlink" title="10.编辑角色—确定取消"></a>10.编辑角色—确定取消</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022017308.png" alt="image.png"></p>
<ul>
<li>封装更新角色信息的API-代码位置(<strong>src/api/role.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 更新角色</span></span><br><span class="line"><span class="comment"> * ***/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">updateRole</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/role/<span class="subst">$&#123;data.id&#125;</span>`</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;put&#x27;</span>,</span><br><span class="line">    data</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>确定方法-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button type=<span class="string">&quot;primary&quot;</span> size=<span class="string">&quot;mini&quot;</span> @click=<span class="string">&quot;btnEditOK(row)&quot;</span>&gt;确定&lt;/el-button&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 点击确定时触发</span></span><br><span class="line">    <span class="keyword">async</span>  <span class="title function_">btnEditOK</span>(<span class="params">row</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (row.<span class="property">editRow</span>.<span class="property">name</span> &amp;&amp; row.<span class="property">editRow</span>.<span class="property">description</span>) &#123;</span><br><span class="line">        <span class="comment">// 下一步操作</span></span><br><span class="line">        <span class="keyword">await</span> <span class="title function_">updateRole</span>(&#123; ...row.<span class="property">editRow</span>, <span class="attr">id</span>: row.<span class="property">id</span> &#125;)</span><br><span class="line">        <span class="comment">// 更新成功</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;更新角色成功&#x27;</span>)</span><br><span class="line">        <span class="comment">// 更新显示数据  退出编辑状态</span></span><br><span class="line">        <span class="comment">// row.name = row.editRow.name // eslint的一校验 误判</span></span><br><span class="line">        <span class="comment">// Object.assign(target, source)</span></span><br><span class="line">        <span class="title class_">Object</span>.<span class="title function_">assign</span>(row, &#123;</span><br><span class="line">          ...row.<span class="property">editRow</span>,</span><br><span class="line">          <span class="attr">isEdit</span>: <span class="literal">false</span> <span class="comment">// 退出编辑模式</span></span><br><span class="line">        &#125;) <span class="comment">// 规避eslint的误判</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">warning</span>(<span class="string">&#x27;角色和描述不能为空&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意： 这里既然更新成功了，要把缓存数据回显到页面上，并且关闭编辑模式</p>
</blockquote>
<ul>
<li>取消方法-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button size=&quot;mini&quot; @click=&quot;row.isEdit = false&quot;&gt;取消&lt;/el-button&gt;</span><br></pre></td></tr></table></figure>
<h2 id="11-删除角色"><a href="#11-删除角色" class="headerlink" title="11.删除角色"></a>11.删除角色</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022017063.png" alt="image.png"> </p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022017112.png" alt="image.png"></p>
<ul>
<li>封装删除角色的API-代码位置(<strong>src/api/role.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> * 删除角色</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">delRole</span>(<span class="params">id</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/role/<span class="subst">$&#123;id&#125;</span>`</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;delete&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>在删除位置加入气泡框-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-popconfirm</span> <span class="attr">title</span>=<span class="string">&quot;这是一段内容确定删除吗？&quot;</span> @<span class="attr">onConfirm</span>=<span class="string">&quot;confirmDel(row.id)&quot;</span> &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">slot</span>=<span class="string">&quot;reference&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-left:10px&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-popconfirm</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：这里element-ui文档有点问题，el-popconfirm的确认事件是onConfirm，但是文档上写的是confirm事件，这里需要注意</p>
</blockquote>
<ul>
<li>删除方法-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">async</span>  <span class="title function_">confirmDel</span>(<span class="params">id</span>) &#123;</span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">delRole</span>(id) <span class="comment">// 后端删除</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;删除角色成功&#x27;</span>)</span><br><span class="line">      <span class="comment">// 删除的如果是最后一个</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">list</span>.<span class="property">length</span> === <span class="number">1</span>) <span class="variable language_">this</span>.<span class="property">pageParams</span>.<span class="property">page</span>--</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">getRoleList</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="六、员工管理"><a href="#六、员工管理" class="headerlink" title="六、员工管理"></a>六、员工管理</h1><h2 id="1-页面结构"><a href="#1-页面结构" class="headerlink" title="1.页面结构"></a>1.页面结构</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022017858.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022017147.png" alt="image.png"> </p>
<ul>
<li>基本的页面结构-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;left&quot;&gt;</span><br><span class="line">        &lt;el-input style=&quot;margin-bottom:10px&quot; type=&quot;text&quot; prefix-icon=&quot;el-icon-search&quot; size=&quot;small&quot; placeholder=&quot;输入员工姓名全员搜索&quot; /&gt;</span><br><span class="line">        &lt;!-- 树形组件 --&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div class=&quot;right&quot;&gt;</span><br><span class="line">        &lt;el-row class=&quot;opeate-tools&quot; type=&quot;flex&quot; justify=&quot;end&quot;&gt;</span><br><span class="line">          &lt;el-button size=&quot;mini&quot; type=&quot;primary&quot;&gt;添加员工&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button size=&quot;mini&quot;&gt;excel导入&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button size=&quot;mini&quot;&gt;excel导出&lt;/el-button&gt;</span><br><span class="line">        &lt;/el-row&gt;</span><br><span class="line">        &lt;!-- 表格组件 --&gt;</span><br><span class="line">        &lt;!-- 分页 --&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;Employee&#x27;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.app-container &#123;</span><br><span class="line">  background: #fff;</span><br><span class="line">  display: flex;</span><br><span class="line">  .left &#123;</span><br><span class="line">    width: 280px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">    border-right: 1px solid #eaeef4;</span><br><span class="line">  &#125;</span><br><span class="line">  .right &#123;</span><br><span class="line">    flex: 1;</span><br><span class="line">    padding: 20px;</span><br><span class="line">    .opeate-tools &#123;</span><br><span class="line">      margin:10px ;</span><br><span class="line">    &#125;</span><br><span class="line">    .username &#123;</span><br><span class="line">      height: 30px;</span><br><span class="line">      width: 30px;</span><br><span class="line">      line-height: 30px;</span><br><span class="line">      text-align: center;</span><br><span class="line">      border-radius: 50%;</span><br><span class="line">      color: #fff;</span><br><span class="line">      background: #04C9BE;</span><br><span class="line">      font-size: 12px;</span><br><span class="line">      display:inline-block;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="2-左侧树的加载"><a href="#2-左侧树的加载" class="headerlink" title="2.左侧树的加载"></a>2.左侧树的加载</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022017747.png" alt="image.png"> </p>
<ul>
<li>定义树组件需要的数据-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">depts</span>: [], <span class="comment">// 组织数据</span></span><br><span class="line">      <span class="attr">defaultProps</span>: &#123;</span><br><span class="line">        <span class="attr">label</span>: <span class="string">&#x27;name&#x27;</span>,</span><br><span class="line">        <span class="attr">children</span>: <span class="string">&#x27;children&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>放置树形组件-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-tree</span><br><span class="line">          :data=&quot;depts&quot;</span><br><span class="line">          :props=&quot;defaultProps&quot;</span><br><span class="line">          default-expand-all</span><br><span class="line">          :expand-on-click-node=&quot;false&quot;</span><br><span class="line">          highlight-current</span><br><span class="line">  /&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>初始化时加载数据转化树形-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">getDepartment</span>()</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">getDepartment</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 递归方法 将列表转化成树形</span></span><br><span class="line">    <span class="comment">// let result = await getDepartment()</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">depts</span> = <span class="title function_">transListToTreeData</span>(<span class="keyword">await</span> <span class="title function_">getDepartment</span>(), <span class="number">0</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-选中首个节点"><a href="#3-选中首个节点" class="headerlink" title="3.选中首个节点"></a>3.选中首个节点</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022018909.png" alt="image.png"> </p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022018606.png" alt="image.png"></p>
<ul>
<li>在data中声明一个记录id的参数-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">data () &#123;</span><br><span class="line">  <span class="keyword">return</span>  &#123;</span><br><span class="line">    <span class="comment">// 存储查询参数</span></span><br><span class="line">      <span class="attr">queryParams</span>: &#123;</span><br><span class="line">        <span class="attr">departmentId</span>: <span class="literal">null</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>为什么要放在queryParams中，因为后面的查询会有很多查询条件，到时候查询条件都会聚合到一起，所以使用一个公共的对象来管理更方便和合适</p>
</blockquote>
<ul>
<li>初始化时首个id节点，并且选中-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">getDepartment</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// 递归方法 将列表转化成树形</span></span><br><span class="line">      <span class="comment">// let result = await getDepartment()</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">depts</span> = <span class="title function_">transListToTreeData</span>(<span class="keyword">await</span> <span class="title function_">getDepartment</span>(), <span class="number">0</span>)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">queryParams</span>.<span class="property">departmentId</span> = <span class="variable language_">this</span>.<span class="property">depts</span>[<span class="number">0</span>].<span class="property">id</span></span><br><span class="line">      <span class="comment">// 设置选中节点</span></span><br><span class="line">      <span class="comment">// 树组件渲染是异步的 等到更新完毕</span></span><br><span class="line">      <span class="variable language_">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 此时意味着树渲染完毕</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">deptTree</span>.<span class="title function_">setCurrentKey</span>(<span class="variable language_">this</span>.<span class="property">queryParams</span>.<span class="property">departmentId</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>为什么使用$nextTick，因为我们设置完树形之后立刻选中首个节点，此时更新还没有完成，必须等待更新完成后，再去选中首个节点，所以需要使用$nextTick</p>
</blockquote>
<ul>
<li>监听树组件的节点切换事件-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-tree</span></span></span><br><span class="line"><span class="tag">         <span class="attr">ref</span>=<span class="string">&quot;deptTree&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">node-key</span>=<span class="string">&quot;id&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">:data</span>=<span class="string">&quot;depts&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">:props</span>=<span class="string">&quot;defaultProps&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">default-expand-all</span></span></span><br><span class="line"><span class="tag">         <span class="attr">:expand-on-click-node</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">highlight-current</span></span></span><br><span class="line"><span class="tag">         @<span class="attr">current-change</span>=<span class="string">&quot;selectNode&quot;</span></span></span><br><span class="line"><span class="tag"> /&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>这里需要明白，需要给定node-key属性，否则setCurrentKey方法不知道设置的是哪个字段的值</p>
</blockquote>
<ul>
<li>切换节点时再次记录id-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">selectNode</span>(<span class="params">node</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">queryParams</span>.<span class="property">departmentId</span> = node.<span class="property">id</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-员工列表结构"><a href="#4-员工列表结构" class="headerlink" title="4.员工列表结构"></a>4.员工列表结构</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022018205.png" alt="image.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/8435673/1677825898302-a01e05a6-8b83-47fd-901f-7030b9750138.png#averageHue=%23fefefe&amp;clientId=u37856cab-f36d-4&amp;from=paste&amp;height=45&amp;id=u3b973573&amp;name=image.png&amp;originHeight=235&amp;originWidth=1280&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=1205451&amp;status=done&amp;style=none&amp;taskId=u457f4e2e-c2f6-49b3-8924-d0ad8cceff4&amp;title=&amp;width=243" alt="image.png"></p>
<ul>
<li>右侧列表页面结构-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">label</span>=<span class="string">&quot;头像&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;手机号&quot;</span> <span class="attr">sortable</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;工号&quot;</span> <span class="attr">sortable</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;聘用形式&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;部门&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;入职时间&quot;</span> <span class="attr">sortable</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">width</span>=<span class="string">&quot;280px&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span>查看<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span>角色<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 分页 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-row</span> <span class="attr">style</span>=<span class="string">&quot;height: 60px&quot;</span> <span class="attr">align</span>=<span class="string">&quot;middle&quot;</span> <span class="attr">type</span>=<span class="string">&quot;flex&quot;</span> <span class="attr">justify</span>=<span class="string">&quot;end&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">        <span class="attr">layout</span>=<span class="string">&quot;total,prev, pager, next&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:total</span>=<span class="string">&quot;1000&quot;</span></span></span><br><span class="line"><span class="tag">     /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="5-获取员工数据"><a href="#5-获取员工数据" class="headerlink" title="5.获取员工数据"></a>5.获取员工数据</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022018137.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022018428.png" alt="image.png"> </p>
<blockquote>
<p>第一次加载之后 或者是切换节点之后，都要去根据点击的节点去查询员工的数据</p>
</blockquote>
<ul>
<li>封装获取员工数据的API-代码位置(<strong>src/api/employee.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getEmployeeList</span>(<span class="params">params</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/sys/user&#x27;</span>,</span><br><span class="line">    params <span class="comment">// 地址参数 查询参数</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>声明一个list数据进行接受list-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data () &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">list</span>: []</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>初始化后获取右侧表格数据-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">getDepartment</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// 递归方法 将列表转化成树形</span></span><br><span class="line">      <span class="comment">// let result = await getDepartment()</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">depts</span> = <span class="title function_">transListToTreeData</span>(<span class="keyword">await</span> <span class="title function_">getDepartment</span>(), <span class="number">0</span>)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">queryParams</span>.<span class="property">departmentId</span> = <span class="variable language_">this</span>.<span class="property">depts</span>[<span class="number">0</span>].<span class="property">id</span></span><br><span class="line">      <span class="comment">// 设置选中节点</span></span><br><span class="line">      <span class="comment">// 树组件渲染是异步的 等到更新完毕</span></span><br><span class="line">      <span class="variable language_">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 此时意味着树渲染完毕</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">deptTree</span>.<span class="title function_">setCurrentKey</span>(<span class="variable language_">this</span>.<span class="property">queryParams</span>.<span class="property">departmentId</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="comment">// 这个时候参数 记录了id</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">getEmployeeList</span>()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 获取员工列表的方法</span></span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">getEmployeeList</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; rows &#125; = <span class="keyword">await</span> <span class="title function_">getEmployeeList</span>(<span class="variable language_">this</span>.<span class="property">queryParams</span>)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">list</span> = rows</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>切换节点时，获取右侧表格数据-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">selectNode</span>(<span class="params">node</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">queryParams</span>.<span class="property">departmentId</span> = node.<span class="property">id</span> <span class="comment">// 重新记录了参数</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">getEmployeeList</span>()</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<ul>
<li>绑定表格-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;staffPhoto&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">label</span>=<span class="string">&quot;头像&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;mobile&quot;</span> <span class="attr">label</span>=<span class="string">&quot;手机号&quot;</span> <span class="attr">sortable</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;workNumber&quot;</span> <span class="attr">label</span>=<span class="string">&quot;工号&quot;</span> <span class="attr">sortable</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;formOfEmployment&quot;</span> <span class="attr">label</span>=<span class="string">&quot;聘用形式&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;departmentName&quot;</span> <span class="attr">label</span>=<span class="string">&quot;部门&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;timeOfEntry&quot;</span> <span class="attr">label</span>=<span class="string">&quot;入职时间&quot;</span> <span class="attr">sortable</span> /&gt;</span></span><br><span class="line">          ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="6-头像和聘用形式的处理"><a href="#6-头像和聘用形式的处理" class="headerlink" title="6.头像和聘用形式的处理"></a>6.头像和聘用形式的处理</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022018468.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022018322.png" alt="image.png"> </p>
<ul>
<li>头像的设置-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;staffPhoto&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">label</span>=<span class="string">&quot;头像&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;&#123; row &#125;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-avatar</span> <span class="attr">v-if</span>=<span class="string">&quot;row.staffPhoto&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;row.staffPhoto&quot;</span> <span class="attr">:size</span>=<span class="string">&quot;30&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-else</span> <span class="attr">class</span>=<span class="string">&quot;username&quot;</span>&gt;</span>&#123;&#123; row.username?.charAt(0) &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>聘用形式的处理-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;formOfEmployment&quot;</span> <span class="attr">label</span>=<span class="string">&quot;聘用形式&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;&#123; row &#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-if</span>=<span class="string">&quot;row.formOfEmployment === 1&quot;</span>&gt;</span>正式<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-else-if</span>=<span class="string">&quot;row.formOfEmployment === 2&quot;</span>&gt;</span>非正式<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-else</span>&gt;</span>无<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="7-员工分页处理"><a href="#7-员工分页处理" class="headerlink" title="7.员工分页处理"></a>7.员工分页处理</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022019138.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022018888.png" alt="image.png"></p>
<ul>
<li>定义分页参数-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">data () &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">queryParams</span>: &#123;</span><br><span class="line">        <span class="attr">departmentId</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">page</span>: <span class="number">1</span>, <span class="comment">// 当前页码</span></span><br><span class="line">        <span class="attr">pagesize</span>: <span class="number">10</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">total</span>: <span class="number">0</span>, <span class="comment">// 记录员工的总数</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>绑定分页参数-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">            <span class="attr">layout</span>=<span class="string">&quot;total,prev, pager, next&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:current-page</span>=<span class="string">&quot;queryParams.page&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:page-size</span>=<span class="string">&quot;queryParams.pagesize&quot;</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">current-change</span>=<span class="string">&quot;changePage&quot;</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>切换页码事件-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 切换页码</span></span><br><span class="line">    <span class="title function_">changePage</span>(<span class="params">newPage</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">queryParams</span>.<span class="property">page</span> = newPage <span class="comment">// 赋值新页码</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">getEmployeeList</span>() <span class="comment">// 查询数据</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>切换部门时，查询第一页数据-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">selectNode</span>(<span class="params">node</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">queryParams</span>.<span class="property">departmentId</span> = node.<span class="property">id</span> <span class="comment">// 重新记录了参数</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">queryParams</span>.<span class="property">page</span> = <span class="number">1</span> <span class="comment">// 设置第一页</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">getEmployeeList</span>()</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<ul>
<li>设置ElementUI的语言为中文-代码位置(<strong>src/main.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">ElementUI</span>)</span><br></pre></td></tr></table></figure>
<h2 id="8-员工模糊搜索"><a href="#8-员工模糊搜索" class="headerlink" title="8.员工模糊搜索"></a>8.员工模糊搜索</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022019637.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022046423.png" alt="image.png"> </p>
<ul>
<li>设置模糊搜索的参数字段-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">data () &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">queryParams</span>: &#123;</span><br><span class="line">        <span class="attr">departmentId</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">page</span>: <span class="number">1</span>, <span class="comment">// 当前页码</span></span><br><span class="line">        <span class="attr">pagesize</span>: <span class="number">10</span>,</span><br><span class="line">        <span class="attr">keyword</span>: <span class="string">&#x27;&#x27;</span> <span class="comment">// 模糊搜索字段</span></span><br><span class="line">      &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>双向绑定input输入框，监听值改变事件-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-input</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-model</span>=<span class="string">&quot;queryParams.keyword&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">style</span>=<span class="string">&quot;margin-bottom:10px&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">prefix-icon</span>=<span class="string">&quot;el-icon-search&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">size</span>=<span class="string">&quot;small&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">placeholder</span>=<span class="string">&quot;输入员工姓名全员搜索&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">input</span>=<span class="string">&quot;changeValue&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>这里监听的事件是input，有同学可能会问，为什么不用change事件，注意change事件是离开焦点触发，input是只要内容发生变化就会触发，所以这里使用input更符合使用场景</p>
</blockquote>
<ul>
<li>值改变查询数据-支持防抖查询-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> <span class="title function_">changeValue</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// 单位时间内只执行最后一次</span></span><br><span class="line">      <span class="comment">// this的实例上赋值了一个timer的属性</span></span><br><span class="line">      <span class="built_in">clearTimeout</span>(<span class="variable language_">this</span>.<span class="property">timer</span>) <span class="comment">// 清理上一次的定时器</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">timer</span> = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">queryParams</span>.<span class="property">page</span> = <span class="number">1</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">getEmployeeList</span>()</span><br><span class="line">      &#125;, <span class="number">300</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="9-导出excel"><a href="#9-导出excel" class="headerlink" title="9.导出excel"></a>9.导出excel</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022019872.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022046324.png" alt="image.png"></p>
<ul>
<li>导出员工接口返回的是二进制流</li>
<li>axios配置responseType为blob接收二进制流文件为Blob格式</li>
<li><p>安装file-saver包，实现下载Blob文件  yarn add file-saver</p>
</li>
<li><p>封装导出员工excel的API-代码位置(<strong>src/api/employee.js</strong>)</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 导出员工的excel</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">exportEmployee</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/sys/user/export&#x27;</span>,</span><br><span class="line">    <span class="comment">// 改变接收数据的类型</span></span><br><span class="line">    <span class="attr">responseType</span>: <span class="string">&#x27;blob&#x27;</span> <span class="comment">// 使用blob接收二进制文件流</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>拦截器判断是不是blob类型，如果是直接返回数据，不再进行解构-代码位置(<strong>src/utils/request.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 响应拦截器</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// axios默认包裹了data</span></span><br><span class="line">  <span class="comment">// 判断是不是Blob</span></span><br><span class="line">  <span class="keyword">if</span> (response.<span class="property">data</span> <span class="keyword">instanceof</span> <span class="title class_">Blob</span>) <span class="keyword">return</span> response.<span class="property">data</span> <span class="comment">// 返回了Blob对象</span></span><br><span class="line">  <span class="keyword">const</span> &#123; data, message, success &#125; = response.<span class="property">data</span> <span class="comment">// 默认json格式</span></span><br><span class="line">  <span class="keyword">if</span> (success) &#123;</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title class_">Message</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>, message &#125;)</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(message))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<ul>
<li>安装file-saver</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm i file-saver</span><br><span class="line">$ yarn add file-saver</span><br></pre></td></tr></table></figure>
<ul>
<li>点击按钮调用接口，使用file-saver将blob转化成文件下载-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button size=<span class="string">&quot;mini&quot;</span> @click=<span class="string">&quot;exportEmployee&quot;</span>&gt;excel导出&lt;/el-button&gt;</span><br><span class="line"> <span class="keyword">import</span> <span class="title class_">FileSaver</span> <span class="keyword">from</span> <span class="string">&#x27;file-saver&#x27;</span></span><br><span class="line"> <span class="keyword">import</span> &#123; exportEmployee &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/employee&#x27;</span></span><br><span class="line">  <span class="keyword">async</span>  <span class="title function_">exportEmployee</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title function_">exportEmployee</span>() <span class="comment">// 导出所有的员工接口</span></span><br><span class="line">      <span class="comment">// console.log(result) // 使用一个npm包 直接将blob文件下载到本地 file-saver</span></span><br><span class="line">      <span class="comment">// FileSaver.saveAs(blob对象,文件名称)</span></span><br><span class="line">      <span class="title class_">FileSaver</span>.<span class="title function_">saveAs</span>(result, <span class="string">&#x27;员工信息表.xlsx&#x27;</span>) <span class="comment">// 下载文件</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h2 id="10-excel组件封装"><a href="#10-excel组件封装" class="headerlink" title="10.excel组件封装"></a>10.excel组件封装</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022019604.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022019648.png" alt="image.png"></p>
<ul>
<li>创建员工导入组件-代码位置(<strong>src/views/employee/components/import-excel.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-dialog</span></span></span><br><span class="line"><span class="tag">    <span class="attr">width</span>=<span class="string">&quot;500px&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">title</span>=<span class="string">&quot;员工导入&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:visible</span>=<span class="string">&quot;showExcelDialog&quot;</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">close</span>=<span class="string">&quot;$emit(&#x27;update:showExcelDialog&#x27;, false)&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">type</span>=<span class="string">&quot;flex&quot;</span> <span class="attr">justify</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;upload-excel&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">          <span class="attr">ref</span>=<span class="string">&quot;excel-upload-input&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;excel-upload-input&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">type</span>=<span class="string">&quot;file&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">accept</span>=<span class="string">&quot;.xlsx, .xls&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;drop&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-upload&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span>下载导入模板<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>将文件拖到此处或</span><br><span class="line">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span>点击上传<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">type</span>=<span class="string">&quot;flex&quot;</span> <span class="attr">justify</span>=<span class="string">&quot;end&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- update:props属性名，值 直接修改 .sync修饰符的属性值 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;$emit(&#x27;update:showExcelDialog&#x27;, false)&quot;</span>&gt;</span>取消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">showExcelDialog</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="title class_">Boolean</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">default</span>: <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.upload-excel</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">360px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">180px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">color</span>: <span class="number">#697086</span>;</span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.excel-upload-input</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">z-index</span>: -<span class="number">9999</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.btn-upload</span>,</span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.drop</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">1px</span> dashed <span class="number">#dcdfe6</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">line-height</span>: <span class="number">160px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.drop</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">line-height</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#bbb</span>;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">i</span> &#123;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">font-size</span>: <span class="number">60px</span>;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">color</span>: <span class="number">#c0c4cc</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>在员工管理页面-导入该组件并注册使用-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">ImportExcel</span> <span class="keyword">from</span> <span class="string">&#x27;./components/import-excel.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="title class_">ImportExcel</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>声明一个控制该弹层的变量-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data () &#123;</span><br><span class="line">  <span class="keyword">return</span>  &#123;</span><br><span class="line">      <span class="attr">showExcelDialog</span>: <span class="literal">false</span> <span class="comment">// 控制excel的弹层显示和隐藏</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>使用该组件，并且应用变量-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">import-excel</span> <span class="attr">:show-excel-dialog.sync</span>=<span class="string">&quot;showExcelDialog&quot;</span> /&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>点击员工导入弹出层-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;showExcelDialog = true&quot;</span>&gt;</span>excel导入<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="11-下载导入模板"><a href="#11-下载导入模板" class="headerlink" title="11.下载导入模板"></a>11.下载导入模板</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022019133.png" alt="image.png"> </p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022020868.png" alt="image.png"></p>
<ul>
<li>封装下载模板的API-代码位置(<strong>src/api/employee.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 下载员工导入模版</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getExportTemplate</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/sys/user/import/template&#x27;</span>,</span><br><span class="line">    <span class="attr">responseType</span>: <span class="string">&#x27;blob&#x27;</span> <span class="comment">// 二进制文件流</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>点击按钮进行下载模板-代码位置(<strong>src/views/employee/components/import-excel.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button type=<span class="string">&quot;text&quot;</span> @click=<span class="string">&quot;getTemplate&quot;</span>&gt;下载导入模板&lt;/el-button&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="title function_">getTemplate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">await</span> <span class="title function_">getExportTemplate</span>()</span><br><span class="line">    <span class="title class_">FileSaver</span>.<span class="title function_">saveAs</span>(data, <span class="string">&#x27;员工导入模版.xlsx&#x27;</span>)</span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="12-员工导入—上传excel"><a href="#12-员工导入—上传excel" class="headerlink" title="12.员工导入—上传excel"></a>12.员工导入—上传excel</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022020961.png" alt="image.png"> </p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022020439.png" alt="image.png"></p>
<ul>
<li>封装上传excel的API-代码位置(<strong>src/api/employee.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 上传用户的excel</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">uploadExcel</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/sys/user/import&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    data <span class="comment">// form-data类型 因为要上传文件类型</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>点击上传-弹出文件选择框-代码位置(<strong>src/views/employee/components/import-excel.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button type=<span class="string">&quot;text&quot;</span> @click=<span class="string">&quot;handleUpload&quot;</span>&gt;点击上传&lt;/el-button&gt;</span><br><span class="line"><span class="title function_">handleUpload</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>[<span class="string">&#x27;excel-upload-input&#x27;</span>].<span class="title function_">click</span>() <span class="comment">// this.$refs.属性名 和 this.$refs[属性名] 等价</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<ul>
<li>监听文件改变-上传excel-关闭弹层-代码位置(<strong>src/views/employee/components/import-excel.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"> &lt;input</span><br><span class="line">          ref=<span class="string">&quot;excel-upload-input&quot;</span></span><br><span class="line">          <span class="keyword">class</span>=<span class="string">&quot;excel-upload-input&quot;</span></span><br><span class="line">          type=<span class="string">&quot;file&quot;</span></span><br><span class="line">          accept=<span class="string">&quot;.xlsx, .xls&quot;</span></span><br><span class="line">          @change=<span class="string">&quot;uploadChange&quot;</span></span><br><span class="line">  &gt;</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">uploadChange</span>(<span class="params">event</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">target</span>.<span class="property">files</span>)</span><br><span class="line">      <span class="comment">// 调用上传接口</span></span><br><span class="line">      <span class="comment">// uploadExcel() // 参数  form-data 需要文件file</span></span><br><span class="line">      <span class="keyword">const</span> files = event.<span class="property">target</span>.<span class="property">files</span> <span class="comment">// input的文件列表</span></span><br><span class="line">      <span class="keyword">if</span> (files.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// 大于0 说明有文件要上传</span></span><br><span class="line">        <span class="keyword">const</span> data = <span class="keyword">new</span> <span class="title class_">FormData</span>()</span><br><span class="line">        <span class="comment">// file: file类型</span></span><br><span class="line">        data.<span class="title function_">append</span>(<span class="string">&#x27;file&#x27;</span>, files[<span class="number">0</span>]) <span class="comment">// 将文件参数加入到formData中</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="keyword">await</span> <span class="title function_">uploadExcel</span>(data)</span><br><span class="line">          <span class="comment">// 成功</span></span><br><span class="line">          <span class="variable language_">this</span>.$emit(<span class="string">&#x27;uploadSuccess&#x27;</span>) <span class="comment">// 通知父组件 我上传成功</span></span><br><span class="line">          <span class="variable language_">this</span>.$emit(<span class="string">&#x27;update:showExcelDialog&#x27;</span>, <span class="literal">false</span>) <span class="comment">// 关闭弹层</span></span><br><span class="line">          <span class="comment">// this.$refs[&#x27;excel-upload-input&#x27;].value = &#x27;&#x27;</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">          <span class="comment">// 捕获失败</span></span><br><span class="line">          <span class="comment">// this.$refs[&#x27;excel-upload-input&#x27;].value = &#x27;&#x27;</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">          <span class="comment">// 不论成功或者失败都会执行finally</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">$refs</span>[<span class="string">&#x27;excel-upload-input&#x27;</span>].<span class="property">value</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这里为什么不管成功或者失败都要清空文件选择器中的内容呢？ 因为不论成功或者失败，再点击上传都会去选择一个新的excel，所以这里使用finally等到最后，将内容清空。</p>
</blockquote>
<ul>
<li>父组件需要监听上传成功的事件-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">import-excel</span> <span class="attr">:show-excel-dialog.sync</span>=<span class="string">&quot;showExcelDialog&quot;</span> @<span class="attr">uploadSuccess</span>=<span class="string">&quot;getEmployeeList&quot;</span> /&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="13-删除员工"><a href="#13-删除员工" class="headerlink" title="13.删除员工"></a>13.删除员工</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022020622.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022020259.png" alt="image.png"></p>
<ul>
<li>封装删除员工的API-代码位置(<strong>src/api/employee.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 删除员工</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">delEmployee</span>(<span class="params">id</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;delete&#x27;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/user/<span class="subst">$&#123;id&#125;</span>`</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>放置气泡框确认框-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-popconfirm</span> <span class="attr">title</span>=<span class="string">&quot;确认删除该行数据吗？&quot;</span>  @<span class="attr">onConfirm</span>=<span class="string">&quot;confirmDel(row.id)&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">slot</span>=<span class="string">&quot;reference&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-left:10px&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-popconfirm</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>删除方法实现-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 删除员工方法</span></span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">confirmDel</span>(<span class="params">id</span>) &#123;</span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">delEmployee</span>(id)</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">list</span>.<span class="property">length</span> === <span class="number">1</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">queryParams</span>.<span class="property">page</span> &gt; <span class="number">1</span>) <span class="variable language_">this</span>.<span class="property">queryParams</span>.<span class="property">page</span>--</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">getEmployeeList</span>()</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;删除员工成功&#x27;</span>)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h1 id="七、员工详情"><a href="#七、员工详情" class="headerlink" title="七、员工详情"></a>七、员工详情</h1><h2 id="1-员工详情和路由"><a href="#1-员工详情和路由" class="headerlink" title="1.员工详情和路由"></a>1.员工详情和路由</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022020048.png" alt="image.png"> </p>
<ul>
<li>(拷贝)创建一个员工详情页面-代码位置(<strong>src/views/employee/detail.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dashboard-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app-container&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;edit-form&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">ref</span>=<span class="string">&quot;userForm&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;220px&quot;</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 姓名 部门 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-row</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">class</span>=<span class="string">&quot;inputW&quot;</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line"></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 工号 入职时间 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-row</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;工号&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;workNumber&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">class</span>=<span class="string">&quot;inputW&quot;</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!--手机 聘用形式  --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-row</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;手机&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;mobile&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">class</span>=<span class="string">&quot;inputW&quot;</span></span></span><br><span class="line"><span class="tag">                /&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-row</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;部门&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;departmentId&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 放置及联部门组件 --&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-row</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;聘用形式&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;formOfEmployment&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-select</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">class</span>=<span class="string">&quot;inputW&quot;</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-row</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;入职时间&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;timeOfEntry&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-date-picker</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">type</span>=<span class="string">&quot;date&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">value-format</span>=<span class="string">&quot;yyyy-MM-dd&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">class</span>=<span class="string">&quot;inputW&quot;</span></span></span><br><span class="line"><span class="tag">                /&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-row</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;转正时间&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-date-picker</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">type</span>=<span class="string">&quot;date&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">class</span>=<span class="string">&quot;inputW&quot;</span></span></span><br><span class="line"><span class="tag">                /&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 员工照片 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-row</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;员工头像&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 放置上传图片 --&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 保存个人信息 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">type</span>=<span class="string">&quot;flex&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-left:220px&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>保存更新<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.edit-form</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.inputW</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">380px</span></span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>配置员工详情的路由信息-代码位置(<strong>src/router/modules/employee.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> layout <span class="keyword">from</span> <span class="string">&#x27;@/layout&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/employee&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: layout,</span><br><span class="line">  <span class="attr">children</span>: [&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;employee&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/employee&#x27;</span>),</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;员工&#x27;</span>,</span><br><span class="line">      <span class="attr">icon</span>: <span class="string">&#x27;people&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/employee/detail&#x27;</span>, <span class="comment">// 员工详情的地址</span></span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/employee/detail.vue&#x27;</span>),</span><br><span class="line">    <span class="attr">hidden</span>: <span class="literal">true</span>, <span class="comment">// 表示隐藏在左侧菜单</span></span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;员工详情&#x27;</span> <span class="comment">// 显示在导航的文本</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>点击添加员工跳转到详情页-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;$router.push(&#x27;/employee/detail&#x27;)&quot;</span>&gt;</span>添加员工<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="2-表单数据校验"><a href="#2-表单数据校验" class="headerlink" title="2.表单数据校验"></a>2.表单数据校验</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022021862.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022021792.png" alt="image.png"> </p>
<blockquote>
<p>表单校验规则</p>
</blockquote>
<ul>
<li>姓名-必填-1-4个字符</li>
<li>手机号-必填-格式校验</li>
<li>部门-必填</li>
<li>聘用形式-必填</li>
<li>入职时间-必填</li>
<li><p>转正时间-必填-不能小于入职时间</p>
</li>
<li><p>定义数据和规则-代码位置(<strong>src/views/employee/detail.vue</strong>)</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      userInfo: &#123;</span><br><span class="line">        username: &#x27;&#x27;, // 用户名</span><br><span class="line">        mobile: &#x27;&#x27;, // 手机号</span><br><span class="line">        workNumber: &#x27;&#x27;, // 工号</span><br><span class="line">        formOfEmployment: null, // 聘用形式</span><br><span class="line">        departmentId: null, // 部门id</span><br><span class="line">        timeOfEntry: &#x27;&#x27;, // 入职时间</span><br><span class="line">        correctionTime: &#x27;&#x27; // 转正时间</span><br><span class="line">      &#125;,</span><br><span class="line">      rules: &#123;</span><br><span class="line">        username: [&#123; required: true, message: &#x27;请输入姓名&#x27;, trigger: &#x27;blur&#x27; &#125;, &#123;</span><br><span class="line">          min: 1, max: 4, message: &#x27;姓名为1-4位&#x27;</span><br><span class="line">        &#125;],</span><br><span class="line">        mobile: [&#123; required: true, message: &#x27;请输入手机号&#x27;, trigger: &#x27;blur&#x27; &#125;, &#123;</span><br><span class="line">        //   pattern 正则表达式</span><br><span class="line">          pattern: /^1[3-9]\d&#123;9&#125;$/,</span><br><span class="line">          message: &#x27;手机号格式不正确&#x27;,</span><br><span class="line">          trigger: &#x27;blur&#x27;</span><br><span class="line">        &#125;],</span><br><span class="line">        formOfEmployment: [&#123; required: true, message: &#x27;请选择聘用形式&#x27;, trigger: &#x27;blur&#x27; &#125;],</span><br><span class="line">        departmentId: [&#123; required: true, message: &#x27;请选择部门&#x27;, trigger: &#x27;blur&#x27; &#125;],</span><br><span class="line">        timeOfEntry: [&#123; required: true, message: &#x27;请选择入职时间&#x27;, trigger: &#x27;blur&#x27; &#125;],</span><br><span class="line">        correctionTime: [&#123; required: true, message: &#x27;请选择转正时间&#x27;, trigger: &#x27;blur&#x27; &#125;, &#123;</span><br><span class="line">          validator: (rule, value, callback) =&gt; &#123;</span><br><span class="line">            if (this.userInfo.timeOfEntry) &#123;</span><br><span class="line">              if (new Date(this.userInfo.timeOfEntry) &gt; new Date(value)) &#123;</span><br><span class="line">                callback(new Error(&#x27;转正时间不能小于入职时间&#x27;))</span><br><span class="line">                return</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            callback()</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;]</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    saveData() &#123;</span><br><span class="line">      this.$refs.userForm.validate()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>绑定表单数据和属性-代码位置(<strong>src/views/employee/detail.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-form</span> <span class="attr">ref</span>=<span class="string">&quot;userForm&quot;</span> <span class="attr">:model</span>=<span class="string">&quot;userInfo&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;220px&quot;</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!-- 姓名 --&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-row</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.username&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">class</span>=<span class="string">&quot;inputW&quot;</span> /&gt;</span></span><br><span class="line">             <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line"></span><br><span class="line">         <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!-- 工号 --&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-row</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;工号&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;workNumber&quot;</span>&gt;</span></span><br><span class="line">               <span class="comment">&lt;!-- 工号是系统生成的  禁用这个组件--&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.workNumber&quot;</span> <span class="attr">disabled</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">class</span>=<span class="string">&quot;inputW&quot;</span> /&gt;</span></span><br><span class="line">             <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!--手机  --&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-row</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;手机&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;mobile&quot;</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">el-input</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">v-model</span>=<span class="string">&quot;userInfo.mobile&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">class</span>=<span class="string">&quot;inputW&quot;</span></span></span><br><span class="line"><span class="tag">               /&gt;</span></span><br><span class="line">             <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-row</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;部门&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;departmentId&quot;</span>&gt;</span></span><br><span class="line">               <span class="comment">&lt;!-- 放置及联部门组件 会单独封装--&gt;</span></span><br><span class="line">             <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-row</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;聘用形式&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;formOfEmployment&quot;</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">el-select</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.formOfEmployment&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">class</span>=<span class="string">&quot;inputW&quot;</span>&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">label</span>=<span class="string">&quot;正式&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">label</span>=<span class="string">&quot;非正式&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;2&quot;</span> /&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-row</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;入职时间&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;timeOfEntry&quot;</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">el-date-picker</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">v-model</span>=<span class="string">&quot;userInfo.timeOfEntry&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">type</span>=<span class="string">&quot;date&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">value-format</span>=<span class="string">&quot;yyyy-MM-dd&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">class</span>=<span class="string">&quot;inputW&quot;</span></span></span><br><span class="line"><span class="tag">               /&gt;</span></span><br><span class="line">             <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-row</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;转正时间&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;correctionTime&quot;</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">el-date-picker</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">v-model</span>=<span class="string">&quot;userInfo.correctionTime&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">type</span>=<span class="string">&quot;date&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">class</span>=<span class="string">&quot;inputW&quot;</span></span></span><br><span class="line"><span class="tag">               /&gt;</span></span><br><span class="line">             <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!-- 员工照片 --&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-row</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;员工头像&quot;</span>&gt;</span></span><br><span class="line">               <span class="comment">&lt;!-- 放置上传图片 --&gt;</span></span><br><span class="line">             <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!-- 保存个人信息 --&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">type</span>=<span class="string">&quot;flex&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-left:220px&quot;</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;saveData&quot;</span>&gt;</span>保存更新<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="3-封装部门级联组件"><a href="#3-封装部门级联组件" class="headerlink" title="3.封装部门级联组件"></a>3.封装部门级联组件</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022021153.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022021084.png" alt="image.png"> </p>
<p>Cascader级联组件的特性</p>
<ol>
<li>options为一个树形结构的数据源</li>
<li>props可以设置数据源中的字段如 label (展示)  value（存取）</li>
<li>separator为展示的分隔符</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022022395.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022047362.png" alt="image.png"></p>
<ul>
<li>创建select-tree组件-代码位置(<strong>src/views/employee/components/select-tree.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- element-ui级联组件 --&gt;</span><br><span class="line">  &lt;el-cascader</span><br><span class="line">    size=&quot;mini&quot;</span><br><span class="line">    :options=&quot;treeData&quot;</span><br><span class="line">    :props=&quot;props&quot;</span><br><span class="line">    separator=&quot;-&quot;</span><br><span class="line">  /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; getDepartment &#125; from &#x27;@/api/department&#x27;</span><br><span class="line">import &#123; transListToTreeData &#125; from &#x27;@/utils&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      treeData: [], // 赋值给 级联组件的options</span><br><span class="line">      props: &#123;</span><br><span class="line">        label: &#x27;name&#x27;, // 要展示的字段</span><br><span class="line">        value: &#x27;id&#x27; // 要存储的字段</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getDepartment()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    async getDepartment() &#123;</span><br><span class="line">      this.treeData = transListToTreeData(await getDepartment(), 0) // 将组织架构的数据 转化树形赋值给treeData</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>解决转化树形中的问题-代码位置(<strong>src/utils/index.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 列表型数据转化树形</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">transListToTreeData</span>(<span class="params">list, rootValue</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> arr = []</span><br><span class="line">  list.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (item.<span class="property">pid</span> === rootValue) &#123;</span><br><span class="line">      <span class="comment">// 找到了匹配的节点</span></span><br><span class="line">      arr.<span class="title function_">push</span>(item)</span><br><span class="line">      <span class="comment">// 当前节点的id 和 当前节点的子节点的pid是想等的</span></span><br><span class="line">      <span class="keyword">const</span> children = <span class="title function_">transListToTreeData</span>(list, item.<span class="property">id</span>) <span class="comment">// 找到的节点的子节点</span></span><br><span class="line">      <span class="keyword">if</span> (children.<span class="property">length</span>) &#123; item.<span class="property">children</span> = children &#125; <span class="comment">// 将子节点赋值给当前节点</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这里我们加了一个判断，就是只有当前节点有子节点时才添加children属性，否则会造成级联组件本身就已经是最末端了，但是发现它的children属性存在，就会呈现不同的表现形式。</p>
</blockquote>
<ul>
<li>使用select-tree组件-代码位置(<strong>src/views/employee/detail.vue</strong>)</li>
</ul>
<blockquote>
<p>不要忘记引入注册</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;部门&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;departmentId&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 放置及联部门组件 会单独封装--&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- inputW样式会给到selectTree中 template第一层的组件 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">select-tree</span> <span class="attr">class</span>=<span class="string">&quot;inputW&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="4-级联组件—双向绑定"><a href="#4-级联组件—双向绑定" class="headerlink" title="4.级联组件—双向绑定"></a>4.级联组件—双向绑定</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022022991.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022022652.png" alt="image.png"></p>
<ul>
<li>接收value属性-代码位置(<strong>src/views/employee/components/select-tree.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    value: &#123;</span><br><span class="line">      type: Number, // 存储的是部门的id  3 4 5</span><br><span class="line">      default: null</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>级联改变触发input事件-代码位置(<strong>src/views/employee/components/select-tree.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> &lt;el-cascader</span><br><span class="line">    :value=<span class="string">&quot;value&quot;</span></span><br><span class="line">    size=<span class="string">&quot;mini&quot;</span></span><br><span class="line">    :options=<span class="string">&quot;treeData&quot;</span></span><br><span class="line">    :props=<span class="string">&quot;props&quot;</span></span><br><span class="line">    separator=<span class="string">&quot;-&quot;</span></span><br><span class="line">    @change=<span class="string">&quot;changeValue&quot;</span></span><br><span class="line">  /&gt;</span><br><span class="line"></span><br><span class="line"> <span class="title function_">changeValue</span>(<span class="params">list</span>) &#123;</span><br><span class="line">      <span class="comment">// 取到数组的最后一次</span></span><br><span class="line">      <span class="keyword">if</span> (list.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.$emit(<span class="string">&#x27;input&#x27;</span>, list[list.<span class="property">length</span> - <span class="number">1</span>]) <span class="comment">// 将最后一位的id取出来 传出去</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.$emit(<span class="string">&#x27;input&#x27;</span>, <span class="literal">null</span>) <span class="comment">// 如果长度为0 说明值为空</span></span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>在父组件使用v-model双向绑定-代码位置(<strong>src/views/employee/detail.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select-tree</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.departmentId&quot;</span> <span class="attr">class</span>=<span class="string">&quot;inputW&quot;</span> /&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="5-新增员工"><a href="#5-新增员工" class="headerlink" title="5.新增员工"></a>5.新增员工</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022022757.png" alt="image.png"></p>
<ul>
<li>封装新增员工API-代码位置(<strong>src/api/employee.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">addEmployee</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/sys/user&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    data</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>点击保存按钮进行新增-代码位置(<strong>src/views/employee/detail.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> <span class="title function_">saveData</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">userForm</span>.<span class="title function_">validate</span>(<span class="keyword">async</span> isOK =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (isOK) &#123;</span><br><span class="line">          <span class="comment">// 校验通过</span></span><br><span class="line">          <span class="keyword">await</span> <span class="title function_">addEmployee</span>(<span class="variable language_">this</span>.<span class="property">userInfo</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;新增员工成功&#x27;</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&#x27;/employee&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6-编辑员工—查看员工"><a href="#6-编辑员工—查看员工" class="headerlink" title="6.编辑员工—查看员工"></a>6.编辑员工—查看员工</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022022845.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022048161.png" alt="image.png"></p>
<ul>
<li>封装获取员工详情的API-代码位置(<strong>src/api/employee.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  获取员工详情</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getEmployeeDetail</span>(<span class="params">id</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/user/<span class="subst">$&#123;id&#125;</span>`</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>点击查看时跳转到详情携带id-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;$router.push(`/employee/detail/$&#123;row.id&#125;`)&quot;</span>&gt;</span>查看<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>配置详情的路由支持新增模式和编辑模式-代码位置(<strong>src/router/modules/employee.js</strong>)</li>
</ul>
<blockquote>
<p>? 标识可有可无，可以传id也可以选择不传，页面都能正确显示</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/employee&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: layout,</span><br><span class="line">  <span class="attr">children</span>: [&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;employee&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/employee&#x27;</span>),</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;员工&#x27;</span>,</span><br><span class="line">      <span class="attr">icon</span>: <span class="string">&#x27;people&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/employee/detail/:id?&#x27;</span>, <span class="comment">// 员工详情的地址</span></span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/employee/detail.vue&#x27;</span>),</span><br><span class="line">    <span class="attr">hidden</span>: <span class="literal">true</span>, <span class="comment">// 表示隐藏在左侧菜单</span></span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;员工详情&#x27;</span> <span class="comment">// 显示在导航的文本</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>员工详情页判断是否有id，有id就查询详情数据-代码位置(<strong>src/views/employee/detail.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="comment">// 如何获取路由参数的中id</span></span><br><span class="line">   <span class="comment">// if (this.$route.params.id) &#123; this.getEmployeeDetail() &#125;</span></span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">params</span>.<span class="property">id</span> &amp;&amp; <span class="variable language_">this</span>.<span class="title function_">getEmployeeDetail</span>()</span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="attr">methods</span>: &#123;</span><br><span class="line">   <span class="keyword">async</span> <span class="title function_">getEmployeeDetail</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">userInfo</span> = <span class="keyword">await</span> <span class="title function_">getEmployeeDetail</span>(<span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">params</span>.<span class="property">id</span>)</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h2 id="7-编辑员工—保存"><a href="#7-编辑员工—保存" class="headerlink" title="7.编辑员工—保存"></a>7.编辑员工—保存</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022022589.png" alt="image.png"></p>
<ul>
<li>封装更新员工的API-代码位置(<strong>src/api/employee.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">updateEmployee</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/user/<span class="subst">$&#123;data.id&#125;</span>`</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;put&#x27;</span>,</span><br><span class="line">    data</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>保存时区分保存和新增场景-代码位置(<strong>src/views/employee/detail.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">saveData</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">userForm</span>.<span class="title function_">validate</span>(<span class="keyword">async</span> isOK =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (isOK) &#123;</span><br><span class="line">        <span class="comment">// 编辑模式</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">params</span>.<span class="property">id</span>) &#123;</span><br><span class="line">          <span class="comment">// 编辑模式</span></span><br><span class="line">          <span class="keyword">await</span> <span class="title function_">updateEmployee</span>(<span class="variable language_">this</span>.<span class="property">userInfo</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;更新员工成功&#x27;</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">// 新增模式</span></span><br><span class="line">          <span class="comment">// 校验通过</span></span><br><span class="line">          <span class="keyword">await</span> <span class="title function_">addEmployee</span>(<span class="variable language_">this</span>.<span class="property">userInfo</span>)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;新增员工成功&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&#x27;/employee&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>在当编辑模式时，让手机号不可编辑-代码位置(<strong>src/views/employee/detail.vue</strong>)</li>
</ul>
<blockquote>
<p>因为新增时手机号已经注册成功，手机号如果修改了，用户就不能再成功登录。所以编辑时，用户的手机号允许修改。</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-input</span></span></span><br><span class="line"><span class="tag">       <span class="attr">v-model</span>=<span class="string">&quot;userInfo.mobile&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">:disabled</span>=<span class="string">&quot;!!$route.params.id&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">class</span>=<span class="string">&quot;inputW&quot;</span></span></span><br><span class="line"><span class="tag"> /&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="8-封装员工头像组件"><a href="#8-封装员工头像组件" class="headerlink" title="8.封装员工头像组件"></a>8.封装员工头像组件</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022023683.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022048657.png" alt="image.png"></p>
<ul>
<li>创建image-upload组件-代码位置(<strong>src/views/employee/components/image-upload.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-upload</span><br><span class="line">    class=&quot;avatar-uploader&quot;</span><br><span class="line">    action=&quot;&quot;</span><br><span class="line">    :show-file-list=&quot;false&quot;</span><br><span class="line">    :before-upload=&quot;beforeAvatarUpload&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;!-- (自动上传)action是上传地址 人资项目不需要 人资项目(手动上传)  --&gt;</span><br><span class="line">    &lt;!-- show-file-list不展示列表 --&gt;</span><br><span class="line">    &lt;img v-if=&quot;value&quot; :src=&quot;value&quot; class=&quot;avatar&quot;&gt;</span><br><span class="line">    &lt;i v-else class=&quot;el-icon-plus avatar-uploader-icon&quot; /&gt;</span><br><span class="line">  &lt;/el-upload&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    value: &#123;</span><br><span class="line">      type: String,</span><br><span class="line">      default: &#x27;&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    // 检查函数 判断文件的类型还有大小 return  true(继续上传)/false(停止上传)</span><br><span class="line">    beforeAvatarUpload(file) &#123;</span><br><span class="line">      // jpeg png gif bmp</span><br><span class="line"></span><br><span class="line">      const isJPG = [&#x27;image/jpeg&#x27;, &#x27;image/png&#x27;, &#x27;image/gif&#x27;, &#x27;image/bmp&#x27;].includes(file.type)</span><br><span class="line">      const isLt2M = file.size / 1024 / 1024 &lt; 5 // 5M</span><br><span class="line"></span><br><span class="line">      if (!isJPG) &#123;</span><br><span class="line">        this.$message.error(&#x27;上传头像图片只能是 JPG PNG GIF BMP 格式!&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">      if (!isLt2M) &#123;</span><br><span class="line">        this.$message.error(&#x27;上传头像图片大小不能超过 5MB!&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">      return isJPG &amp;&amp; isLt2M</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">  .avatar-uploader .el-upload &#123;</span><br><span class="line">    border: 1px dashed #d9d9d9;</span><br><span class="line">    border-radius: 6px;</span><br><span class="line">    cursor: pointer;</span><br><span class="line">    position: relative;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">  &#125;</span><br><span class="line">  .avatar-uploader .el-upload:hover &#123;</span><br><span class="line">    border-color: #409EFF;</span><br><span class="line">  &#125;</span><br><span class="line">  .avatar-uploader-icon &#123;</span><br><span class="line">    font-size: 28px;</span><br><span class="line">    color: #8c939d;</span><br><span class="line">    width: 178px;</span><br><span class="line">    height: 178px;</span><br><span class="line">    line-height: 178px;</span><br><span class="line">    text-align: center;</span><br><span class="line">  &#125;</span><br><span class="line">  .avatar &#123;</span><br><span class="line">    width: 178px;</span><br><span class="line">    height: 178px;</span><br><span class="line">    display: block;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>在父组件中应用-代码位置(<strong>src/views/employee/detail.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">image-upload</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.staffPhoto&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="9-上传图片—创建腾讯云存储桶"><a href="#9-上传图片—创建腾讯云存储桶" class="headerlink" title="9.上传图片—创建腾讯云存储桶"></a>9.上传图片—创建腾讯云存储桶</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022023116.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022023766.png" alt="image.png"><br>1.注册腾讯云账号-课前完成<a target="_blank" rel="noopener" href="https://cloud.tencent.com/login">https://cloud.tencent.com/login</a><br>2.创建腾讯云存储桶<br>3.得到应用密钥和应用标识</p>
<ul>
<li>创建存储桶</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022023380.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022023698.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022024594.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022024510.png" alt="image.png"> </p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022024274.png" alt="image.png"> </p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022024541.png" alt="image.png"></p>
<h3 id="9-1获取存储桶相关信息"><a href="#9-1获取存储桶相关信息" class="headerlink" title="9.1获取存储桶相关信息"></a>9.1获取存储桶相关信息</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022025344.png" alt="image.png"></p>
<blockquote>
<p>将存储桶和所属地域拷贝下来，备用</p>
</blockquote>
<ul>
<li>获取应用标识<a target="_blank" rel="noopener" href="https://console.cloud.tencent.com/cam/capi">https://console.cloud.tencent.com/cam/capi</a></li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022025737.png" alt="image.png"></p>
<blockquote>
<p>将SecretId和SecretKey拷贝下来，备用</p>
</blockquote>
<p><strong>存储桶名称</strong>：izdloyl-1325700039</p>
<p><strong>所属地域</strong>：ap-nanjing</p>
<p><strong>SecretId</strong>: AKIDKYdXHCxXyEJDxYzFLI5jDY1LUUL4d1Qg</p>
<p><strong>SecretKey</strong>: DGAuVwDKI6kpupaAf2LWaVIxWyIVbaQ9</p>
<h2 id="10-使用cos-sdk完成上传"><a href="#10-使用cos-sdk完成上传" class="headerlink" title="10.使用cos-sdk完成上传"></a>10.使用cos-sdk完成上传</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022025096.png" alt="image.png"></p>
<ul>
<li>安装腾讯云js-sdk</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ npm i cos-js-sdk-v5 </span><br><span class="line">$ yarn add  cos-js-sdk-v5</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>使用el-upload自定义上传-代码位置(<strong>src/views/employee/components/image-upload.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;avatar-uploader&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">action</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:show-file-list</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:before-upload</span>=<span class="string">&quot;beforeAvatarUpload&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:http-request</span>=<span class="string">&quot;uploadImage&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- (自动上传)action是上传地址 人资项目不需要 人资项目(手动上传)  --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- show-file-list不展示列表 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">v-if</span>=<span class="string">&quot;value&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;value&quot;</span> <span class="attr">class</span>=<span class="string">&quot;avatar&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">v-else</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-plus avatar-uploader-icon&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>实现上传方法-代码位置</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 选择图片上传</span></span><br><span class="line"><span class="title function_">uploadImage</span>(<span class="params">params</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(params.<span class="property">file</span>)</span><br><span class="line">  <span class="keyword">const</span> cos = <span class="keyword">new</span> <span class="title function_">COS</span>(&#123;</span><br><span class="line">    <span class="title class_">SecretId</span>: <span class="string">&#x27;AKIDDSdjgnjT1NZ3a7VjkfVIwOdfv9IH2b8e&#x27;</span>,</span><br><span class="line">    <span class="title class_">SecretKey</span>: <span class="string">&#x27;WEwe9WJ9vLeq1BHNLLKF5Up10ndUDk24&#x27;</span></span><br><span class="line">  &#125;) <span class="comment">// 完成cos对象的初始化</span></span><br><span class="line">  cos.<span class="title function_">putObject</span>(&#123;</span><br><span class="line">    <span class="title class_">Bucket</span>: <span class="string">&#x27;heimachengxuyuan-1302806742&#x27;</span>, <span class="comment">// 存储桶名称</span></span><br><span class="line">    <span class="title class_">Region</span>: <span class="string">&#x27;ap-nanjing&#x27;</span>, <span class="comment">// 地域名称</span></span><br><span class="line">    <span class="title class_">Key</span>: params.<span class="property">file</span>.<span class="property">name</span>, <span class="comment">// 文件名称</span></span><br><span class="line">    <span class="title class_">StorageClass</span>: <span class="string">&#x27;STANDARD&#x27;</span>, <span class="comment">// 固定值</span></span><br><span class="line">    <span class="title class_">Body</span>: params.<span class="property">file</span> <span class="comment">// 文件对象</span></span><br><span class="line">  &#125;, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (data.<span class="property">statusCode</span> === <span class="number">200</span> &amp;&amp; data.<span class="property">Location</span>) &#123;</span><br><span class="line">      <span class="comment">// 拿到了腾讯云返回的地址</span></span><br><span class="line">      <span class="comment">// 通过input自定义事件将地址传出去</span></span><br><span class="line">      <span class="variable language_">this</span>.$emit(<span class="string">&#x27;input&#x27;</span>, <span class="string">&#x27;http://&#x27;</span> + data.<span class="property">Location</span>) <span class="comment">// 将地址返回了</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(err.<span class="property">Message</span>) <span class="comment">// 上传失败提示消息</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这里需要使用 上个小节准备好的存储桶的名称-地域名称-应用标识-应用密钥</p>
</blockquote>
<p>这里需要知道Cos的初始化和上传的方法<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022025242.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022025086.png" alt="image.png"> </p>
<h1 id="八、权限管理"><a href="#八、权限管理" class="headerlink" title="八、权限管理"></a>八、权限管理</h1><h2 id="1-搭建权限页面"><a href="#1-搭建权限页面" class="headerlink" title="1. 搭建权限页面"></a>1. 搭建权限页面</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022025002.png" alt="image.png"></p>
<ul>
<li>实现权限管理的页面结构-代码位置(<strong>src/views/permission/index.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">      &lt;el-button class=&quot;btn-add&quot; size=&quot;mini&quot; type=&quot;primary&quot;&gt;添加权限&lt;/el-button&gt;</span><br><span class="line">      &lt;el-table&gt;</span><br><span class="line">        &lt;el-table-column label=&quot;名称&quot; /&gt;</span><br><span class="line">        &lt;el-table-column label=&quot;标识&quot; /&gt;</span><br><span class="line">        &lt;el-table-column label=&quot;描述&quot; /&gt;</span><br><span class="line">        &lt;el-table-column label=&quot;操作&quot;&gt;</span><br><span class="line">          &lt;el-button size=&quot;mini&quot; type=&quot;text&quot;&gt;添加&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button size=&quot;mini&quot; type=&quot;text&quot;&gt;编辑&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button size=&quot;mini&quot; type=&quot;text&quot;&gt;删除&lt;/el-button&gt;</span><br><span class="line">        &lt;/el-table-column&gt;</span><br><span class="line">      &lt;/el-table&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;Permission&#x27;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">.btn-add &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="2-获取数据转化树形"><a href="#2-获取数据转化树形" class="headerlink" title="2.获取数据转化树形"></a>2.获取数据转化树形</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022025840.png" alt="image.png"></p>
<ul>
<li>封装获取权限API-代码位置(<strong>src/api/permission.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> * 获取权限列表</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getPermissionList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/sys/permission&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>获取数据-转化树形-控制二级权限不显示添加按钮(<strong>src/views/permission/index.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">      &lt;el-button class=&quot;btn-add&quot; size=&quot;mini&quot; type=&quot;primary&quot;&gt;添加权限&lt;/el-button&gt;</span><br><span class="line">      &lt;el-table default-expand-all :data=&quot;list&quot; row-key=&quot;id&quot;&gt;</span><br><span class="line">        &lt;el-table-column prop=&quot;name&quot; label=&quot;名称&quot; /&gt;</span><br><span class="line">        &lt;el-table-column prop=&quot;code&quot; label=&quot;标识&quot; /&gt;</span><br><span class="line">        &lt;el-table-column prop=&quot;description&quot; label=&quot;描述&quot; /&gt;</span><br><span class="line">        &lt;el-table-column label=&quot;操作&quot;&gt;</span><br><span class="line">          &lt;template v-slot=&quot;&#123; row &#125;&quot;&gt;</span><br><span class="line">            &lt;el-button v-if=&quot;row.type === 1&quot; size=&quot;mini&quot; type=&quot;text&quot;&gt;添加&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button size=&quot;mini&quot; type=&quot;text&quot;&gt;编辑&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button size=&quot;mini&quot; type=&quot;text&quot;&gt;删除&lt;/el-button&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/el-table-column&gt;</span><br><span class="line">      &lt;/el-table&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; getPermissionList &#125; from &#x27;@/api/permission&#x27;</span><br><span class="line">import &#123; transListToTreeData &#125; from &#x27;@/utils&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;Permission&#x27;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      list: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getPermissionList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    async getPermissionList() &#123;</span><br><span class="line">      this.list = transListToTreeData(await getPermissionList(), 0) // 将列表数据转化成树形结构</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">.btn-add &#123;</span><br><span class="line">  margin: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="3-权限管理—作业"><a href="#3-权限管理—作业" class="headerlink" title="3.权限管理—作业"></a>3.权限管理—作业</h2><p>基于权限接口和线上效果完成 权限点的新增- 删除- 编辑</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022026903.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022026070.png" alt="image.png"> </p>
<p>要求： </p>
<ol>
<li>实现新增-删除-编辑功能</li>
<li>编辑模式不做限制-弹层-行内-跳转都可</li>
<li>注意：二级权限和一级权限的区别为type，当type为1时，为一级权限，当type为2时，为二级权限</li>
<li>二级权限应该添加在一级权限下，二者是通过id和pid进行关联的，其类似于组织架构中的添加子部门。</li>
</ol>
<p>作业实现</p>
<ol>
<li>封装权限管理的API接口-代码位置(<strong>src/api/permission.js</strong>)</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 新增权限</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">addPermission</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/sys/permission&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    data</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更新权限</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">updatePermission</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/permission/<span class="subst">$&#123;data.id&#125;</span>`</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;put&#x27;</span>,</span><br><span class="line">    data</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除权限</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">delPermission</span>(<span class="params">id</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/permission/<span class="subst">$&#123;id&#125;</span>`</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;delete&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 获取权限详情</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getPermissionDetail</span>(<span class="params">id</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/permission/<span class="subst">$&#123;id&#125;</span>`</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2.新增编辑权限的弹层-代码位置(<strong>src/views/permission/index.vue</strong>)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 放置一个弹层 用来编辑新增节点 --&gt;</span><br><span class="line">   &lt;el-dialog :title=&quot;`$&#123;showText&#125;权限点`&quot; :visible=&quot;showDialog&quot; @close=&quot;btnCancel&quot;&gt;</span><br><span class="line">      &lt;!-- 表单 --&gt;</span><br><span class="line">      &lt;el-form ref=&quot;perForm&quot; :model=&quot;formData&quot; :rules=&quot;rules&quot; label-width=&quot;120px&quot;&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;权限名称&quot; prop=&quot;name&quot;&gt;</span><br><span class="line">          &lt;el-input v-model=&quot;formData.name&quot; style=&quot;width:90%&quot; /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;权限标识&quot; prop=&quot;code&quot;&gt;</span><br><span class="line">          &lt;el-input v-model=&quot;formData.code&quot; style=&quot;width:90%&quot; /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;权限描述&quot;&gt;</span><br><span class="line">          &lt;el-input v-model=&quot;formData.description&quot; style=&quot;width:90%&quot; /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;开启&quot;&gt;</span><br><span class="line">          &lt;el-switch</span><br><span class="line">            v-model=&quot;formData.enVisible&quot;</span><br><span class="line">            active-value=&quot;1&quot;</span><br><span class="line">            inactive-value=&quot;0&quot;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/el-form&gt;</span><br><span class="line">      &lt;el-row slot=&quot;footer&quot; type=&quot;flex&quot; justify=&quot;center&quot;&gt;</span><br><span class="line">        &lt;el-col :span=&quot;6&quot;&gt;</span><br><span class="line">          &lt;el-button size=&quot;small&quot; type=&quot;primary&quot; @click=&quot;btnOK&quot;&gt;确定&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button size=&quot;small&quot; @click=&quot;btnCancel&quot;&gt;取消&lt;/el-button&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">      &lt;/el-row&gt;</span><br><span class="line">    &lt;/el-dialog&gt;</span><br></pre></td></tr></table></figure>
<p>声明弹层需要的变量和表单数据和校验规则-代码位置(<strong>src/views/permission/index.vue</strong>)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getPermissionList, updatePermission, addPermission, getPermissionDetail, delPermission &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/permission&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; transListToTreeData &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">list</span>: [],</span><br><span class="line">      <span class="attr">formData</span>: &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 名称</span></span><br><span class="line">        <span class="attr">code</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 标识</span></span><br><span class="line">        <span class="attr">description</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 描述</span></span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 类型 该类型 不需要显示 因为点击添加的时候已经知道类型了</span></span><br><span class="line">        <span class="attr">pid</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 因为做的是树 需要知道添加到哪个节点下了</span></span><br><span class="line">        <span class="attr">enVisible</span>: <span class="string">&quot;0&quot;</span> <span class="comment">// 默认关闭</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">rules</span>: &#123;</span><br><span class="line">        <span class="attr">name</span>: [&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;权限名称不能为空&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;],</span><br><span class="line">        <span class="attr">code</span>: [&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;权限标识不能为空&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;]</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">showDialog</span>: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="title function_">showText</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">formData</span>.<span class="property">id</span> ? <span class="string">&#x27;编辑&#x27;</span> : <span class="string">&#x27;新增&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getPermissionList</span>()</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="keyword">async</span>  <span class="title function_">getPermissionList</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">list</span> = <span class="title function_">transListToTreeData</span>(<span class="keyword">await</span> <span class="title function_">getPermissionList</span>(), <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>实现一级权限新增-二级权限新增-代码位置(<strong>src/views/permission/index.vue</strong>)</li>
</ol>
<p>添加一级权限-<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022026528.png" alt="image.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button class=&quot;btn-add&quot; size=&quot;mini&quot; type=&quot;primary&quot; @click=&quot;addPermission(row.id, 1)&quot;&gt;添加权限&lt;/el-button&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>添加二级权限-<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022026739.png" alt="image.png"></p>
<blockquote>
<p>注意：一级添加的type为1， 二级添加的type为2</p>
</blockquote>
<p>点击添加调用的方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="title function_">addPermission</span>(<span class="params">pid, type</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">formData</span>.<span class="property">pid</span> = pid</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">formData</span>.<span class="property">type</span> = type</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">showDialog</span> = <span class="literal">true</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>实现确定和取消方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">btnOK</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">perForm</span>.<span class="title function_">validate</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">formData</span>.<span class="property">id</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="title function_">updatePermission</span>(<span class="variable language_">this</span>.<span class="property">formData</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">addPermission</span>(<span class="variable language_">this</span>.<span class="property">formData</span>)</span><br><span class="line">      &#125;).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//  提示消息</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;新增成功&#x27;</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">getPermissionList</span>()</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">showDialog</span> = <span class="literal">false</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">btnCancel</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">formData</span> = &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 名称</span></span><br><span class="line">        <span class="attr">code</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 标识</span></span><br><span class="line">        <span class="attr">description</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 描述</span></span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 类型 该类型 不需要显示 因为点击添加的时候已经知道类型了</span></span><br><span class="line">        <span class="attr">pid</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 因为做的是树 需要知道添加到哪个节点下了</span></span><br><span class="line">        <span class="attr">enVisible</span>: <span class="string">&quot;0&quot;</span> <span class="comment">// 默认关闭</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">perForm</span>.<span class="title function_">resetFields</span>()</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">showDialog</span> = <span class="literal">false</span></span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>
<p>实现编辑弹层</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button type=&quot;text&quot; size=&quot;mini&quot; @click=&quot;editPermission(row.id)&quot;&gt;编辑&lt;/el-button&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>点击编辑方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">async</span> <span class="title function_">editPermission</span>(<span class="params">id</span>) &#123;</span><br><span class="line">      <span class="comment">// 根据获取id获取详情</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">formData</span> = <span class="keyword">await</span> <span class="title function_">getPermissionDetail</span>(id)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">showDialog</span> = <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>点击删除</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button type=&quot;text&quot; size=&quot;mini&quot; @click=&quot;delPermission(row.id)&quot;&gt; 删除&lt;/el-button&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>删除方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 删除操作</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">delPermission</span>(<span class="params">id</span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">await</span> <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确定要删除该数据吗&#x27;</span>)</span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">delPermission</span>(id)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">getPermissionList</span>()</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;删除成功&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(error)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<h2 id="4-权限概念"><a href="#4-权限概念" class="headerlink" title="4.权限概念"></a>4.权限概念</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022026248.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022050934.png" alt="image.png"></p>
<blockquote>
<p>权限是通过角色这个中间人实现，首先员工拥有角色，角色拥有权限，那么员工自动拥有了角色所对应的权限。</p>
</blockquote>
<p>所以接下来，我们需要实现 给员工分配角色，给角色分配权限。</p>
<ul>
<li>分配过程-给员工分角色</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022027797.png" alt="image.png"></p>
<ul>
<li>分配过程-给角色分权限</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022027339.png" alt="image.png"></p>
<h2 id="5-员工分配角色—弹出层"><a href="#5-员工分配角色—弹出层" class="headerlink" title="5.员工分配角色—弹出层"></a>5.员工分配角色—弹出层</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022027852.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022050743.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022050639.png" alt="image.png"></p>
<ul>
<li>封装获取可用角色的API-代码位置(<strong>src/api/employee.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取可用的角色</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getEnableRoleList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/sys/role/list/enabled&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>声明变量控制弹层显示-和角色列表-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">data () &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">showRoleDialog</span>: <span class="literal">false</span>, <span class="comment">// 用来控制角色弹层的显示</span></span><br><span class="line">      <span class="attr">roleList</span>: [], <span class="comment">// 接收角色列表</span></span><br><span class="line">      <span class="attr">roleIds</span>: [] <span class="comment">// 用来双向绑定数据的</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>点击角色按钮-获取角色列表-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 点击角色按钮弹出层</span></span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">btnRole</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">showRoleDialog</span> = <span class="literal">true</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">roleList</span> = <span class="keyword">await</span> <span class="title function_">getEnableRoleList</span>()</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>放置弹层-绑定变量和渲染checkbox-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;showRoleDialog&quot;</span> <span class="attr">title</span>=<span class="string">&quot;分配角色&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 弹层内容 --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- checkbox --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-checkbox-group</span> <span class="attr">v-model</span>=<span class="string">&quot;roleIds&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 放置n个的checkbox  要执行checkbox的存储值 item.id--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-checkbox</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-for</span>=<span class="string">&quot;item in roleList&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:label</span>=<span class="string">&quot;item.id&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span>&#123;&#123; item.name &#125;&#125;<span class="tag">&lt;/<span class="name">el-checkbox</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-checkbox-group</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="6-员工分配角色—回显数据并提交"><a href="#6-员工分配角色—回显数据并提交" class="headerlink" title="6.员工分配角色—回显数据并提交"></a>6.员工分配角色—回显数据并提交</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022027317.png" alt="image.png"></p>
<ul>
<li>封装给员工分配角色的接口-代码位置(<strong>src/api/employee.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 分配员工角色</span></span><br><span class="line"><span class="comment"> * ***/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">assignRole</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/sys/user/assignRoles&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;put&#x27;</span>,</span><br><span class="line">    data</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>点击角色按钮时，获取员工已经拥有的角色，并记录当前点击的用户id-代码位置(<strong>src/views/employee/index.vue</strong>)</p>
<p>在data中声明一个id用来记录</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data () &#123;</span><br><span class="line">  <span class="keyword">return</span>  &#123;</span><br><span class="line">    <span class="attr">currentUserId</span>: <span class="literal">null</span> <span class="comment">// 用来记录当前点击的用户id</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">btnRole</span>(<span class="params">id</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">roleList</span> = <span class="keyword">await</span> <span class="title function_">getEnableRoleList</span>()</span><br><span class="line">      <span class="comment">// 记录当前点击的id 因为后边 确定取消要存取给对应的用户</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">currentUserId</span> = id</span><br><span class="line">      <span class="keyword">const</span> &#123; roleIds &#125; = <span class="keyword">await</span> <span class="title function_">getEmployeeDetail</span>(id)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">roleIds</span> = roleIds</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">showRoleDialog</span> = <span class="literal">true</span> <span class="comment">// 调整顺序</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意，这里我们特地调整了弹层的顺序，因为获取已经拥有的角色是一个异步的过程，如果弹层显示在前，会出现卡顿的效果，表现出缓慢的效果，所以等到获取所有数据之后再弹层。</p>
</blockquote>
<ul>
<li>点击确定实现给用户分配角色-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 点击角色的确定</span></span><br><span class="line">   <span class="keyword">async</span>  <span class="title function_">btnRoleOK</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="keyword">await</span> <span class="title function_">assignRole</span>(&#123;</span><br><span class="line">       <span class="attr">id</span>: <span class="variable language_">this</span>.<span class="property">currentUserId</span>,</span><br><span class="line">       <span class="attr">roleIds</span>: <span class="variable language_">this</span>.<span class="property">roleIds</span></span><br><span class="line">     &#125;)</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;分配用户角色成功&#x27;</span>)</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">showRoleDialog</span> = <span class="literal">false</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>取消关闭弹层-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-row</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">type</span>=<span class="string">&quot;flex&quot;</span> <span class="attr">justify</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;6&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;btnRoleOK&quot;</span>&gt;</span>确定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;showRoleDialog = false&quot;</span>&gt;</span>取消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="7-给角色分配权限—弹出层"><a href="#7-给角色分配权限—弹出层" class="headerlink" title="7.给角色分配权限—弹出层"></a>7.给角色分配权限—弹出层</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022027649.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022051339.png" alt="image.png"></p>
<ul>
<li>声明变量控制弹层显示和接收权限数据-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data () &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">     <span class="attr">showPermissionDialog</span>: <span class="literal">false</span>,</span><br><span class="line">     <span class="attr">permissionData</span>: []</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>点击分配权限-弹出层-获取数据并转化树形-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button size=<span class="string">&quot;mini&quot;</span> type=<span class="string">&quot;text&quot;</span> @click=<span class="string">&quot;btnPermission&quot;</span>&gt;分配权限&lt;/el-button&gt;</span><br><span class="line"><span class="keyword">async</span>  <span class="title function_">btnPermission</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">showPermissionDialog</span> = <span class="literal">true</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">permissionData</span> = <span class="title function_">transListToTreeData</span>(<span class="keyword">await</span> <span class="title function_">getPermissionList</span>(), <span class="number">0</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>放置弹层和树组件-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 放置权限弹层 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;showPermissionDialog&quot;</span> <span class="attr">title</span>=<span class="string">&quot;分配权限&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 放置权限数据 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-tree</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:data</span>=<span class="string">&quot;permissionData&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:props</span>=<span class="string">&quot;&#123; label: &#x27;name&#x27; &#125;&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">show-checkbox</span></span></span><br><span class="line"><span class="tag">        <span class="attr">default-expand-all</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="8-角色分配权限—显示已有权限数据"><a href="#8-角色分配权限—显示已有权限数据" class="headerlink" title="8.角色分配权限—显示已有权限数据"></a>8.角色分配权限—显示已有权限数据</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022027947.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022028881.png" alt="image.png"></p>
<ul>
<li>封装获取角色详情的API-代码位置(<strong>src/api/role.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取角色详情</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getRoleDetail</span>(<span class="params">id</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/role/<span class="subst">$&#123;id&#125;</span>`</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>声明变量记录当前点击的角色id和角色所拥有的权限数据-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data () &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">currentRoleId</span>: <span class="literal">null</span>,</span><br><span class="line">      <span class="attr">permIds</span>: []</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>点击分配权限按钮时传递角色id，并根据id获取该角色所拥有的权限-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button size=<span class="string">&quot;mini&quot;</span> type=<span class="string">&quot;text&quot;</span> @click=<span class="string">&quot;btnPermission(row.id)&quot;</span>&gt;分配权限&lt;/el-button&gt;</span><br><span class="line"><span class="keyword">async</span>  <span class="title function_">btnPermission</span>(<span class="params">id</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">currentRoleId</span> = id</span><br><span class="line">      <span class="keyword">const</span> &#123; permIds &#125; = <span class="keyword">await</span> <span class="title function_">getRoleDetail</span>(id)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">permIds</span> = permIds</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">permissionData</span> = <span class="title function_">transListToTreeData</span>(<span class="keyword">await</span> <span class="title function_">getPermissionList</span>(), <span class="number">0</span>)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">showPermissionDialog</span> = <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>设置el-tree组件的属性-node-key和当前选中数据-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-tree</span></span></span><br><span class="line"><span class="tag">        <span class="attr">node-key</span>=<span class="string">&quot;id&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:data</span>=<span class="string">&quot;permissionData&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:props</span>=<span class="string">&quot;&#123; label: &#x27;name&#x27; &#125;&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">show-checkbox</span></span></span><br><span class="line"><span class="tag">        <span class="attr">default-expand-all</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:default-checked-keys</span>=<span class="string">&quot;permIds&quot;</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>default-checked-keys的属性是设置当前选中的节点，但是必须配合node-key属性，因为permIds变量中存储的都是id，必须el-tree组件知道key是哪个字段，所以设置node-key=”id”</p>
</blockquote>
<h2 id="9-角色分配权限—确定提交"><a href="#9-角色分配权限—确定提交" class="headerlink" title="9.角色分配权限—确定提交"></a>9.角色分配权限—确定提交</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022028958.png" alt="image.png"></p>
<ul>
<li>封装分配权限的接口API-代码位置(<strong>src/api/role.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 给角色分配权限</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * ***/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">assignPerm</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/sys/role/assignPrem&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;put&#x27;</span>,</span><br><span class="line">    data</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>确定和取消事件-代码位置(<strong>src/views/role/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> &lt;el-row slot=<span class="string">&quot;footer&quot;</span> type=<span class="string">&quot;flex&quot;</span> justify=<span class="string">&quot;center&quot;</span>&gt;</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;6&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;btnPermissionOK&quot;</span>&gt;</span>确定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;showPermissionDialog = false&quot;</span>&gt;</span>取消<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span></span><br><span class="line">  &lt;/el-row&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 点击确定时触发</span></span><br><span class="line">    <span class="keyword">async</span>  <span class="title function_">btnPermissionOK</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">assignPerm</span>(&#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="variable language_">this</span>.<span class="property">currentRoleId</span>,</span><br><span class="line">        <span class="attr">permIds</span>: <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">permTree</span>.<span class="title function_">getCheckedKeys</span>()</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;角色分配权限成功&#x27;</span>)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">showPermissionDialog</span> = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="10-拆分静态路由—动态路由"><a href="#10-拆分静态路由—动态路由" class="headerlink" title="10.拆分静态路由—动态路由"></a>10.拆分静态路由—动态路由<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022028328.png" alt="image.png"></h2><ul>
<li>将静态路由和动态路由进行拆分-代码位置(<strong>src/router/index.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Router</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Router</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Layout */</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Layout</span> <span class="keyword">from</span> <span class="string">&#x27;@/layout&#x27;</span></span><br><span class="line"><span class="keyword">import</span> departmentRouter <span class="keyword">from</span> <span class="string">&#x27;./modules/department&#x27;</span></span><br><span class="line"><span class="keyword">import</span> approvalRouter <span class="keyword">from</span> <span class="string">&#x27;./modules/approval&#x27;</span></span><br><span class="line"><span class="keyword">import</span> attendanceRouter <span class="keyword">from</span> <span class="string">&#x27;./modules/attendance&#x27;</span></span><br><span class="line"><span class="keyword">import</span> employeeRouter <span class="keyword">from</span> <span class="string">&#x27;./modules/employee&#x27;</span></span><br><span class="line"><span class="keyword">import</span> permissionRouter <span class="keyword">from</span> <span class="string">&#x27;./modules/permission&#x27;</span></span><br><span class="line"><span class="keyword">import</span> roleRouter <span class="keyword">from</span> <span class="string">&#x27;./modules/role&#x27;</span></span><br><span class="line"><span class="keyword">import</span> salaryRouter <span class="keyword">from</span> <span class="string">&#x27;./modules/salary&#x27;</span></span><br><span class="line"><span class="keyword">import</span> socialRouter <span class="keyword">from</span> <span class="string">&#x27;./modules/social&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Note: sub-menu only appear when route children.length &gt;= 1</span></span><br><span class="line"><span class="comment"> * Detail see: https://panjiachen.github.io/vue-element-admin-site/guide/essentials/router-and-nav.html</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * hidden: true                   if set true, item will not show in the sidebar(default is false)</span></span><br><span class="line"><span class="comment"> * alwaysShow: true               if set true, will always show the root menu</span></span><br><span class="line"><span class="comment"> *                                if not set alwaysShow, when item has more than one children route,</span></span><br><span class="line"><span class="comment"> *                                it will becomes nested mode, otherwise not show the root menu</span></span><br><span class="line"><span class="comment"> * redirect: noRedirect           if set noRedirect will no redirect in the breadcrumb</span></span><br><span class="line"><span class="comment"> * name:&#x27;router-name&#x27;             the name is used by &lt;keep-alive&gt; (must set!!!)</span></span><br><span class="line"><span class="comment"> * meta : &#123;</span></span><br><span class="line"><span class="comment">    roles: [&#x27;admin&#x27;,&#x27;editor&#x27;]    control the page roles (you can set multiple roles)</span></span><br><span class="line"><span class="comment">    title: &#x27;title&#x27;               the name show in sidebar and breadcrumb (recommend set)</span></span><br><span class="line"><span class="comment">    icon: &#x27;svg-name&#x27;/&#x27;el-icon-x&#x27; the icon show in the sidebar</span></span><br><span class="line"><span class="comment">    breadcrumb: false            if set false, the item will hidden in breadcrumb(default is true)</span></span><br><span class="line"><span class="comment">    activeMenu: &#x27;/example/list&#x27;  if set path, the sidebar will highlight the path you set</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * constantRoutes</span></span><br><span class="line"><span class="comment"> * a base page that does not have permission requirements</span></span><br><span class="line"><span class="comment"> * all roles can be accessed</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> constantRoutes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/login/index&#x27;</span>),</span><br><span class="line">    <span class="attr">hidden</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/404&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/404&#x27;</span>),</span><br><span class="line">    <span class="attr">hidden</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Layout</span>,</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/dashboard&#x27;</span>,</span><br><span class="line">    <span class="attr">children</span>: [&#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;dashboard&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;Dashboard&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/dashboard/index&#x27;</span>),</span><br><span class="line">      <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;首页&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;dashboard&#x27;</span> &#125;</span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 404 page must be placed at the end !!!</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;*&#x27;</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/404&#x27;</span>, <span class="attr">hidden</span>: <span class="literal">true</span> &#125;</span><br><span class="line">]</span><br><span class="line"><span class="comment">// 动态路由</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> asyncRoutes = [</span><br><span class="line">  departmentRouter,</span><br><span class="line">  roleRouter,</span><br><span class="line">  employeeRouter,</span><br><span class="line">  permissionRouter,</span><br><span class="line">  attendanceRouter,</span><br><span class="line">  approvalRouter,</span><br><span class="line">  salaryRouter,</span><br><span class="line">  socialRouter]</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">createRouter</span> = (<span class="params"></span>) =&gt; <span class="keyword">new</span> <span class="title class_">Router</span>(&#123;</span><br><span class="line">  <span class="comment">// mode: &#x27;history&#x27;, // require service support</span></span><br><span class="line">  <span class="attr">scrollBehavior</span>: <span class="function">() =&gt;</span> (&#123; <span class="attr">y</span>: <span class="number">0</span> &#125;),</span><br><span class="line">  <span class="attr">routes</span>: constantRoutes <span class="comment">// 默认引入静态路由</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// Detail see: https://github.com/vuejs/vue-router/issues/1234#issuecomment-357941465</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">resetRouter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> newRouter = <span class="title function_">createRouter</span>()</span><br><span class="line">  router.<span class="property">matcher</span> = newRouter.<span class="property">matcher</span> <span class="comment">// reset router</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>
<h2 id="11-根据用户权限添加动态路由"><a href="#11-根据用户权限添加动态路由" class="headerlink" title="11.根据用户权限添加动态路由"></a>11.根据用户权限添加动态路由</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022028382.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022028370.png" alt="image.png"><br>怎么匹配?</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022028196.png" alt="image.png"></p>
<ul>
<li>Vuex用户模块action中返回result信息</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">getUserInfo</span>(<span class="params">context</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title function_">getUserInfo</span>()</span><br><span class="line">    context.<span class="title function_">commit</span>(<span class="string">&#x27;setUserInfo&#x27;</span>, result)</span><br><span class="line">    <span class="keyword">return</span> result <span class="comment">// 返回数据</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>权限拦截处筛选-添加路由-代码位置(<strong>src/permission.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> nprogress <span class="keyword">from</span> <span class="string">&#x27;nprogress&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;nprogress/nprogress.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;@/store&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; asyncRoutes &#125; <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *前置守卫</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> whiteList = [<span class="string">&#x27;/login&#x27;</span>, <span class="string">&#x27;/404&#x27;</span>]</span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="title function_">async</span>(to, <span class="keyword">from</span>, next) =&gt; &#123;</span><br><span class="line">  nprogress.<span class="title function_">start</span>()</span><br><span class="line">  <span class="keyword">if</span> (store.<span class="property">getters</span>.<span class="property">token</span>) &#123;</span><br><span class="line">    <span class="comment">// 存在token</span></span><br><span class="line">    <span class="keyword">if</span> (to.<span class="property">path</span> === <span class="string">&#x27;/login&#x27;</span>) &#123;</span><br><span class="line">      <span class="comment">// 跳转到主页</span></span><br><span class="line">      <span class="title function_">next</span>(<span class="string">&#x27;/&#x27;</span>) <span class="comment">// 中转到主页</span></span><br><span class="line">      <span class="comment">// next（地址）并没有执行后置守卫</span></span><br><span class="line">      nprogress.<span class="title function_">done</span>()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 判断是否获取过资料</span></span><br><span class="line">      <span class="keyword">if</span> (!store.<span class="property">getters</span>.<span class="property">userId</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; roles &#125; = <span class="keyword">await</span> store.<span class="title function_">dispatch</span>(<span class="string">&#x27;user/getUserInfo&#x27;</span>)</span><br><span class="line">        <span class="comment">// console.log(roles.menus) // 数组 不确定 可能是8个 1个 0个</span></span><br><span class="line">        <span class="comment">// console.log(asyncRoutes) // 数组 8个</span></span><br><span class="line">        <span class="keyword">const</span> filterRoutes = asyncRoutes.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// return true/false</span></span><br><span class="line">          <span class="keyword">return</span> roles.<span class="property">menus</span>.<span class="title function_">includes</span>(item.<span class="property">name</span>)</span><br><span class="line">        &#125;) <span class="comment">// 筛选后的路由</span></span><br><span class="line">        router.<span class="title function_">addRoutes</span>([...filterRoutes, &#123; <span class="attr">path</span>: <span class="string">&#x27;*&#x27;</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/404&#x27;</span>, <span class="attr">hidden</span>: <span class="literal">true</span> &#125;]) <span class="comment">// 添加动态路由信息到路由表</span></span><br><span class="line">        <span class="comment">// router添加动态路由之后 需要转发一下</span></span><br><span class="line">        <span class="title function_">next</span>(to.<span class="property">path</span>) <span class="comment">// 目的是让路由拥有信息 router的已知缺陷</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">next</span>() <span class="comment">// 放过</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 没有token</span></span><br><span class="line">    <span class="keyword">if</span> (whiteList.<span class="title function_">includes</span>(to.<span class="property">path</span>)) &#123;</span><br><span class="line">      <span class="title function_">next</span>()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title function_">next</span>(<span class="string">&#x27;/login&#x27;</span>) <span class="comment">// 中转到登录页</span></span><br><span class="line">      nprogress.<span class="title function_">done</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> * 后置守卫</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;123&#x27;</span>)</span><br><span class="line">  nprogress.<span class="title function_">done</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>删除静态路由中的404-代码位置(<strong>src/router/index.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * constantRoutes</span></span><br><span class="line"><span class="comment"> * a base page that does not have permission requirements</span></span><br><span class="line"><span class="comment"> * all roles can be accessed</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> constantRoutes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/login/index&#x27;</span>),</span><br><span class="line">    <span class="attr">hidden</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/404&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/404&#x27;</span>),</span><br><span class="line">    <span class="attr">hidden</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Layout</span>,</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/dashboard&#x27;</span>,</span><br><span class="line">    <span class="attr">children</span>: [&#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;dashboard&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;Dashboard&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/dashboard/index&#x27;</span>),</span><br><span class="line">      <span class="attr">meta</span>: &#123; <span class="attr">title</span>: <span class="string">&#x27;首页&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;dashboard&#x27;</span> &#125;</span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<ul>
<li>针对每个路由模块的配置文件添加name属性，和权限的数据进行对应。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022028863.png" alt="image.png"> </p>
<h2 id="12-根据权限显示左侧菜单"><a href="#12-根据权限显示左侧菜单" class="headerlink" title="12.根据权限显示左侧菜单"></a>12.根据权限显示左侧菜单</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022029992.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022029114.png" alt="image.png"></p>
<ul>
<li>Vuex中的user模块添加state管理-代码位置(<strong>src/store/modules/user.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getToken, setToken, removeToken &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/auth&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; login, getUserInfo &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/user&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; constantRoutes &#125; <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span></span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">  <span class="attr">token</span>: <span class="title function_">getToken</span>(), <span class="comment">// 从缓存中读取初始值</span></span><br><span class="line">  <span class="attr">userInfo</span>: &#123;&#125;, <span class="comment">// 存储用户基本资料状态</span></span><br><span class="line">  <span class="attr">routes</span>: constantRoutes <span class="comment">// 静态路由的数组</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">  <span class="title function_">setToken</span>(<span class="params">state, token</span>) &#123;</span><br><span class="line">    state.<span class="property">token</span> = token</span><br><span class="line">    <span class="comment">// 同步到缓存</span></span><br><span class="line">    <span class="title function_">setToken</span>(token)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">removeToken</span>(<span class="params">state</span>) &#123;</span><br><span class="line">    <span class="comment">// 删除Vuex的token</span></span><br><span class="line">    state.<span class="property">token</span> = <span class="literal">null</span></span><br><span class="line">    <span class="title function_">removeToken</span>()</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">setUserInfo</span>(<span class="params">state, userInfo</span>) &#123;</span><br><span class="line">    state.<span class="property">userInfo</span> = userInfo</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">setRoutes</span>(<span class="params">state, newRoutes</span>) &#123;</span><br><span class="line">    state.<span class="property">routes</span> = [...constantRoutes, ...newRoutes] <span class="comment">// 静态路由 + 动态路由</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">  <span class="comment">// context上下文，传入参数</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">login</span>(<span class="params">context, data</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br><span class="line">    <span class="comment">// todo: 调用登录接口</span></span><br><span class="line">    <span class="keyword">const</span> token = <span class="keyword">await</span> <span class="title function_">login</span>(data)</span><br><span class="line">    <span class="comment">// 返回一个token 123456</span></span><br><span class="line">    context.<span class="title function_">commit</span>(<span class="string">&#x27;setToken&#x27;</span>, token)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 获取用户的基本资料</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">getUserInfo</span>(<span class="params">context</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title function_">getUserInfo</span>()</span><br><span class="line">    context.<span class="title function_">commit</span>(<span class="string">&#x27;setUserInfo&#x27;</span>, result)</span><br><span class="line">    <span class="keyword">return</span> result <span class="comment">// 返回数据</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 退出登录的action</span></span><br><span class="line">  <span class="title function_">logout</span>(<span class="params">context</span>) &#123;</span><br><span class="line">    context.<span class="title function_">commit</span>(<span class="string">&#x27;removeToken&#x27;</span>) <span class="comment">// 删除token</span></span><br><span class="line">    context.<span class="title function_">commit</span>(<span class="string">&#x27;setUserInfo&#x27;</span>, &#123;&#125;) <span class="comment">// 设置用户信息为空对象</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>, <span class="comment">// 开启命名空间</span></span><br><span class="line">  state,</span><br><span class="line">  mutations,</span><br><span class="line">  actions</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>筛选路由后，更新state信息-代码位置(<strong>src/permission.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> nprogress <span class="keyword">from</span> <span class="string">&#x27;nprogress&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;nprogress/nprogress.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;@/store&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; asyncRoutes &#125; <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *前置守卫</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> whiteList = [<span class="string">&#x27;/login&#x27;</span>, <span class="string">&#x27;/404&#x27;</span>]</span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="title function_">async</span>(to, <span class="keyword">from</span>, next) =&gt; &#123;</span><br><span class="line">  nprogress.<span class="title function_">start</span>()</span><br><span class="line">  <span class="keyword">if</span> (store.<span class="property">getters</span>.<span class="property">token</span>) &#123;</span><br><span class="line">    <span class="comment">// 存在token</span></span><br><span class="line">    <span class="keyword">if</span> (to.<span class="property">path</span> === <span class="string">&#x27;/login&#x27;</span>) &#123;</span><br><span class="line">      <span class="comment">// 跳转到主页</span></span><br><span class="line">      <span class="title function_">next</span>(<span class="string">&#x27;/&#x27;</span>) <span class="comment">// 中转到主页</span></span><br><span class="line">      <span class="comment">// next（地址）并没有执行后置守卫</span></span><br><span class="line">      nprogress.<span class="title function_">done</span>()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 判断是否获取过资料</span></span><br><span class="line">      <span class="keyword">if</span> (!store.<span class="property">getters</span>.<span class="property">userId</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; roles &#125; = <span class="keyword">await</span> store.<span class="title function_">dispatch</span>(<span class="string">&#x27;user/getUserInfo&#x27;</span>)</span><br><span class="line">        <span class="comment">// console.log(roles.menus) // 数组 不确定 可能是8个 1个 0个</span></span><br><span class="line">        <span class="comment">// console.log(asyncRoutes) // 数组 8个</span></span><br><span class="line">        <span class="keyword">const</span> filterRoutes = asyncRoutes.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// return true/false</span></span><br><span class="line">          <span class="keyword">return</span> roles.<span class="property">menus</span>.<span class="title function_">includes</span>(item.<span class="property">name</span>)</span><br><span class="line">        &#125;) <span class="comment">// 筛选后的路由</span></span><br><span class="line">        store.<span class="title function_">commit</span>(<span class="string">&#x27;user/setRoutes&#x27;</span>, filterRoutes)</span><br><span class="line">        router.<span class="title function_">addRoutes</span>([...filterRoutes, &#123; <span class="attr">path</span>: <span class="string">&#x27;*&#x27;</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/404&#x27;</span>, <span class="attr">hidden</span>: <span class="literal">true</span> &#125;]) <span class="comment">// 添加动态路由信息到路由表</span></span><br><span class="line">        <span class="comment">// router添加动态路由之后 需要转发一下</span></span><br><span class="line">        <span class="title function_">next</span>(to.<span class="property">path</span>) <span class="comment">// 目的是让路由拥有信息 router的已知缺陷</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">next</span>() <span class="comment">// 放过</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 没有token</span></span><br><span class="line">    <span class="keyword">if</span> (whiteList.<span class="title function_">includes</span>(to.<span class="property">path</span>)) &#123;</span><br><span class="line">      <span class="title function_">next</span>()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title function_">next</span>(<span class="string">&#x27;/login&#x27;</span>) <span class="comment">// 中转到登录页</span></span><br><span class="line">      nprogress.<span class="title function_">done</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> * 后置守卫</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;123&#x27;</span>)</span><br><span class="line">  nprogress.<span class="title function_">done</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>使用getters开放路由的访问信息-代码位置(<strong>src/store/getters.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getters = &#123;</span><br><span class="line">  <span class="attr">sidebar</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">app</span>.<span class="property">sidebar</span>,</span><br><span class="line">  <span class="attr">device</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">app</span>.<span class="property">device</span>,</span><br><span class="line">  <span class="attr">token</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">user</span>.<span class="property">token</span>,</span><br><span class="line">  <span class="attr">userId</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">user</span>.<span class="property">userInfo</span>.<span class="property">userId</span>,</span><br><span class="line">  <span class="attr">avatar</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">user</span>.<span class="property">userInfo</span>.<span class="property">staffPhoto</span>, <span class="comment">// 头像</span></span><br><span class="line">  <span class="attr">name</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">user</span>.<span class="property">userInfo</span>.<span class="property">username</span>, <span class="comment">// 用户名称</span></span><br><span class="line">  <span class="attr">routes</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">user</span>.<span class="property">routes</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> getters</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>左侧菜单组件读取Vuex中的路由信息-代码位置(<strong>src/layout/components/Sidebar/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">components</span>: &#123; <span class="title class_">SidebarItem</span>, <span class="title class_">Logo</span> &#125;,</span><br><span class="line">  <span class="attr">computed</span>: &#123;</span><br><span class="line">    ...<span class="title function_">mapGetters</span>([</span><br><span class="line">      <span class="string">&#x27;sidebar&#x27;</span>, <span class="string">&#x27;routes&#x27;</span></span><br><span class="line">    ]),</span><br><span class="line">    <span class="comment">// 路由信息的计算属性</span></span><br><span class="line">    <span class="comment">// routes() &#123;</span></span><br><span class="line">    <span class="comment">//   // 返回所有的路由信息</span></span><br><span class="line">    <span class="comment">//   return this.$router.options.routes</span></span><br><span class="line">    <span class="comment">// &#125;,</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="13-退出登录重置路由"><a href="#13-退出登录重置路由" class="headerlink" title="13.退出登录重置路由"></a>13.退出登录重置路由</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022029860.png" alt="image.png"></p>
<ul>
<li>退出登录时-重置路由-代码位置(<strong>src/store/modules/user.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; resetRouter &#125; <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 退出登录的action</span></span><br><span class="line">  <span class="title function_">logout</span>(<span class="params">context</span>) &#123;</span><br><span class="line">    context.<span class="title function_">commit</span>(<span class="string">&#x27;removeToken&#x27;</span>) <span class="comment">// 删除token</span></span><br><span class="line">    context.<span class="title function_">commit</span>(<span class="string">&#x27;setUserInfo&#x27;</span>, &#123;&#125;) <span class="comment">// 设置用户信息为空对象</span></span><br><span class="line">    <span class="comment">// 重置路由</span></span><br><span class="line">    <span class="title function_">resetRouter</span>()</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h2 id="14-功能权限—按钮权限标识"><a href="#14-功能权限—按钮权限标识" class="headerlink" title="14.功能权限—按钮权限标识"></a>14.功能权限—按钮权限标识</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022029001.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022029143.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022029356.png" alt="image.png"></p>
<h2 id="15-自定义指令应用功能权限"><a href="#15-自定义指令应用功能权限" class="headerlink" title="15.自定义指令应用功能权限"></a>15.自定义指令应用功能权限</h2><ul>
<li>自定义指令- 作用在按钮上-所有的按钮都可以直接使用 </li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022029618.png" alt="image.png"></p>
<ul>
<li>封装自定义指令-代码位置(<strong>src/main.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 封装自定义指令 用来控制操作权</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;permission&#x27;</span>, &#123;</span><br><span class="line">  <span class="comment">// 会在指令作用的元素插入到页面完成以后触发</span></span><br><span class="line">  <span class="title function_">inserted</span>(<span class="params">el, binding</span>) &#123;</span><br><span class="line">    <span class="comment">// el 指令作用的元素的dom对象</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(el)</span><br><span class="line">    <span class="keyword">const</span> points = store.<span class="property">state</span>.<span class="property">user</span>.<span class="property">userInfo</span>?.<span class="property">roles</span>?.<span class="property">points</span> || [] <span class="comment">// 当前用户信息的操作权</span></span><br><span class="line">    <span class="keyword">if</span> (!points.<span class="title function_">includes</span>(binding.<span class="property">value</span>)) &#123;</span><br><span class="line">      <span class="comment">// 不存在就要删除或者禁用</span></span><br><span class="line">      el.<span class="title function_">remove</span>() <span class="comment">// 删除元素</span></span><br><span class="line">      <span class="comment">// el.disabled = true</span></span><br><span class="line">      <span class="comment">// 线上的权限数据和线下的代码进行对应</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>应用自定义指令-代码位置(<strong>src/views/employee/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">v-permission</span>=<span class="string">&quot;&#x27;add-employee&#x27;&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;$router.push(&#x27;/employee/detail&#x27;)&quot;</span>&gt;</span></span><br><span class="line">  添加员工</span><br><span class="line"><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="九、其他模块"><a href="#九、其他模块" class="headerlink" title="九、其他模块"></a>九、其他模块</h1><h2 id="1-集成"><a href="#1-集成" class="headerlink" title="1.集成"></a>1.集成</h2><blockquote>
<p>素材中，已经给大家提供了 其他模块的请求/路由/组件，只需要拷贝到src即可</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022030263.png" alt="image.png"></p>
<h2 id="2-首页—基本结构和数字滚动"><a href="#2-首页—基本结构和数字滚动" class="headerlink" title="2.首页—基本结构和数字滚动"></a>2.首页—基本结构和数字滚动</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022030287.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022030164.png" alt="image.png"> </p>
<ul>
<li>基本结构-代码位置(<strong>src/views/dashboard/index.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;dashboard&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;!-- 左侧内容 --&gt;</span><br><span class="line">      &lt;div class=&quot;left&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;!-- 个人信息 --&gt;</span><br><span class="line">          &lt;div class=&quot;user-info&quot;&gt;</span><br><span class="line">            &lt;img class=&quot;avatar&quot; src=&quot;../../assets/common/defaultHead.png&quot; alt=&quot;&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;company-info&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;title&quot;&gt;</span><br><span class="line">                江苏传智播客教育科技股份有限公司</span><br><span class="line">                &lt;span&gt;体验版&lt;/span&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;depart&quot;&gt;庆山 ｜ 传智播客-总裁办&lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;!-- 代办 --&gt;</span><br><span class="line">          &lt;div class=&quot;todo-list&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;组织总人数&lt;/span&gt;</span><br><span class="line">              &lt;!-- 起始值 终点值  滚动时间 --&gt;</span><br><span class="line">              &lt;span&gt;228&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;正式员工&lt;/span&gt;</span><br><span class="line">               &lt;span&gt;334&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;合同待签署&lt;/span&gt;</span><br><span class="line">               &lt;span&gt;345&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;待入职&lt;/span&gt;</span><br><span class="line">               &lt;span&gt;890&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;本月待转正&lt;/span&gt;</span><br><span class="line">               &lt;span&gt;117&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;本月待离职&lt;/span&gt;</span><br><span class="line">              &lt;span&gt;234&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;接口总访问&lt;/span&gt;</span><br><span class="line">               &lt;span&gt;789&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 快捷入口 --&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;panel-title&quot;&gt;快捷入口&lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;quick-entry&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;entry-item&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;entry-icon approval&quot; /&gt;</span><br><span class="line">              &lt;span&gt;假期审批&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;entry-item&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;entry-icon social&quot; /&gt;</span><br><span class="line">              &lt;span&gt;社保管理&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;entry-item&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;entry-icon role&quot; /&gt;</span><br><span class="line">              &lt;span&gt;角色管理&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;entry-item&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;entry-icon salary&quot; /&gt;</span><br><span class="line">              &lt;span&gt;薪资设置&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;entry-item&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;entry-icon bpm&quot; /&gt;</span><br><span class="line">              &lt;span&gt;流程设置&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 图表数据 --&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;panel-title&quot;&gt;社保申报数据&lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;chart-container&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;chart-info&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;info-main&quot;&gt;</span><br><span class="line">                &lt;span&gt;申报人数&lt;/span&gt;</span><br><span class="line">                &lt;span&gt;223&lt;/span&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;info-list&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;待申报(人)&lt;/span&gt;</span><br><span class="line">                   &lt;span&gt;117&lt;/span&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;申报中(人)&lt;/span&gt;</span><br><span class="line">                   &lt;span&gt;167&lt;/span&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;已申报(人)&lt;/span&gt;</span><br><span class="line">                   &lt;span&gt;24&lt;/span&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;chart&quot;&gt;</span><br><span class="line">              &lt;!-- 图表 --&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 图表数据 --&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;panel-title&quot;&gt;公积金申报数据&lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;chart-container&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;chart-info&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;info-main&quot;&gt;</span><br><span class="line">                &lt;span&gt;申报人数&lt;/span&gt;</span><br><span class="line">                 &lt;span&gt;335&lt;/span&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;info-list&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;待申报(人)&lt;/span&gt;</span><br><span class="line">                   &lt;span&gt;345&lt;/span&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;申报中(人)&lt;/span&gt;</span><br><span class="line">                   &lt;span&gt;109&lt;/span&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;已申报(人)&lt;/span&gt;</span><br><span class="line">                   &lt;span&gt;77&lt;/span&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;chart&quot;&gt;</span><br><span class="line">              &lt;!-- 图表 --&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- 右侧内容 --&gt;</span><br><span class="line">      &lt;div class=&quot;right&quot;&gt;</span><br><span class="line">        &lt;!-- 帮助链接 --&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;help&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;help-left&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;panel-title&quot;&gt;帮助链接&lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;help-list&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;help-block&quot;&gt;</span><br><span class="line">                  &lt;i class=&quot;icon-entry&quot; /&gt;</span><br><span class="line">                  入门指南</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;help-block&quot;&gt;</span><br><span class="line">                  &lt;i class=&quot;icon-help&quot; /&gt;</span><br><span class="line">                  在线帮助手册</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;help-block&quot;&gt;</span><br><span class="line">                  &lt;i class=&quot;icon-support&quot; /&gt;</span><br><span class="line">                  联系技术支持</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;help-block&quot;&gt;</span><br><span class="line">                  &lt;i class=&quot;icon-add&quot; /&gt;</span><br><span class="line">                  添加链接</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;help-right&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;calendar&quot;&gt;</span><br><span class="line">                &lt;!-- &lt;el-calendar /&gt; --&gt;</span><br><span class="line">                &lt;el-calendar /&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 通知公告 --&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;panel-title&quot;&gt;通知公告&lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;information-list&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;information-list-item&quot;&gt;</span><br><span class="line">              &lt;img src=&quot;@/assets/common/img.jpeg&quot; alt=&quot;&quot;&gt;</span><br><span class="line">              &lt;div&gt;</span><br><span class="line">                &lt;p&gt;</span><br><span class="line">                  &lt;span class=&quot;col&quot;&gt;朱继柳&lt;/span&gt; 发布了</span><br><span class="line">                  第1期“传智大讲堂”互动讨论获奖名单公布</span><br><span class="line">                &lt;/p&gt;</span><br><span class="line">                &lt;p&gt;2018-07-21 15:21:38&lt;/p&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;information-list-item&quot;&gt;</span><br><span class="line">              &lt;img src=&quot;@/assets/common/img.jpeg&quot; alt=&quot;&quot;&gt;</span><br><span class="line">              &lt;div&gt;</span><br><span class="line">                &lt;p&gt;</span><br><span class="line">                  &lt;span class=&quot;col&quot;&gt;朱继柳&lt;/span&gt; 发布了</span><br><span class="line">                  第1期“传智大讲堂”互动讨论获奖名单公布</span><br><span class="line">                &lt;/p&gt;</span><br><span class="line">                &lt;p&gt;2018-07-21 15:21:38&lt;/p&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;information-list-item&quot;&gt;</span><br><span class="line">              &lt;img src=&quot;@/assets/common/img.jpeg&quot; alt=&quot;&quot;&gt;</span><br><span class="line">              &lt;div&gt;</span><br><span class="line">                &lt;p&gt;</span><br><span class="line">                  &lt;span class=&quot;col&quot;&gt;朱继柳&lt;/span&gt; 发布了</span><br><span class="line">                  第1期“传智大讲堂”互动讨论获奖名单公布</span><br><span class="line">                &lt;/p&gt;</span><br><span class="line">                &lt;p&gt;2018-07-21 15:21:38&lt;/p&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import CountTo from &#x27;vue-count-to&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    CountTo</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;scss&quot;&gt;</span><br><span class="line">.dashboard &#123;</span><br><span class="line">  background: #f5f6f8;</span><br><span class="line">  width: 100%;</span><br><span class="line">  min-height: calc(100vh - 80px);</span><br><span class="line"></span><br><span class="line">  ::v-deep .el-calendar-day &#123;</span><br><span class="line">  height:  40px;</span><br><span class="line"> &#125;</span><br><span class="line"> ::v-deep .el-calendar-table__row td,::v-deep .el-calendar-table tr td:first-child, ::v-deep .el-calendar-table__row td.prev&#123;</span><br><span class="line">  border:none;</span><br><span class="line"> &#125;</span><br><span class="line">.date-content &#123;</span><br><span class="line">  height: 40px;</span><br><span class="line">  text-align: center;</span><br><span class="line">  line-height: 40px;</span><br><span class="line">  font-size: 14px;</span><br><span class="line">&#125;</span><br><span class="line">.date-content .rest &#123;</span><br><span class="line">  color: #fff;</span><br><span class="line">  border-radius: 50%;</span><br><span class="line">  background: rgb(250, 124, 77);</span><br><span class="line">  width: 20px;</span><br><span class="line">  height: 20px;</span><br><span class="line">  line-height: 20px;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  font-size: 12px;</span><br><span class="line">  margin-left: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.date-content .text&#123;</span><br><span class="line">  width: 20px;</span><br><span class="line">  height: 20px;</span><br><span class="line">  line-height: 20px;</span><br><span class="line"> display: inline-block;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">::v-deep .el-calendar-table td.is-selected .text&#123;</span><br><span class="line">   background: #409eff;</span><br><span class="line">   color: #fff;</span><br><span class="line">   border-radius: 50%;</span><br><span class="line"> &#125;</span><br><span class="line"> ::v-deep .el-calendar__header &#123;</span><br><span class="line">   display: none</span><br><span class="line"> &#125;</span><br><span class="line">  .container &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    .right &#123;</span><br><span class="line">      width: 40%;</span><br><span class="line">      .panel &#123;</span><br><span class="line">        margin-left: 8px;</span><br><span class="line">      &#125;</span><br><span class="line">      :nth-child(1) &#123;</span><br><span class="line">        margin-top: 0;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .left &#123;</span><br><span class="line">      flex: 1;</span><br><span class="line">      :nth-child(1) &#123;</span><br><span class="line">        margin-top: 0;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .panel &#123;</span><br><span class="line">      background-color: #fff;</span><br><span class="line"></span><br><span class="line">      margin-top: 8px;</span><br><span class="line">      padding: 20px;</span><br><span class="line">      .panel-title &#123;</span><br><span class="line">        font-size: 16px;</span><br><span class="line">        color: #383c4e;</span><br><span class="line">        font-weight: 500;</span><br><span class="line">      &#125;</span><br><span class="line">      // 用户信息样式</span><br><span class="line">      .user-info &#123;</span><br><span class="line">        display: flex;</span><br><span class="line">        .avatar &#123;</span><br><span class="line">          width: 48px;</span><br><span class="line">          height: 48px;</span><br><span class="line">          border-radius: 12px;</span><br><span class="line">          background-color: #d9d9d9;</span><br><span class="line">          line-height: 48px;</span><br><span class="line">          text-align: center;</span><br><span class="line">        &#125;</span><br><span class="line">         .username &#123;</span><br><span class="line">           width: 30px;</span><br><span class="line">           height: 30px;</span><br><span class="line">           text-align: center;</span><br><span class="line">           line-height: 30px;</span><br><span class="line">           border-radius: 50%;</span><br><span class="line">           background: #04c9be;</span><br><span class="line">           color: #fff;</span><br><span class="line">           margin-right: 4px;</span><br><span class="line">         &#125;</span><br><span class="line">        .company-info &#123;</span><br><span class="line">          margin-left: 10px;</span><br><span class="line">          height: 48px;</span><br><span class="line">          display: flex;</span><br><span class="line">          flex-direction: column;</span><br><span class="line">          justify-content: space-around;</span><br><span class="line">          .title &#123;</span><br><span class="line">            color: #383c4e;</span><br><span class="line">            font-weight: 500;</span><br><span class="line">            font-size: 16px;</span><br><span class="line">            font-family: PingFang SC, PingFang SC-Medium;</span><br><span class="line">            span &#123;</span><br><span class="line">              font-size: 12px;</span><br><span class="line">              background: #f5f6f8;</span><br><span class="line">              text-align: center;</span><br><span class="line">              padding: 2px 8px;</span><br><span class="line">              border-radius: 2px;</span><br><span class="line">              color: #697086;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          .depart &#123;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">            color: #697086;</span><br><span class="line">            font-weight: 400;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      // 代办样式</span><br><span class="line">      .todo-list &#123;</span><br><span class="line">        margin-top: 10px;</span><br><span class="line">        display: flex;</span><br><span class="line">        flex-wrap: wrap;</span><br><span class="line">        .todo-item &#123;</span><br><span class="line">          width: 18%;</span><br><span class="line">          height: 90px;</span><br><span class="line">          display: flex;</span><br><span class="line">          flex-direction: column;</span><br><span class="line">          padding: 10px;</span><br><span class="line">          justify-content: space-around;</span><br><span class="line">          :nth-child(1) &#123;</span><br><span class="line">            color: #697086;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">          &#125;</span><br><span class="line">          :nth-child(2) &#123;</span><br><span class="line">            color: #383c4e;</span><br><span class="line">            font-size: 30px;</span><br><span class="line">            font-weight: 500;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      // 快捷入口</span><br><span class="line">      .quick-entry &#123;</span><br><span class="line">        margin-top: 16px;</span><br><span class="line">        display: flex;</span><br><span class="line">        .entry-item &#123;</span><br><span class="line">          display: flex;</span><br><span class="line">          flex-direction: column;</span><br><span class="line">          align-items: center;</span><br><span class="line">          margin-left: 60px;</span><br><span class="line">          &amp;:nth-child(1) &#123;</span><br><span class="line">            margin-left: 0px;</span><br><span class="line">          &#125;</span><br><span class="line">          .entry-icon &#123;</span><br><span class="line">            width: 40px;</span><br><span class="line">            height: 40px;</span><br><span class="line">            border-radius: 10px;</span><br><span class="line">            background: #f5f6f8;</span><br><span class="line">            background-size: cover;</span><br><span class="line">            &amp;.approval &#123;</span><br><span class="line">              background-image: url(&#x27;~@/assets/common/approval.png&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">             &amp;.social &#123;</span><br><span class="line">              background-image: url(&#x27;~@/assets/common/social.png&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">             &amp;.salary &#123;</span><br><span class="line">              background-image: url(&#x27;~@/assets/common/salary.png&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">            &amp;.role &#123;</span><br><span class="line">              background-image: url(&#x27;~@/assets/common/role.png&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">             &amp;.bpm &#123;</span><br><span class="line">              background-image: url(&#x27;~@/assets/common/bpm.png&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          span &#123;</span><br><span class="line">            color: #697086;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">            margin-top: 8px;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      // 图表数据</span><br><span class="line">      .chart-container &#123;</span><br><span class="line">        display: flex;</span><br><span class="line">        .chart-info &#123;</span><br><span class="line">         width: 240px;</span><br><span class="line">          margin-top: 10px;</span><br><span class="line">          .info-main &#123;</span><br><span class="line">            padding: 10px;</span><br><span class="line">            display: flex;</span><br><span class="line">            flex-direction: column;</span><br><span class="line">            :nth-child(1) &#123;</span><br><span class="line">              font-size: 14px;</span><br><span class="line">              color: #697086;</span><br><span class="line">            &#125;</span><br><span class="line">            :nth-child(2) &#123;</span><br><span class="line">              margin-top: 10px;</span><br><span class="line">              font-size: 30px;</span><br><span class="line">              color: #04c9be;</span><br><span class="line">              font-weight: 500;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          .info-list &#123;</span><br><span class="line">            background: #f5f6f8;</span><br><span class="line">            border-radius: 4px;</span><br><span class="line">            padding: 12px 15px;</span><br><span class="line">            display: flex;</span><br><span class="line">            flex-wrap: wrap;</span><br><span class="line">            align-items: center;</span><br><span class="line">            .info-list-item &#123;</span><br><span class="line">              width: 50%;</span><br><span class="line">              margin-top: 10px;</span><br><span class="line">              display: flex;</span><br><span class="line">              flex-direction: column;</span><br><span class="line"></span><br><span class="line">              :nth-child(1) &#123;</span><br><span class="line">                font-size: 14px;</span><br><span class="line">                color: #697086;</span><br><span class="line">              &#125;</span><br><span class="line">              :nth-child(2) &#123;</span><br><span class="line">                margin-top: 10px;</span><br><span class="line">                font-size: 30px;</span><br><span class="line">                color: #383c4e;</span><br><span class="line">                font-weight: 500;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .chart &#123;</span><br><span class="line">          flex:1</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      // 帮助链接</span><br><span class="line">      .help &#123;</span><br><span class="line">        display: flex;</span><br><span class="line">        .help-left &#123;</span><br><span class="line">          width: 40%;</span><br><span class="line">        &#125;</span><br><span class="line">        .help-right &#123;</span><br><span class="line">          flex: 1;</span><br><span class="line">        &#125;</span><br><span class="line">        .help-list &#123;</span><br><span class="line">          .help-block &#123;</span><br><span class="line">            background: #f5f6f8;</span><br><span class="line">            border-radius: 4px;</span><br><span class="line">            width: 264px;</span><br><span class="line">            height: 54px;</span><br><span class="line">            padding: 17px 10px;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">            color: #697086;</span><br><span class="line">            margin-top: 10px;</span><br><span class="line">            i &#123;</span><br><span class="line">              width: 14px;</span><br><span class="line">              height: 14px;</span><br><span class="line">              display: inline-block;</span><br><span class="line">              background-size: cover;</span><br><span class="line">              vertical-align: middle;</span><br><span class="line">            &#125;</span><br><span class="line">            i.icon-help &#123;</span><br><span class="line">              background-image: url(&quot;~@/assets/common/help.png&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">             i.icon-support &#123;</span><br><span class="line">              background-image: url(&quot;~@/assets/common/support.png&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">             i.icon-add &#123;</span><br><span class="line">              background-image: url(&quot;~@/assets/common/add.png&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">             i.icon-entry &#123;</span><br><span class="line">              background-image: url(&quot;~@/assets/common/entry.png&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      // 通知公告</span><br><span class="line">      .information-list &#123;</span><br><span class="line">        margin-top: 20px;</span><br><span class="line">        .information-list-item &#123;</span><br><span class="line">          display: flex;</span><br><span class="line">          align-items: center;</span><br><span class="line">          margin:15px 0;</span><br><span class="line">          img &#123;</span><br><span class="line">            width: 40px;</span><br><span class="line">            height: 40px;</span><br><span class="line">            border: 50%;</span><br><span class="line">          &#125;</span><br><span class="line">         .col &#123;</span><br><span class="line">           color: #8a97f8;</span><br><span class="line">         &#125;</span><br><span class="line">         div :nth-child(2) &#123;</span><br><span class="line">          color: #697086;</span><br><span class="line">          font-size: 14px;</span><br><span class="line">         &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>安装数字滚动插件-vue-count-to</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i vue-count-to</span><br></pre></td></tr></table></figure>
<ul>
<li>首页基本结构-代码位置(<strong>src/views/dashboard/index.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;dashboard&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;!-- 左侧内容 --&gt;</span><br><span class="line">      &lt;div class=&quot;left&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;!-- 个人信息 --&gt;</span><br><span class="line">          &lt;div class=&quot;user-info&quot;&gt;</span><br><span class="line">            &lt;img class=&quot;avatar&quot; src=&quot;../../assets/common/defaultHead.png&quot; alt=&quot;&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;company-info&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;title&quot;&gt;</span><br><span class="line">                江苏传智播客教育科技股份有限公司</span><br><span class="line">                &lt;span&gt;体验版&lt;/span&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;depart&quot;&gt;庆山 ｜ 传智播客-总裁办&lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;!-- 代办 --&gt;</span><br><span class="line">          &lt;div class=&quot;todo-list&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;组织总人数&lt;/span&gt;</span><br><span class="line">              &lt;!-- 起始值 终点值  滚动时间 --&gt;</span><br><span class="line">              &lt;count-to</span><br><span class="line">                :start-val=&quot;0&quot;</span><br><span class="line">                :end-val=&quot;228&quot;</span><br><span class="line">                :duration=&quot;1000&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;正式员工&lt;/span&gt;</span><br><span class="line">              &lt;count-to</span><br><span class="line">                :start-val=&quot;0&quot;</span><br><span class="line">                :end-val=&quot;334&quot;</span><br><span class="line">                :duration=&quot;1000&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;合同待签署&lt;/span&gt;</span><br><span class="line">              &lt;count-to</span><br><span class="line">                :start-val=&quot;0&quot;</span><br><span class="line">                :end-val=&quot;345&quot;</span><br><span class="line">                :duration=&quot;1000&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;待入职&lt;/span&gt;</span><br><span class="line">              &lt;count-to</span><br><span class="line">                :start-val=&quot;0&quot;</span><br><span class="line">                :end-val=&quot;890&quot;</span><br><span class="line">                :duration=&quot;1000&quot;</span><br><span class="line">              /&gt;            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;本月待转正&lt;/span&gt;</span><br><span class="line">              &lt;count-to</span><br><span class="line">                :start-val=&quot;0&quot;</span><br><span class="line">                :end-val=&quot;117&quot;</span><br><span class="line">                :duration=&quot;1000&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;本月待离职&lt;/span&gt;</span><br><span class="line">              &lt;count-to</span><br><span class="line">                :start-val=&quot;0&quot;</span><br><span class="line">                :end-val=&quot;234&quot;</span><br><span class="line">                :duration=&quot;1000&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;接口总访问&lt;/span&gt;</span><br><span class="line">              &lt;count-to</span><br><span class="line">                :start-val=&quot;0&quot;</span><br><span class="line">                :end-val=&quot;789&quot;</span><br><span class="line">                :duration=&quot;1000&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 快捷入口 --&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;panel-title&quot;&gt;快捷入口&lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;quick-entry&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;entry-item&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;entry-icon approval&quot; /&gt;</span><br><span class="line">              &lt;span&gt;假期审批&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;entry-item&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;entry-icon social&quot; /&gt;</span><br><span class="line">              &lt;span&gt;社保管理&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;entry-item&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;entry-icon role&quot; /&gt;</span><br><span class="line">              &lt;span&gt;角色管理&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;entry-item&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;entry-icon salary&quot; /&gt;</span><br><span class="line">              &lt;span&gt;薪资设置&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;entry-item&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;entry-icon bpm&quot; /&gt;</span><br><span class="line">              &lt;span&gt;流程设置&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 图表数据 --&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;panel-title&quot;&gt;社保申报数据&lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;chart-container&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;chart-info&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;info-main&quot;&gt;</span><br><span class="line">                &lt;span&gt;申报人数&lt;/span&gt;</span><br><span class="line">                &lt;count-to</span><br><span class="line">                  :start-val=&quot;0&quot;</span><br><span class="line">                  :end-val=&quot;223&quot;</span><br><span class="line">                  :duration=&quot;1000&quot;</span><br><span class="line">                /&gt;</span><br><span class="line"></span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;info-list&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;待申报(人)&lt;/span&gt;</span><br><span class="line">                  &lt;count-to</span><br><span class="line">                    :start-val=&quot;0&quot;</span><br><span class="line">                    :end-val=&quot;117&quot;</span><br><span class="line">                    :duration=&quot;1000&quot;</span><br><span class="line">                  /&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;申报中(人)&lt;/span&gt;</span><br><span class="line">                  &lt;count-to</span><br><span class="line">                    :start-val=&quot;0&quot;</span><br><span class="line">                    :end-val=&quot;167&quot;</span><br><span class="line">                    :duration=&quot;1000&quot;</span><br><span class="line">                  /&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;已申报(人)&lt;/span&gt;</span><br><span class="line">                  &lt;count-to</span><br><span class="line">                    :start-val=&quot;0&quot;</span><br><span class="line">                    :end-val=&quot;24&quot;</span><br><span class="line">                    :duration=&quot;1000&quot;</span><br><span class="line">                  /&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;chart&quot;&gt;</span><br><span class="line">              &lt;!-- 图表 --&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 图表数据 --&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;panel-title&quot;&gt;公积金申报数据&lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;chart-container&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;chart-info&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;info-main&quot;&gt;</span><br><span class="line">                &lt;span&gt;申报人数&lt;/span&gt;</span><br><span class="line">                &lt;count-to</span><br><span class="line">                  :start-val=&quot;0&quot;</span><br><span class="line">                  :end-val=&quot;335&quot;</span><br><span class="line">                  :duration=&quot;1000&quot;</span><br><span class="line">                /&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;info-list&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;待申报(人)&lt;/span&gt;</span><br><span class="line">                  &lt;count-to</span><br><span class="line">                    :start-val=&quot;0&quot;</span><br><span class="line">                    :end-val=&quot;345&quot;</span><br><span class="line">                    :duration=&quot;1000&quot;</span><br><span class="line">                  /&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;申报中(人)&lt;/span&gt;</span><br><span class="line">                  &lt;count-to</span><br><span class="line">                    :start-val=&quot;0&quot;</span><br><span class="line">                    :end-val=&quot;109&quot;</span><br><span class="line">                    :duration=&quot;1000&quot;</span><br><span class="line">                  /&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;已申报(人)&lt;/span&gt;</span><br><span class="line">                  &lt;count-to</span><br><span class="line">                    :start-val=&quot;0&quot;</span><br><span class="line">                    :end-val=&quot;77&quot;</span><br><span class="line">                    :duration=&quot;1000&quot;</span><br><span class="line">                  /&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;chart&quot;&gt;</span><br><span class="line">              &lt;!-- 图表 --&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- 右侧内容 --&gt;</span><br><span class="line">      &lt;div class=&quot;right&quot;&gt;</span><br><span class="line">        &lt;!-- 帮助链接 --&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;help&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;help-left&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;panel-title&quot;&gt;帮助链接&lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;help-list&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;help-block&quot;&gt;</span><br><span class="line">                  &lt;i class=&quot;icon-entry&quot; /&gt;</span><br><span class="line">                  入门指南</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;help-block&quot;&gt;</span><br><span class="line">                  &lt;i class=&quot;icon-help&quot; /&gt;</span><br><span class="line">                  在线帮助手册</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;help-block&quot;&gt;</span><br><span class="line">                  &lt;i class=&quot;icon-support&quot; /&gt;</span><br><span class="line">                  联系技术支持</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;help-block&quot;&gt;</span><br><span class="line">                  &lt;i class=&quot;icon-add&quot; /&gt;</span><br><span class="line">                  添加链接</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;help-right&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;calendar&quot;&gt;</span><br><span class="line">                &lt;!-- &lt;el-calendar /&gt; --&gt;</span><br><span class="line">                &lt;el-calendar /&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 通知公告 --&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;panel-title&quot;&gt;通知公告&lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;information-list&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;information-list-item&quot;&gt;</span><br><span class="line">              &lt;img src=&quot;@/assets/common/img.jpeg&quot; alt=&quot;&quot;&gt;</span><br><span class="line">              &lt;div&gt;</span><br><span class="line">                &lt;p&gt;</span><br><span class="line">                  &lt;span class=&quot;col&quot;&gt;朱继柳&lt;/span&gt; 发布了</span><br><span class="line">                  第1期“传智大讲堂”互动讨论获奖名单公布</span><br><span class="line">                &lt;/p&gt;</span><br><span class="line">                &lt;p&gt;2018-07-21 15:21:38&lt;/p&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;information-list-item&quot;&gt;</span><br><span class="line">              &lt;img src=&quot;@/assets/common/img.jpeg&quot; alt=&quot;&quot;&gt;</span><br><span class="line">              &lt;div&gt;</span><br><span class="line">                &lt;p&gt;</span><br><span class="line">                  &lt;span class=&quot;col&quot;&gt;朱继柳&lt;/span&gt; 发布了</span><br><span class="line">                  第1期“传智大讲堂”互动讨论获奖名单公布</span><br><span class="line">                &lt;/p&gt;</span><br><span class="line">                &lt;p&gt;2018-07-21 15:21:38&lt;/p&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;information-list-item&quot;&gt;</span><br><span class="line">              &lt;img src=&quot;@/assets/common/img.jpeg&quot; alt=&quot;&quot;&gt;</span><br><span class="line">              &lt;div&gt;</span><br><span class="line">                &lt;p&gt;</span><br><span class="line">                  &lt;span class=&quot;col&quot;&gt;朱继柳&lt;/span&gt; 发布了</span><br><span class="line">                  第1期“传智大讲堂”互动讨论获奖名单公布</span><br><span class="line">                &lt;/p&gt;</span><br><span class="line">                &lt;p&gt;2018-07-21 15:21:38&lt;/p&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import CountTo from &#x27;vue-count-to&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    CountTo</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;scss&quot;&gt;</span><br><span class="line">.dashboard &#123;</span><br><span class="line">  background: #f5f6f8;</span><br><span class="line">  width: 100%;</span><br><span class="line">  min-height: calc(100vh - 80px);</span><br><span class="line"></span><br><span class="line">  ::v-deep .el-calendar-day &#123;</span><br><span class="line">  height:  40px;</span><br><span class="line"> &#125;</span><br><span class="line"> ::v-deep .el-calendar-table__row td,::v-deep .el-calendar-table tr td:first-child, ::v-deep .el-calendar-table__row td.prev&#123;</span><br><span class="line">  border:none;</span><br><span class="line"> &#125;</span><br><span class="line">.date-content &#123;</span><br><span class="line">  height: 40px;</span><br><span class="line">  text-align: center;</span><br><span class="line">  line-height: 40px;</span><br><span class="line">  font-size: 14px;</span><br><span class="line">&#125;</span><br><span class="line">.date-content .rest &#123;</span><br><span class="line">  color: #fff;</span><br><span class="line">  border-radius: 50%;</span><br><span class="line">  background: rgb(250, 124, 77);</span><br><span class="line">  width: 20px;</span><br><span class="line">  height: 20px;</span><br><span class="line">  line-height: 20px;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  font-size: 12px;</span><br><span class="line">  margin-left: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.date-content .text&#123;</span><br><span class="line">  width: 20px;</span><br><span class="line">  height: 20px;</span><br><span class="line">  line-height: 20px;</span><br><span class="line"> display: inline-block;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">::v-deep .el-calendar-table td.is-selected .text&#123;</span><br><span class="line">   background: #409eff;</span><br><span class="line">   color: #fff;</span><br><span class="line">   border-radius: 50%;</span><br><span class="line"> &#125;</span><br><span class="line"> ::v-deep .el-calendar__header &#123;</span><br><span class="line">   display: none</span><br><span class="line"> &#125;</span><br><span class="line">  .container &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    .right &#123;</span><br><span class="line">      width: 40%;</span><br><span class="line">      .panel &#123;</span><br><span class="line">        margin-left: 8px;</span><br><span class="line">      &#125;</span><br><span class="line">      :nth-child(1) &#123;</span><br><span class="line">        margin-top: 0;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .left &#123;</span><br><span class="line">      flex: 1;</span><br><span class="line">      :nth-child(1) &#123;</span><br><span class="line">        margin-top: 0;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .panel &#123;</span><br><span class="line">      background-color: #fff;</span><br><span class="line"></span><br><span class="line">      margin-top: 8px;</span><br><span class="line">      padding: 20px;</span><br><span class="line">      .panel-title &#123;</span><br><span class="line">        font-size: 16px;</span><br><span class="line">        color: #383c4e;</span><br><span class="line">        font-weight: 500;</span><br><span class="line">      &#125;</span><br><span class="line">      // 用户信息样式</span><br><span class="line">      .user-info &#123;</span><br><span class="line">        display: flex;</span><br><span class="line">        .avatar &#123;</span><br><span class="line">          width: 48px;</span><br><span class="line">          height: 48px;</span><br><span class="line">          border-radius: 12px;</span><br><span class="line">          background-color: #d9d9d9;</span><br><span class="line">          line-height: 48px;</span><br><span class="line">          text-align: center;</span><br><span class="line">        &#125;</span><br><span class="line">         .username &#123;</span><br><span class="line">           width: 30px;</span><br><span class="line">           height: 30px;</span><br><span class="line">           text-align: center;</span><br><span class="line">           line-height: 30px;</span><br><span class="line">           border-radius: 50%;</span><br><span class="line">           background: #04c9be;</span><br><span class="line">           color: #fff;</span><br><span class="line">           margin-right: 4px;</span><br><span class="line">         &#125;</span><br><span class="line">        .company-info &#123;</span><br><span class="line">          margin-left: 10px;</span><br><span class="line">          height: 48px;</span><br><span class="line">          display: flex;</span><br><span class="line">          flex-direction: column;</span><br><span class="line">          justify-content: space-around;</span><br><span class="line">          .title &#123;</span><br><span class="line">            color: #383c4e;</span><br><span class="line">            font-weight: 500;</span><br><span class="line">            font-size: 16px;</span><br><span class="line">            font-family: PingFang SC, PingFang SC-Medium;</span><br><span class="line">            span &#123;</span><br><span class="line">              font-size: 12px;</span><br><span class="line">              background: #f5f6f8;</span><br><span class="line">              text-align: center;</span><br><span class="line">              padding: 2px 8px;</span><br><span class="line">              border-radius: 2px;</span><br><span class="line">              color: #697086;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          .depart &#123;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">            color: #697086;</span><br><span class="line">            font-weight: 400;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      // 代办样式</span><br><span class="line">      .todo-list &#123;</span><br><span class="line">        margin-top: 10px;</span><br><span class="line">        display: flex;</span><br><span class="line">        flex-wrap: wrap;</span><br><span class="line">        .todo-item &#123;</span><br><span class="line">          width: 18%;</span><br><span class="line">          height: 90px;</span><br><span class="line">          display: flex;</span><br><span class="line">          flex-direction: column;</span><br><span class="line">          padding: 10px;</span><br><span class="line">          justify-content: space-around;</span><br><span class="line">          :nth-child(1) &#123;</span><br><span class="line">            color: #697086;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">          &#125;</span><br><span class="line">          :nth-child(2) &#123;</span><br><span class="line">            color: #383c4e;</span><br><span class="line">            font-size: 30px;</span><br><span class="line">            font-weight: 500;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      // 快捷入口</span><br><span class="line">      .quick-entry &#123;</span><br><span class="line">        margin-top: 16px;</span><br><span class="line">        display: flex;</span><br><span class="line">        .entry-item &#123;</span><br><span class="line">          display: flex;</span><br><span class="line">          flex-direction: column;</span><br><span class="line">          align-items: center;</span><br><span class="line">          margin-left: 60px;</span><br><span class="line">          &amp;:nth-child(1) &#123;</span><br><span class="line">            margin-left: 0px;</span><br><span class="line">          &#125;</span><br><span class="line">          .entry-icon &#123;</span><br><span class="line">            width: 40px;</span><br><span class="line">            height: 40px;</span><br><span class="line">            border-radius: 10px;</span><br><span class="line">            background: #f5f6f8;</span><br><span class="line">            background-size: cover;</span><br><span class="line">            &amp;.approval &#123;</span><br><span class="line">              background-image: url(&#x27;~@/assets/common/approval.png&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">             &amp;.social &#123;</span><br><span class="line">              background-image: url(&#x27;~@/assets/common/social.png&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">             &amp;.salary &#123;</span><br><span class="line">              background-image: url(&#x27;~@/assets/common/salary.png&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">            &amp;.role &#123;</span><br><span class="line">              background-image: url(&#x27;~@/assets/common/role.png&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">             &amp;.bpm &#123;</span><br><span class="line">              background-image: url(&#x27;~@/assets/common/bpm.png&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          span &#123;</span><br><span class="line">            color: #697086;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">            margin-top: 8px;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      // 图表数据</span><br><span class="line">      .chart-container &#123;</span><br><span class="line">        display: flex;</span><br><span class="line">        .chart-info &#123;</span><br><span class="line">         width: 240px;</span><br><span class="line">          margin-top: 10px;</span><br><span class="line">          .info-main &#123;</span><br><span class="line">            padding: 10px;</span><br><span class="line">            display: flex;</span><br><span class="line">            flex-direction: column;</span><br><span class="line">            :nth-child(1) &#123;</span><br><span class="line">              font-size: 14px;</span><br><span class="line">              color: #697086;</span><br><span class="line">            &#125;</span><br><span class="line">            :nth-child(2) &#123;</span><br><span class="line">              margin-top: 10px;</span><br><span class="line">              font-size: 30px;</span><br><span class="line">              color: #04c9be;</span><br><span class="line">              font-weight: 500;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          .info-list &#123;</span><br><span class="line">            background: #f5f6f8;</span><br><span class="line">            border-radius: 4px;</span><br><span class="line">            padding: 12px 15px;</span><br><span class="line">            display: flex;</span><br><span class="line">            flex-wrap: wrap;</span><br><span class="line">            align-items: center;</span><br><span class="line">            .info-list-item &#123;</span><br><span class="line">              width: 50%;</span><br><span class="line">              margin-top: 10px;</span><br><span class="line">              display: flex;</span><br><span class="line">              flex-direction: column;</span><br><span class="line"></span><br><span class="line">              :nth-child(1) &#123;</span><br><span class="line">                font-size: 14px;</span><br><span class="line">                color: #697086;</span><br><span class="line">              &#125;</span><br><span class="line">              :nth-child(2) &#123;</span><br><span class="line">                margin-top: 10px;</span><br><span class="line">                font-size: 30px;</span><br><span class="line">                color: #383c4e;</span><br><span class="line">                font-weight: 500;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .chart &#123;</span><br><span class="line">          flex:1</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      // 帮助链接</span><br><span class="line">      .help &#123;</span><br><span class="line">        display: flex;</span><br><span class="line">        .help-left &#123;</span><br><span class="line">          width: 40%;</span><br><span class="line">        &#125;</span><br><span class="line">        .help-right &#123;</span><br><span class="line">          flex: 1;</span><br><span class="line">        &#125;</span><br><span class="line">        .help-list &#123;</span><br><span class="line">          .help-block &#123;</span><br><span class="line">            background: #f5f6f8;</span><br><span class="line">            border-radius: 4px;</span><br><span class="line">            width: 264px;</span><br><span class="line">            height: 54px;</span><br><span class="line">            padding: 17px 10px;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">            color: #697086;</span><br><span class="line">            margin-top: 10px;</span><br><span class="line">            i &#123;</span><br><span class="line">              width: 14px;</span><br><span class="line">              height: 14px;</span><br><span class="line">              display: inline-block;</span><br><span class="line">              background-size: cover;</span><br><span class="line">              vertical-align: middle;</span><br><span class="line">            &#125;</span><br><span class="line">            i.icon-help &#123;</span><br><span class="line">              background-image: url(&quot;~@/assets/common/help.png&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">             i.icon-support &#123;</span><br><span class="line">              background-image: url(&quot;~@/assets/common/support.png&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">             i.icon-add &#123;</span><br><span class="line">              background-image: url(&quot;~@/assets/common/add.png&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">             i.icon-entry &#123;</span><br><span class="line">              background-image: url(&quot;~@/assets/common/entry.png&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      // 通知公告</span><br><span class="line">      .information-list &#123;</span><br><span class="line">        margin-top: 20px;</span><br><span class="line">        .information-list-item &#123;</span><br><span class="line">          display: flex;</span><br><span class="line">          align-items: center;</span><br><span class="line">          margin:15px 0;</span><br><span class="line">          img &#123;</span><br><span class="line">            width: 40px;</span><br><span class="line">            height: 40px;</span><br><span class="line">            border: 50%;</span><br><span class="line">          &#125;</span><br><span class="line">         .col &#123;</span><br><span class="line">           color: #8a97f8;</span><br><span class="line">         &#125;</span><br><span class="line">         div :nth-child(2) &#123;</span><br><span class="line">          color: #697086;</span><br><span class="line">          font-size: 14px;</span><br><span class="line">         &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="3-首页—个人信息展示"><a href="#3-首页—个人信息展示" class="headerlink" title="3.首页—个人信息展示"></a>3.首页—个人信息展示</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022030345.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022031149.png" alt="image.png"></p>
<ul>
<li>在getters中开放公司名称和所在部门属性-代码位置(<strong>src/store/getters.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getters = &#123;</span><br><span class="line">  <span class="attr">sidebar</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">app</span>.<span class="property">sidebar</span>,</span><br><span class="line">  <span class="attr">device</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">app</span>.<span class="property">device</span>,</span><br><span class="line">  <span class="attr">token</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">user</span>.<span class="property">token</span>,</span><br><span class="line">  <span class="attr">userId</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">user</span>.<span class="property">userInfo</span>.<span class="property">userId</span>,</span><br><span class="line">  <span class="attr">avatar</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">user</span>.<span class="property">userInfo</span>.<span class="property">staffPhoto</span>, <span class="comment">// 头像</span></span><br><span class="line">  <span class="attr">name</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">user</span>.<span class="property">userInfo</span>.<span class="property">username</span>, <span class="comment">// 用户名称</span></span><br><span class="line">  <span class="attr">routes</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">user</span>.<span class="property">routes</span>,</span><br><span class="line">  <span class="attr">company</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">user</span>.<span class="property">userInfo</span>.<span class="property">company</span>, <span class="comment">// 公司名称</span></span><br><span class="line">  <span class="attr">departmentName</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">user</span>.<span class="property">userInfo</span>.<span class="property">departmentName</span> <span class="comment">// 部门名称</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> getters</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>在首页将个人信息的数据替换成Vuex中的数据-代码位置(<strong>src/views/dashboard/index.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;dashboard&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;!-- 左侧内容 --&gt;</span><br><span class="line">      &lt;div class=&quot;left&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;!-- 个人信息 --&gt;</span><br><span class="line">          &lt;div class=&quot;user-info&quot;&gt;</span><br><span class="line">            &lt;img v-if=&quot;avatar&quot; class=&quot;avatar&quot; :src=&quot;avatar&quot; alt=&quot;&quot;&gt;</span><br><span class="line">            &lt;span v-else class=&quot;username&quot;&gt;&#123;&#123; name?.charAt(0) &#125;&#125;&lt;/span&gt;</span><br><span class="line">            &lt;div class=&quot;company-info&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;title&quot;&gt;</span><br><span class="line">                江苏传智播客教育科技股份有限公司</span><br><span class="line">                &lt;span&gt;体验版&lt;/span&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;depart&quot;&gt;&#123;&#123; name &#125;&#125; ｜ &#123;&#123; company &#125;&#125;-&#123;&#123; departmentName &#125;&#125;&lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;!-- 代办 --&gt;</span><br><span class="line">          &lt;div class=&quot;todo-list&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;组织总人数&lt;/span&gt;</span><br><span class="line">              &lt;!-- 起始值 终点值 动画时间 --&gt;</span><br><span class="line">              &lt;count-to</span><br><span class="line">                :start-val=&quot;0&quot;</span><br><span class="line">                :end-val=&quot;228&quot;</span><br><span class="line">                :duration=&quot;1000&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;正式员工&lt;/span&gt;</span><br><span class="line">              &lt;count-to</span><br><span class="line">                :start-val=&quot;0&quot;</span><br><span class="line">                :end-val=&quot;334&quot;</span><br><span class="line">                :duration=&quot;1000&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;合同待签署&lt;/span&gt;</span><br><span class="line">              &lt;count-to</span><br><span class="line">                :start-val=&quot;0&quot;</span><br><span class="line">                :end-val=&quot;345&quot;</span><br><span class="line">                :duration=&quot;1000&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;待入职&lt;/span&gt;</span><br><span class="line">              &lt;count-to</span><br><span class="line">                :start-val=&quot;0&quot;</span><br><span class="line">                :end-val=&quot;890&quot;</span><br><span class="line">                :duration=&quot;1000&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;本月待转正&lt;/span&gt;</span><br><span class="line">              &lt;count-to</span><br><span class="line">                :start-val=&quot;0&quot;</span><br><span class="line">                :end-val=&quot;117&quot;</span><br><span class="line">                :duration=&quot;1000&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;本月待离职&lt;/span&gt;</span><br><span class="line">              &lt;count-to</span><br><span class="line">                :start-val=&quot;0&quot;</span><br><span class="line">                :end-val=&quot;234&quot;</span><br><span class="line">                :duration=&quot;1000&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;接口总访问&lt;/span&gt;</span><br><span class="line">              &lt;count-to</span><br><span class="line">                :start-val=&quot;0&quot;</span><br><span class="line">                :end-val=&quot;789&quot;</span><br><span class="line">                :duration=&quot;1000&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 快捷入口 --&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;panel-title&quot;&gt;快捷入口&lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;quick-entry&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;entry-item&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;entry-icon approval&quot; /&gt;</span><br><span class="line">              &lt;span&gt;假期审批&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;entry-item&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;entry-icon social&quot; /&gt;</span><br><span class="line">              &lt;span&gt;社保管理&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;entry-item&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;entry-icon role&quot; /&gt;</span><br><span class="line">              &lt;span&gt;角色管理&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;entry-item&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;entry-icon salary&quot; /&gt;</span><br><span class="line">              &lt;span&gt;薪资设置&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;entry-item&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;entry-icon bpm&quot; /&gt;</span><br><span class="line">              &lt;span&gt;流程设置&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 图表数据 --&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;panel-title&quot;&gt;社保申报数据&lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;chart-container&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;chart-info&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;info-main&quot;&gt;</span><br><span class="line">                &lt;span&gt;申报人数&lt;/span&gt;</span><br><span class="line">                &lt;count-to</span><br><span class="line">                  :start-val=&quot;0&quot;</span><br><span class="line">                  :end-val=&quot;223&quot;</span><br><span class="line">                  :duration=&quot;1000&quot;</span><br><span class="line">                /&gt;</span><br><span class="line"></span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;info-list&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;待申报(人)&lt;/span&gt;</span><br><span class="line">                  &lt;count-to</span><br><span class="line">                    :start-val=&quot;0&quot;</span><br><span class="line">                    :end-val=&quot;117&quot;</span><br><span class="line">                    :duration=&quot;1000&quot;</span><br><span class="line">                  /&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;申报中(人)&lt;/span&gt;</span><br><span class="line">                  &lt;count-to</span><br><span class="line">                    :start-val=&quot;0&quot;</span><br><span class="line">                    :end-val=&quot;167&quot;</span><br><span class="line">                    :duration=&quot;1000&quot;</span><br><span class="line">                  /&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;已申报(人)&lt;/span&gt;</span><br><span class="line">                  &lt;count-to</span><br><span class="line">                    :start-val=&quot;0&quot;</span><br><span class="line">                    :end-val=&quot;24&quot;</span><br><span class="line">                    :duration=&quot;1000&quot;</span><br><span class="line">                  /&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;chart&quot;&gt;</span><br><span class="line">              &lt;!-- 图表 --&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 图表数据 --&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;panel-title&quot;&gt;公积金申报数据&lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;chart-container&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;chart-info&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;info-main&quot;&gt;</span><br><span class="line">                &lt;span&gt;申报人数&lt;/span&gt;</span><br><span class="line">                &lt;count-to</span><br><span class="line">                  :start-val=&quot;0&quot;</span><br><span class="line">                  :end-val=&quot;335&quot;</span><br><span class="line">                  :duration=&quot;1000&quot;</span><br><span class="line">                /&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;info-list&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;待申报(人)&lt;/span&gt;</span><br><span class="line">                  &lt;count-to</span><br><span class="line">                    :start-val=&quot;0&quot;</span><br><span class="line">                    :end-val=&quot;345&quot;</span><br><span class="line">                    :duration=&quot;1000&quot;</span><br><span class="line">                  /&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;申报中(人)&lt;/span&gt;</span><br><span class="line">                  &lt;count-to</span><br><span class="line">                    :start-val=&quot;0&quot;</span><br><span class="line">                    :end-val=&quot;109&quot;</span><br><span class="line">                    :duration=&quot;1000&quot;</span><br><span class="line">                  /&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;已申报(人)&lt;/span&gt;</span><br><span class="line">                  &lt;count-to</span><br><span class="line">                    :start-val=&quot;0&quot;</span><br><span class="line">                    :end-val=&quot;77&quot;</span><br><span class="line">                    :duration=&quot;1000&quot;</span><br><span class="line">                  /&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;chart&quot;&gt;</span><br><span class="line">              &lt;!-- 图表 --&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- 右侧内容 --&gt;</span><br><span class="line">      &lt;div class=&quot;right&quot;&gt;</span><br><span class="line">        &lt;!-- 帮助链接 --&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;help&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;help-left&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;panel-title&quot;&gt;帮助链接&lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;help-list&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;help-block&quot;&gt;</span><br><span class="line">                  &lt;i class=&quot;icon-entry&quot; /&gt;</span><br><span class="line">                  入门指南</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;help-block&quot;&gt;</span><br><span class="line">                  &lt;i class=&quot;icon-help&quot; /&gt;</span><br><span class="line">                  在线帮助手册</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;help-block&quot;&gt;</span><br><span class="line">                  &lt;i class=&quot;icon-support&quot; /&gt;</span><br><span class="line">                  联系技术支持</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;help-block&quot;&gt;</span><br><span class="line">                  &lt;i class=&quot;icon-add&quot; /&gt;</span><br><span class="line">                  添加链接</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;help-right&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;calendar&quot;&gt;</span><br><span class="line">                &lt;!-- &lt;el-calendar /&gt; --&gt;</span><br><span class="line">                &lt;el-calendar /&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 通知公告 --&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;panel-title&quot;&gt;通知公告&lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;information-list&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;information-list-item&quot;&gt;</span><br><span class="line">              &lt;img src=&quot;@/assets/common/img.jpeg&quot; alt=&quot;&quot;&gt;</span><br><span class="line">              &lt;div&gt;</span><br><span class="line">                &lt;p&gt;</span><br><span class="line">                  &lt;span class=&quot;col&quot;&gt;朱继柳&lt;/span&gt; 发布了</span><br><span class="line">                  第1期“传智大讲堂”互动讨论获奖名单公布</span><br><span class="line">                &lt;/p&gt;</span><br><span class="line">                &lt;p&gt;2018-07-21 15:21:38&lt;/p&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;information-list-item&quot;&gt;</span><br><span class="line">              &lt;img src=&quot;@/assets/common/img.jpeg&quot; alt=&quot;&quot;&gt;</span><br><span class="line">              &lt;div&gt;</span><br><span class="line">                &lt;p&gt;</span><br><span class="line">                  &lt;span class=&quot;col&quot;&gt;朱继柳&lt;/span&gt; 发布了</span><br><span class="line">                  第1期“传智大讲堂”互动讨论获奖名单公布</span><br><span class="line">                &lt;/p&gt;</span><br><span class="line">                &lt;p&gt;2018-07-21 15:21:38&lt;/p&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;information-list-item&quot;&gt;</span><br><span class="line">              &lt;img src=&quot;@/assets/common/img.jpeg&quot; alt=&quot;&quot;&gt;</span><br><span class="line">              &lt;div&gt;</span><br><span class="line">                &lt;p&gt;</span><br><span class="line">                  &lt;span class=&quot;col&quot;&gt;朱继柳&lt;/span&gt; 发布了</span><br><span class="line">                  第1期“传智大讲堂”互动讨论获奖名单公布</span><br><span class="line">                &lt;/p&gt;</span><br><span class="line">                &lt;p&gt;2018-07-21 15:21:38&lt;/p&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import CountTo from &#x27;vue-count-to&#x27;</span><br><span class="line">import &#123; mapGetters &#125; from &#x27;vuex&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    CountTo</span><br><span class="line">  &#125;,</span><br><span class="line">  // 计算属性</span><br><span class="line">  computed: &#123;</span><br><span class="line">    ...mapGetters([&#x27;name&#x27;, &#x27;avatar&#x27;, &#x27;company&#x27;, &#x27;departmentName&#x27;]) // 映射给了计算属性</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;scss&quot;&gt;</span><br><span class="line">.dashboard &#123;</span><br><span class="line">  background: #f5f6f8;</span><br><span class="line">  width: 100%;</span><br><span class="line">  min-height: calc(100vh - 80px);</span><br><span class="line"></span><br><span class="line">  ::v-deep .el-calendar-day &#123;</span><br><span class="line">  height:  40px;</span><br><span class="line"> &#125;</span><br><span class="line"> ::v-deep .el-calendar-table__row td,::v-deep .el-calendar-table tr td:first-child, ::v-deep .el-calendar-table__row td.prev&#123;</span><br><span class="line">  border:none;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">.date-content &#123;</span><br><span class="line">  height: 40px;</span><br><span class="line">  text-align: center;</span><br><span class="line">  line-height: 40px;</span><br><span class="line">  font-size: 14px;</span><br><span class="line">&#125;</span><br><span class="line">.date-content .rest &#123;</span><br><span class="line">  color: #fff;</span><br><span class="line">  border-radius: 50%;</span><br><span class="line">  background: rgb(250, 124, 77);</span><br><span class="line">  width: 20px;</span><br><span class="line">  height: 20px;</span><br><span class="line">  line-height: 20px;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  font-size: 12px;</span><br><span class="line">  margin-left: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.date-content .text&#123;</span><br><span class="line">  width: 20px;</span><br><span class="line">  height: 20px;</span><br><span class="line">  line-height: 20px;</span><br><span class="line"> display: inline-block;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">::v-deep .el-calendar-table td.is-selected .text&#123;</span><br><span class="line">   background: #409eff;</span><br><span class="line">   color: #fff;</span><br><span class="line">   border-radius: 50%;</span><br><span class="line"> &#125;</span><br><span class="line"> ::v-deep .el-calendar__header &#123;</span><br><span class="line">   display: none</span><br><span class="line"> &#125;</span><br><span class="line">  .container &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    .right &#123;</span><br><span class="line">      width: 40%;</span><br><span class="line">      .panel &#123;</span><br><span class="line">        margin-left: 8px;</span><br><span class="line">      &#125;</span><br><span class="line">      :nth-child(1) &#123;</span><br><span class="line">        margin-top: 0;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .left &#123;</span><br><span class="line">      flex: 1;</span><br><span class="line">      :nth-child(1) &#123;</span><br><span class="line">        margin-top: 0;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .panel &#123;</span><br><span class="line">      background-color: #fff;</span><br><span class="line"></span><br><span class="line">      margin-top: 8px;</span><br><span class="line">      padding: 20px;</span><br><span class="line">      .panel-title &#123;</span><br><span class="line">        font-size: 16px;</span><br><span class="line">        color: #383c4e;</span><br><span class="line">        font-weight: 500;</span><br><span class="line">      &#125;</span><br><span class="line">      // 用户信息样式</span><br><span class="line">      .user-info &#123;</span><br><span class="line">        display: flex;</span><br><span class="line">        .avatar &#123;</span><br><span class="line">          width: 48px;</span><br><span class="line">          height: 48px;</span><br><span class="line">          border-radius: 12px;</span><br><span class="line">          background-color: #d9d9d9;</span><br><span class="line">          line-height: 48px;</span><br><span class="line">          text-align: center;</span><br><span class="line">        &#125;</span><br><span class="line">         .username &#123;</span><br><span class="line">           width: 30px;</span><br><span class="line">           height: 30px;</span><br><span class="line">           text-align: center;</span><br><span class="line">           line-height: 30px;</span><br><span class="line">           border-radius: 50%;</span><br><span class="line">           background: #04c9be;</span><br><span class="line">           color: #fff;</span><br><span class="line">           margin-right: 4px;</span><br><span class="line">         &#125;</span><br><span class="line">        .company-info &#123;</span><br><span class="line">          margin-left: 10px;</span><br><span class="line">          height: 48px;</span><br><span class="line">          display: flex;</span><br><span class="line">          flex-direction: column;</span><br><span class="line">          justify-content: space-around;</span><br><span class="line">          .title &#123;</span><br><span class="line">            color: #383c4e;</span><br><span class="line">            font-weight: 500;</span><br><span class="line">            font-size: 16px;</span><br><span class="line">            font-family: PingFang SC, PingFang SC-Medium;</span><br><span class="line">            span &#123;</span><br><span class="line">              font-size: 12px;</span><br><span class="line">              background: #f5f6f8;</span><br><span class="line">              text-align: center;</span><br><span class="line">              padding: 2px 8px;</span><br><span class="line">              border-radius: 2px;</span><br><span class="line">              color: #697086;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          .depart &#123;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">            color: #697086;</span><br><span class="line">            font-weight: 400;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      // 代办样式</span><br><span class="line">      .todo-list &#123;</span><br><span class="line">        margin-top: 10px;</span><br><span class="line">        display: flex;</span><br><span class="line">        flex-wrap: wrap;</span><br><span class="line">        .todo-item &#123;</span><br><span class="line">          width: 18%;</span><br><span class="line">          height: 90px;</span><br><span class="line">          display: flex;</span><br><span class="line">          flex-direction: column;</span><br><span class="line">          padding: 10px;</span><br><span class="line">          justify-content: space-around;</span><br><span class="line">          :nth-child(1) &#123;</span><br><span class="line">            color: #697086;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">          &#125;</span><br><span class="line">          :nth-child(2) &#123;</span><br><span class="line">            color: #383c4e;</span><br><span class="line">            font-size: 30px;</span><br><span class="line">            font-weight: 500;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      // 快捷入口</span><br><span class="line">      .quick-entry &#123;</span><br><span class="line">        margin-top: 16px;</span><br><span class="line">        display: flex;</span><br><span class="line">        .entry-item &#123;</span><br><span class="line">          display: flex;</span><br><span class="line">          flex-direction: column;</span><br><span class="line">          align-items: center;</span><br><span class="line">          margin-left: 60px;</span><br><span class="line">          &amp;:nth-child(1) &#123;</span><br><span class="line">            margin-left: 0px;</span><br><span class="line">          &#125;</span><br><span class="line">          .entry-icon &#123;</span><br><span class="line">            width: 40px;</span><br><span class="line">            height: 40px;</span><br><span class="line">            border-radius: 10px;</span><br><span class="line">            background: #f5f6f8;</span><br><span class="line">            background-size: cover;</span><br><span class="line">            &amp;.approval &#123;</span><br><span class="line">              background-image: url(&#x27;~@/assets/common/approval.png&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">             &amp;.social &#123;</span><br><span class="line">              background-image: url(&#x27;~@/assets/common/social.png&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">             &amp;.salary &#123;</span><br><span class="line">              background-image: url(&#x27;~@/assets/common/salary.png&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">            &amp;.role &#123;</span><br><span class="line">              background-image: url(&#x27;~@/assets/common/role.png&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">             &amp;.bpm &#123;</span><br><span class="line">              background-image: url(&#x27;~@/assets/common/bpm.png&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          span &#123;</span><br><span class="line">            color: #697086;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">            margin-top: 8px;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      // 图表数据</span><br><span class="line">      .chart-container &#123;</span><br><span class="line">        display: flex;</span><br><span class="line">        .chart-info &#123;</span><br><span class="line">         width: 240px;</span><br><span class="line">          margin-top: 10px;</span><br><span class="line">          .info-main &#123;</span><br><span class="line">            padding: 10px;</span><br><span class="line">            display: flex;</span><br><span class="line">            flex-direction: column;</span><br><span class="line">            :nth-child(1) &#123;</span><br><span class="line">              font-size: 14px;</span><br><span class="line">              color: #697086;</span><br><span class="line">            &#125;</span><br><span class="line">            :nth-child(2) &#123;</span><br><span class="line">              margin-top: 10px;</span><br><span class="line">              font-size: 30px;</span><br><span class="line">              color: #04c9be;</span><br><span class="line">              font-weight: 500;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          .info-list &#123;</span><br><span class="line">            background: #f5f6f8;</span><br><span class="line">            border-radius: 4px;</span><br><span class="line">            padding: 12px 15px;</span><br><span class="line">            display: flex;</span><br><span class="line">            flex-wrap: wrap;</span><br><span class="line">            align-items: center;</span><br><span class="line">            .info-list-item &#123;</span><br><span class="line">              width: 50%;</span><br><span class="line">              margin-top: 10px;</span><br><span class="line">              display: flex;</span><br><span class="line">              flex-direction: column;</span><br><span class="line"></span><br><span class="line">              :nth-child(1) &#123;</span><br><span class="line">                font-size: 14px;</span><br><span class="line">                color: #697086;</span><br><span class="line">              &#125;</span><br><span class="line">              :nth-child(2) &#123;</span><br><span class="line">                margin-top: 10px;</span><br><span class="line">                font-size: 30px;</span><br><span class="line">                color: #383c4e;</span><br><span class="line">                font-weight: 500;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .chart &#123;</span><br><span class="line">          flex:1</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      // 帮助链接</span><br><span class="line">      .help &#123;</span><br><span class="line">        display: flex;</span><br><span class="line">        .help-left &#123;</span><br><span class="line">          width: 40%;</span><br><span class="line">        &#125;</span><br><span class="line">        .help-right &#123;</span><br><span class="line">          flex: 1;</span><br><span class="line">        &#125;</span><br><span class="line">        .help-list &#123;</span><br><span class="line">          .help-block &#123;</span><br><span class="line">            background: #f5f6f8;</span><br><span class="line">            border-radius: 4px;</span><br><span class="line">            width: 264px;</span><br><span class="line">            height: 54px;</span><br><span class="line">            padding: 17px 10px;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">            color: #697086;</span><br><span class="line">            margin-top: 10px;</span><br><span class="line">            i &#123;</span><br><span class="line">              width: 14px;</span><br><span class="line">              height: 14px;</span><br><span class="line">              display: inline-block;</span><br><span class="line">              background-size: cover;</span><br><span class="line">              vertical-align: middle;</span><br><span class="line">            &#125;</span><br><span class="line">            i.icon-help &#123;</span><br><span class="line">              background-image: url(&quot;~@/assets/common/help.png&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">             i.icon-support &#123;</span><br><span class="line">              background-image: url(&quot;~@/assets/common/support.png&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">             i.icon-add &#123;</span><br><span class="line">              background-image: url(&quot;~@/assets/common/add.png&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">             i.icon-entry &#123;</span><br><span class="line">              background-image: url(&quot;~@/assets/common/entry.png&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      // 通知公告</span><br><span class="line">      .information-list &#123;</span><br><span class="line">        margin-top: 20px;</span><br><span class="line">        .information-list-item &#123;</span><br><span class="line">          display: flex;</span><br><span class="line">          align-items: center;</span><br><span class="line">          margin:15px 0;</span><br><span class="line">          img &#123;</span><br><span class="line">            width: 40px;</span><br><span class="line">            height: 40px;</span><br><span class="line">            border: 50%;</span><br><span class="line">          &#125;</span><br><span class="line">         .col &#123;</span><br><span class="line">           color: #8a97f8;</span><br><span class="line">         &#125;</span><br><span class="line">         div :nth-child(2) &#123;</span><br><span class="line">          color: #697086;</span><br><span class="line">          font-size: 14px;</span><br><span class="line">         &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="4-首页—企业数据获取"><a href="#4-首页—企业数据获取" class="headerlink" title="4.首页—企业数据获取"></a>4.首页—企业数据获取</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022031893.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022031396.png" alt="image.png"></p>
<ul>
<li>封装获取数据的API-代码位置(<strong>src/api/home.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取首页数据</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getHomeData</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/home/data&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>初始化时获取数据，并替换企业数据-代码位置(<strong>src/views/dashboard/index.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;dashboard&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;!-- 左侧内容 --&gt;</span><br><span class="line">      &lt;div class=&quot;left&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;!-- 个人信息 --&gt;</span><br><span class="line">          &lt;div class=&quot;user-info&quot;&gt;</span><br><span class="line">            &lt;img v-if=&quot;avatar&quot; class=&quot;avatar&quot; :src=&quot;avatar&quot; alt=&quot;&quot;&gt;</span><br><span class="line">            &lt;span v-else class=&quot;username&quot;&gt;&#123;&#123; name?.charAt(0) &#125;&#125;&lt;/span&gt;</span><br><span class="line">            &lt;div class=&quot;company-info&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;title&quot;&gt;</span><br><span class="line">                江苏传智播客教育科技股份有限公司</span><br><span class="line">                &lt;span&gt;体验版&lt;/span&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;depart&quot;&gt;&#123;&#123; name &#125;&#125; ｜ &#123;&#123; company &#125;&#125;-&#123;&#123; departmentName &#125;&#125;&lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;!-- 代办 --&gt;</span><br><span class="line">          &lt;div class=&quot;todo-list&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;组织总人数&lt;/span&gt;</span><br><span class="line">              &lt;!-- 起始值 终点值 动画时间 --&gt;</span><br><span class="line">              &lt;count-to</span><br><span class="line">                :start-val=&quot;0&quot;</span><br><span class="line">                :end-val=&quot;homeData.employeeTotal&quot;</span><br><span class="line">                :duration=&quot;1000&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;正式员工&lt;/span&gt;</span><br><span class="line">              &lt;count-to</span><br><span class="line">                :start-val=&quot;0&quot;</span><br><span class="line">                :end-val=&quot;homeData.regularEmployeeTotal&quot;</span><br><span class="line">                :duration=&quot;1000&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;合同待签署&lt;/span&gt;</span><br><span class="line">              &lt;count-to</span><br><span class="line">                :start-val=&quot;0&quot;</span><br><span class="line">                :end-val=&quot;homeData.contractSignTotal&quot;</span><br><span class="line">                :duration=&quot;1000&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;待入职&lt;/span&gt;</span><br><span class="line">              &lt;count-to</span><br><span class="line">                :start-val=&quot;0&quot;</span><br><span class="line">                :end-val=&quot;homeData.toBeEmployed&quot;</span><br><span class="line">                :duration=&quot;1000&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;本月待转正&lt;/span&gt;</span><br><span class="line">              &lt;count-to</span><br><span class="line">                :start-val=&quot;0&quot;</span><br><span class="line">                :end-val=&quot;homeData.toBeConfirmed&quot;</span><br><span class="line">                :duration=&quot;1000&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;本月待离职&lt;/span&gt;</span><br><span class="line">              &lt;count-to</span><br><span class="line">                :start-val=&quot;0&quot;</span><br><span class="line">                :end-val=&quot;homeData.toBeDismissed&quot;</span><br><span class="line">                :duration=&quot;1000&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;接口总访问&lt;/span&gt;</span><br><span class="line">              &lt;count-to</span><br><span class="line">                :start-val=&quot;0&quot;</span><br><span class="line">                :end-val=&quot;homeData.interfaceAccessTotal&quot;</span><br><span class="line">                :duration=&quot;1000&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 快捷入口 --&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;panel-title&quot;&gt;快捷入口&lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;quick-entry&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;entry-item&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;entry-icon approval&quot; /&gt;</span><br><span class="line">              &lt;span&gt;假期审批&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;entry-item&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;entry-icon social&quot; /&gt;</span><br><span class="line">              &lt;span&gt;社保管理&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;entry-item&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;entry-icon role&quot; /&gt;</span><br><span class="line">              &lt;span&gt;角色管理&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;entry-item&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;entry-icon salary&quot; /&gt;</span><br><span class="line">              &lt;span&gt;薪资设置&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;entry-item&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;entry-icon bpm&quot; /&gt;</span><br><span class="line">              &lt;span&gt;流程设置&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 图表数据 --&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;panel-title&quot;&gt;社保申报数据&lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;chart-container&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;chart-info&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;info-main&quot;&gt;</span><br><span class="line">                &lt;span&gt;申报人数&lt;/span&gt;</span><br><span class="line">                &lt;!-- homeData: &#123;&#125; --&gt;</span><br><span class="line">                &lt;count-to</span><br><span class="line">                  :start-val=&quot;0&quot;</span><br><span class="line">                  :end-val=&quot;homeData.socialInsurance?.declarationTotal&quot;</span><br><span class="line">                  :duration=&quot;1000&quot;</span><br><span class="line">                /&gt;</span><br><span class="line"></span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;info-list&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;待申报(人)&lt;/span&gt;</span><br><span class="line">                  &lt;count-to</span><br><span class="line">                    :start-val=&quot;0&quot;</span><br><span class="line">                    :end-val=&quot;homeData.socialInsurance?.toDeclareTotal&quot;</span><br><span class="line">                    :duration=&quot;1000&quot;</span><br><span class="line">                  /&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;申报中(人)&lt;/span&gt;</span><br><span class="line">                  &lt;count-to</span><br><span class="line">                    :start-val=&quot;0&quot;</span><br><span class="line">                    :end-val=&quot;homeData.socialInsurance?.declaringTotal&quot;</span><br><span class="line">                    :duration=&quot;1000&quot;</span><br><span class="line">                  /&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;已申报(人)&lt;/span&gt;</span><br><span class="line">                  &lt;count-to</span><br><span class="line">                    :start-val=&quot;0&quot;</span><br><span class="line">                    :end-val=&quot;homeData.socialInsurance?.declaredTotal&quot;</span><br><span class="line">                    :duration=&quot;1000&quot;</span><br><span class="line">                  /&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;chart&quot;&gt;</span><br><span class="line">              &lt;!-- 图表 --&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 图表数据 --&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;panel-title&quot;&gt;公积金申报数据&lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;chart-container&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;chart-info&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;info-main&quot;&gt;</span><br><span class="line">                &lt;span&gt;申报人数&lt;/span&gt;</span><br><span class="line">                &lt;count-to</span><br><span class="line">                  :start-val=&quot;0&quot;</span><br><span class="line">                  :end-val=&quot;homeData.providentFund?.declarationTotal&quot;</span><br><span class="line">                  :duration=&quot;1000&quot;</span><br><span class="line">                /&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;info-list&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;待申报(人)&lt;/span&gt;</span><br><span class="line">                  &lt;count-to</span><br><span class="line">                    :start-val=&quot;0&quot;</span><br><span class="line">                    :end-val=&quot;homeData.providentFund?.toDeclareTotal&quot;</span><br><span class="line">                    :duration=&quot;1000&quot;</span><br><span class="line">                  /&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;申报中(人)&lt;/span&gt;</span><br><span class="line">                  &lt;count-to</span><br><span class="line">                    :start-val=&quot;0&quot;</span><br><span class="line">                    :end-val=&quot;homeData.providentFund?.declaringTotal&quot;</span><br><span class="line">                    :duration=&quot;1000&quot;</span><br><span class="line">                  /&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;已申报(人)&lt;/span&gt;</span><br><span class="line">                  &lt;count-to</span><br><span class="line">                    :start-val=&quot;0&quot;</span><br><span class="line">                    :end-val=&quot;homeData.providentFund?.declaredTotal&quot;</span><br><span class="line">                    :duration=&quot;1000&quot;</span><br><span class="line">                  /&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;chart&quot;&gt;</span><br><span class="line">              &lt;!-- 图表 --&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- 右侧内容 --&gt;</span><br><span class="line">      &lt;div class=&quot;right&quot;&gt;</span><br><span class="line">        &lt;!-- 帮助链接 --&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;help&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;help-left&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;panel-title&quot;&gt;帮助链接&lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;help-list&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;help-block&quot;&gt;</span><br><span class="line">                  &lt;i class=&quot;icon-entry&quot; /&gt;</span><br><span class="line">                  入门指南</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;help-block&quot;&gt;</span><br><span class="line">                  &lt;i class=&quot;icon-help&quot; /&gt;</span><br><span class="line">                  在线帮助手册</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;help-block&quot;&gt;</span><br><span class="line">                  &lt;i class=&quot;icon-support&quot; /&gt;</span><br><span class="line">                  联系技术支持</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;help-block&quot;&gt;</span><br><span class="line">                  &lt;i class=&quot;icon-add&quot; /&gt;</span><br><span class="line">                  添加链接</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;help-right&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;calendar&quot;&gt;</span><br><span class="line">                &lt;!-- &lt;el-calendar /&gt; --&gt;</span><br><span class="line">                &lt;el-calendar /&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 通知公告 --&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;panel-title&quot;&gt;通知公告&lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;information-list&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;information-list-item&quot;&gt;</span><br><span class="line">              &lt;img src=&quot;@/assets/common/img.jpeg&quot; alt=&quot;&quot;&gt;</span><br><span class="line">              &lt;div&gt;</span><br><span class="line">                &lt;p&gt;</span><br><span class="line">                  &lt;span class=&quot;col&quot;&gt;朱继柳&lt;/span&gt; 发布了</span><br><span class="line">                  第1期“传智大讲堂”互动讨论获奖名单公布</span><br><span class="line">                &lt;/p&gt;</span><br><span class="line">                &lt;p&gt;2018-07-21 15:21:38&lt;/p&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;information-list-item&quot;&gt;</span><br><span class="line">              &lt;img src=&quot;@/assets/common/img.jpeg&quot; alt=&quot;&quot;&gt;</span><br><span class="line">              &lt;div&gt;</span><br><span class="line">                &lt;p&gt;</span><br><span class="line">                  &lt;span class=&quot;col&quot;&gt;朱继柳&lt;/span&gt; 发布了</span><br><span class="line">                  第1期“传智大讲堂”互动讨论获奖名单公布</span><br><span class="line">                &lt;/p&gt;</span><br><span class="line">                &lt;p&gt;2018-07-21 15:21:38&lt;/p&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;information-list-item&quot;&gt;</span><br><span class="line">              &lt;img src=&quot;@/assets/common/img.jpeg&quot; alt=&quot;&quot;&gt;</span><br><span class="line">              &lt;div&gt;</span><br><span class="line">                &lt;p&gt;</span><br><span class="line">                  &lt;span class=&quot;col&quot;&gt;朱继柳&lt;/span&gt; 发布了</span><br><span class="line">                  第1期“传智大讲堂”互动讨论获奖名单公布</span><br><span class="line">                &lt;/p&gt;</span><br><span class="line">                &lt;p&gt;2018-07-21 15:21:38&lt;/p&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import CountTo from &#x27;vue-count-to&#x27;</span><br><span class="line">import &#123; mapGetters &#125; from &#x27;vuex&#x27;</span><br><span class="line">import &#123; getHomeData &#125; from &#x27;@/api/home&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    CountTo</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      homeData: &#123;&#125; // 存放首页数据的对象</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  // 计算属性</span><br><span class="line">  computed: &#123;</span><br><span class="line">    ...mapGetters([&#x27;name&#x27;, &#x27;avatar&#x27;, &#x27;company&#x27;, &#x27;departmentName&#x27;]) // 映射给了计算属性</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getHomeData()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    async getHomeData() &#123;</span><br><span class="line">      this.homeData = await getHomeData()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;scss&quot;&gt;</span><br><span class="line">.dashboard &#123;</span><br><span class="line">  background: #f5f6f8;</span><br><span class="line">  width: 100%;</span><br><span class="line">  min-height: calc(100vh - 80px);</span><br><span class="line"></span><br><span class="line">  ::v-deep .el-calendar-day &#123;</span><br><span class="line">  height:  40px;</span><br><span class="line"> &#125;</span><br><span class="line"> ::v-deep .el-calendar-table__row td,::v-deep .el-calendar-table tr td:first-child, ::v-deep .el-calendar-table__row td.prev&#123;</span><br><span class="line">  border:none;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">.date-content &#123;</span><br><span class="line">  height: 40px;</span><br><span class="line">  text-align: center;</span><br><span class="line">  line-height: 40px;</span><br><span class="line">  font-size: 14px;</span><br><span class="line">&#125;</span><br><span class="line">.date-content .rest &#123;</span><br><span class="line">  color: #fff;</span><br><span class="line">  border-radius: 50%;</span><br><span class="line">  background: rgb(250, 124, 77);</span><br><span class="line">  width: 20px;</span><br><span class="line">  height: 20px;</span><br><span class="line">  line-height: 20px;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  font-size: 12px;</span><br><span class="line">  margin-left: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.date-content .text&#123;</span><br><span class="line">  width: 20px;</span><br><span class="line">  height: 20px;</span><br><span class="line">  line-height: 20px;</span><br><span class="line"> display: inline-block;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">::v-deep .el-calendar-table td.is-selected .text&#123;</span><br><span class="line">   background: #409eff;</span><br><span class="line">   color: #fff;</span><br><span class="line">   border-radius: 50%;</span><br><span class="line"> &#125;</span><br><span class="line"> ::v-deep .el-calendar__header &#123;</span><br><span class="line">   display: none</span><br><span class="line"> &#125;</span><br><span class="line">  .container &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    .right &#123;</span><br><span class="line">      width: 40%;</span><br><span class="line">      .panel &#123;</span><br><span class="line">        margin-left: 8px;</span><br><span class="line">      &#125;</span><br><span class="line">      :nth-child(1) &#123;</span><br><span class="line">        margin-top: 0;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .left &#123;</span><br><span class="line">      flex: 1;</span><br><span class="line">      :nth-child(1) &#123;</span><br><span class="line">        margin-top: 0;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .panel &#123;</span><br><span class="line">      background-color: #fff;</span><br><span class="line"></span><br><span class="line">      margin-top: 8px;</span><br><span class="line">      padding: 20px;</span><br><span class="line">      .panel-title &#123;</span><br><span class="line">        font-size: 16px;</span><br><span class="line">        color: #383c4e;</span><br><span class="line">        font-weight: 500;</span><br><span class="line">      &#125;</span><br><span class="line">      // 用户信息样式</span><br><span class="line">      .user-info &#123;</span><br><span class="line">        display: flex;</span><br><span class="line">        .avatar &#123;</span><br><span class="line">          width: 48px;</span><br><span class="line">          height: 48px;</span><br><span class="line">          border-radius: 12px;</span><br><span class="line">          background-color: #d9d9d9;</span><br><span class="line">          line-height: 48px;</span><br><span class="line">          text-align: center;</span><br><span class="line">        &#125;</span><br><span class="line">         .username &#123;</span><br><span class="line">           width: 30px;</span><br><span class="line">           height: 30px;</span><br><span class="line">           text-align: center;</span><br><span class="line">           line-height: 30px;</span><br><span class="line">           border-radius: 50%;</span><br><span class="line">           background: #04c9be;</span><br><span class="line">           color: #fff;</span><br><span class="line">           margin-right: 4px;</span><br><span class="line">         &#125;</span><br><span class="line">        .company-info &#123;</span><br><span class="line">          margin-left: 10px;</span><br><span class="line">          height: 48px;</span><br><span class="line">          display: flex;</span><br><span class="line">          flex-direction: column;</span><br><span class="line">          justify-content: space-around;</span><br><span class="line">          .title &#123;</span><br><span class="line">            color: #383c4e;</span><br><span class="line">            font-weight: 500;</span><br><span class="line">            font-size: 16px;</span><br><span class="line">            font-family: PingFang SC, PingFang SC-Medium;</span><br><span class="line">            span &#123;</span><br><span class="line">              font-size: 12px;</span><br><span class="line">              background: #f5f6f8;</span><br><span class="line">              text-align: center;</span><br><span class="line">              padding: 2px 8px;</span><br><span class="line">              border-radius: 2px;</span><br><span class="line">              color: #697086;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          .depart &#123;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">            color: #697086;</span><br><span class="line">            font-weight: 400;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      // 代办样式</span><br><span class="line">      .todo-list &#123;</span><br><span class="line">        margin-top: 10px;</span><br><span class="line">        display: flex;</span><br><span class="line">        flex-wrap: wrap;</span><br><span class="line">        .todo-item &#123;</span><br><span class="line">          width: 18%;</span><br><span class="line">          height: 90px;</span><br><span class="line">          display: flex;</span><br><span class="line">          flex-direction: column;</span><br><span class="line">          padding: 10px;</span><br><span class="line">          justify-content: space-around;</span><br><span class="line">          :nth-child(1) &#123;</span><br><span class="line">            color: #697086;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">          &#125;</span><br><span class="line">          :nth-child(2) &#123;</span><br><span class="line">            color: #383c4e;</span><br><span class="line">            font-size: 30px;</span><br><span class="line">            font-weight: 500;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      // 快捷入口</span><br><span class="line">      .quick-entry &#123;</span><br><span class="line">        margin-top: 16px;</span><br><span class="line">        display: flex;</span><br><span class="line">        .entry-item &#123;</span><br><span class="line">          display: flex;</span><br><span class="line">          flex-direction: column;</span><br><span class="line">          align-items: center;</span><br><span class="line">          margin-left: 60px;</span><br><span class="line">          &amp;:nth-child(1) &#123;</span><br><span class="line">            margin-left: 0px;</span><br><span class="line">          &#125;</span><br><span class="line">          .entry-icon &#123;</span><br><span class="line">            width: 40px;</span><br><span class="line">            height: 40px;</span><br><span class="line">            border-radius: 10px;</span><br><span class="line">            background: #f5f6f8;</span><br><span class="line">            background-size: cover;</span><br><span class="line">            &amp;.approval &#123;</span><br><span class="line">              background-image: url(&#x27;~@/assets/common/approval.png&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">             &amp;.social &#123;</span><br><span class="line">              background-image: url(&#x27;~@/assets/common/social.png&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">             &amp;.salary &#123;</span><br><span class="line">              background-image: url(&#x27;~@/assets/common/salary.png&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">            &amp;.role &#123;</span><br><span class="line">              background-image: url(&#x27;~@/assets/common/role.png&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">             &amp;.bpm &#123;</span><br><span class="line">              background-image: url(&#x27;~@/assets/common/bpm.png&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          span &#123;</span><br><span class="line">            color: #697086;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">            margin-top: 8px;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      // 图表数据</span><br><span class="line">      .chart-container &#123;</span><br><span class="line">        display: flex;</span><br><span class="line">        .chart-info &#123;</span><br><span class="line">         width: 240px;</span><br><span class="line">          margin-top: 10px;</span><br><span class="line">          .info-main &#123;</span><br><span class="line">            padding: 10px;</span><br><span class="line">            display: flex;</span><br><span class="line">            flex-direction: column;</span><br><span class="line">            :nth-child(1) &#123;</span><br><span class="line">              font-size: 14px;</span><br><span class="line">              color: #697086;</span><br><span class="line">            &#125;</span><br><span class="line">            :nth-child(2) &#123;</span><br><span class="line">              margin-top: 10px;</span><br><span class="line">              font-size: 30px;</span><br><span class="line">              color: #04c9be;</span><br><span class="line">              font-weight: 500;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          .info-list &#123;</span><br><span class="line">            background: #f5f6f8;</span><br><span class="line">            border-radius: 4px;</span><br><span class="line">            padding: 12px 15px;</span><br><span class="line">            display: flex;</span><br><span class="line">            flex-wrap: wrap;</span><br><span class="line">            align-items: center;</span><br><span class="line">            .info-list-item &#123;</span><br><span class="line">              width: 50%;</span><br><span class="line">              margin-top: 10px;</span><br><span class="line">              display: flex;</span><br><span class="line">              flex-direction: column;</span><br><span class="line"></span><br><span class="line">              :nth-child(1) &#123;</span><br><span class="line">                font-size: 14px;</span><br><span class="line">                color: #697086;</span><br><span class="line">              &#125;</span><br><span class="line">              :nth-child(2) &#123;</span><br><span class="line">                margin-top: 10px;</span><br><span class="line">                font-size: 30px;</span><br><span class="line">                color: #383c4e;</span><br><span class="line">                font-weight: 500;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .chart &#123;</span><br><span class="line">          flex:1</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      // 帮助链接</span><br><span class="line">      .help &#123;</span><br><span class="line">        display: flex;</span><br><span class="line">        .help-left &#123;</span><br><span class="line">          width: 40%;</span><br><span class="line">        &#125;</span><br><span class="line">        .help-right &#123;</span><br><span class="line">          flex: 1;</span><br><span class="line">        &#125;</span><br><span class="line">        .help-list &#123;</span><br><span class="line">          .help-block &#123;</span><br><span class="line">            background: #f5f6f8;</span><br><span class="line">            border-radius: 4px;</span><br><span class="line">            width: 264px;</span><br><span class="line">            height: 54px;</span><br><span class="line">            padding: 17px 10px;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">            color: #697086;</span><br><span class="line">            margin-top: 10px;</span><br><span class="line">            i &#123;</span><br><span class="line">              width: 14px;</span><br><span class="line">              height: 14px;</span><br><span class="line">              display: inline-block;</span><br><span class="line">              background-size: cover;</span><br><span class="line">              vertical-align: middle;</span><br><span class="line">            &#125;</span><br><span class="line">            i.icon-help &#123;</span><br><span class="line">              background-image: url(&quot;~@/assets/common/help.png&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">             i.icon-support &#123;</span><br><span class="line">              background-image: url(&quot;~@/assets/common/support.png&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">             i.icon-add &#123;</span><br><span class="line">              background-image: url(&quot;~@/assets/common/add.png&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">             i.icon-entry &#123;</span><br><span class="line">              background-image: url(&quot;~@/assets/common/entry.png&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      // 通知公告</span><br><span class="line">      .information-list &#123;</span><br><span class="line">        margin-top: 20px;</span><br><span class="line">        .information-list-item &#123;</span><br><span class="line">          display: flex;</span><br><span class="line">          align-items: center;</span><br><span class="line">          margin:15px 0;</span><br><span class="line">          img &#123;</span><br><span class="line">            width: 40px;</span><br><span class="line">            height: 40px;</span><br><span class="line">            border: 50%;</span><br><span class="line">          &#125;</span><br><span class="line">         .col &#123;</span><br><span class="line">           color: #8a97f8;</span><br><span class="line">         &#125;</span><br><span class="line">         div :nth-child(2) &#123;</span><br><span class="line">          color: #697086;</span><br><span class="line">          font-size: 14px;</span><br><span class="line">         &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="5-首页—通知消息获取"><a href="#5-首页—通知消息获取" class="headerlink" title="5.首页—通知消息获取"></a>5.首页—通知消息获取</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022031478.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022032659.png" alt="image.png"></p>
<ul>
<li>封装获取消息的API-代码位置(<strong>src/api/home.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getMessageList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/home/notice&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>初始化时获取消息列表-代码位置(<strong>src/views/dashboard/index.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;dashboard&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;!-- 左侧内容 --&gt;</span><br><span class="line">      &lt;div class=&quot;left&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;!-- 个人信息 --&gt;</span><br><span class="line">          &lt;div class=&quot;user-info&quot;&gt;</span><br><span class="line">            &lt;img v-if=&quot;avatar&quot; class=&quot;avatar&quot; :src=&quot;avatar&quot; alt=&quot;&quot;&gt;</span><br><span class="line">            &lt;span v-else class=&quot;username&quot;&gt;&#123;&#123; name?.charAt(0) &#125;&#125;&lt;/span&gt;</span><br><span class="line">            &lt;div class=&quot;company-info&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;title&quot;&gt;</span><br><span class="line">                江苏传智播客教育科技股份有限公司</span><br><span class="line">                &lt;span&gt;体验版&lt;/span&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;depart&quot;&gt;&#123;&#123; name &#125;&#125; ｜ &#123;&#123; company &#125;&#125;-&#123;&#123; departmentName &#125;&#125;&lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;!-- 代办 --&gt;</span><br><span class="line">          &lt;div class=&quot;todo-list&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;组织总人数&lt;/span&gt;</span><br><span class="line">              &lt;!-- 起始值 终点值 动画时间 --&gt;</span><br><span class="line">              &lt;count-to</span><br><span class="line">                :start-val=&quot;0&quot;</span><br><span class="line">                :end-val=&quot;homeData.employeeTotal&quot;</span><br><span class="line">                :duration=&quot;1000&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;正式员工&lt;/span&gt;</span><br><span class="line">              &lt;count-to</span><br><span class="line">                :start-val=&quot;0&quot;</span><br><span class="line">                :end-val=&quot;homeData.regularEmployeeTotal&quot;</span><br><span class="line">                :duration=&quot;1000&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;合同待签署&lt;/span&gt;</span><br><span class="line">              &lt;count-to</span><br><span class="line">                :start-val=&quot;0&quot;</span><br><span class="line">                :end-val=&quot;homeData.contractSignTotal&quot;</span><br><span class="line">                :duration=&quot;1000&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;待入职&lt;/span&gt;</span><br><span class="line">              &lt;count-to</span><br><span class="line">                :start-val=&quot;0&quot;</span><br><span class="line">                :end-val=&quot;homeData.toBeEmployed&quot;</span><br><span class="line">                :duration=&quot;1000&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;本月待转正&lt;/span&gt;</span><br><span class="line">              &lt;count-to</span><br><span class="line">                :start-val=&quot;0&quot;</span><br><span class="line">                :end-val=&quot;homeData.toBeConfirmed&quot;</span><br><span class="line">                :duration=&quot;1000&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;本月待离职&lt;/span&gt;</span><br><span class="line">              &lt;count-to</span><br><span class="line">                :start-val=&quot;0&quot;</span><br><span class="line">                :end-val=&quot;homeData.toBeDismissed&quot;</span><br><span class="line">                :duration=&quot;1000&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;todo-item&quot;&gt;</span><br><span class="line">              &lt;span&gt;接口总访问&lt;/span&gt;</span><br><span class="line">              &lt;count-to</span><br><span class="line">                :start-val=&quot;0&quot;</span><br><span class="line">                :end-val=&quot;homeData.interfaceAccessTotal&quot;</span><br><span class="line">                :duration=&quot;1000&quot;</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 快捷入口 --&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;panel-title&quot;&gt;快捷入口&lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;quick-entry&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;entry-item&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;entry-icon approval&quot; /&gt;</span><br><span class="line">              &lt;span&gt;假期审批&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;entry-item&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;entry-icon social&quot; /&gt;</span><br><span class="line">              &lt;span&gt;社保管理&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;entry-item&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;entry-icon role&quot; /&gt;</span><br><span class="line">              &lt;span&gt;角色管理&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;entry-item&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;entry-icon salary&quot; /&gt;</span><br><span class="line">              &lt;span&gt;薪资设置&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;entry-item&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;entry-icon bpm&quot; /&gt;</span><br><span class="line">              &lt;span&gt;流程设置&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 图表数据 --&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;panel-title&quot;&gt;社保申报数据&lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;chart-container&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;chart-info&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;info-main&quot;&gt;</span><br><span class="line">                &lt;span&gt;申报人数&lt;/span&gt;</span><br><span class="line">                &lt;!-- homeData: &#123;&#125; --&gt;</span><br><span class="line">                &lt;count-to</span><br><span class="line">                  :start-val=&quot;0&quot;</span><br><span class="line">                  :end-val=&quot;homeData.socialInsurance?.declarationTotal&quot;</span><br><span class="line">                  :duration=&quot;1000&quot;</span><br><span class="line">                /&gt;</span><br><span class="line"></span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;info-list&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;待申报(人)&lt;/span&gt;</span><br><span class="line">                  &lt;count-to</span><br><span class="line">                    :start-val=&quot;0&quot;</span><br><span class="line">                    :end-val=&quot;homeData.socialInsurance?.toDeclareTotal&quot;</span><br><span class="line">                    :duration=&quot;1000&quot;</span><br><span class="line">                  /&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;申报中(人)&lt;/span&gt;</span><br><span class="line">                  &lt;count-to</span><br><span class="line">                    :start-val=&quot;0&quot;</span><br><span class="line">                    :end-val=&quot;homeData.socialInsurance?.declaringTotal&quot;</span><br><span class="line">                    :duration=&quot;1000&quot;</span><br><span class="line">                  /&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;已申报(人)&lt;/span&gt;</span><br><span class="line">                  &lt;count-to</span><br><span class="line">                    :start-val=&quot;0&quot;</span><br><span class="line">                    :end-val=&quot;homeData.socialInsurance?.declaredTotal&quot;</span><br><span class="line">                    :duration=&quot;1000&quot;</span><br><span class="line">                  /&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;chart&quot;&gt;</span><br><span class="line">              &lt;!-- 图表 --&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 图表数据 --&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;panel-title&quot;&gt;公积金申报数据&lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;chart-container&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;chart-info&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;info-main&quot;&gt;</span><br><span class="line">                &lt;span&gt;申报人数&lt;/span&gt;</span><br><span class="line">                &lt;count-to</span><br><span class="line">                  :start-val=&quot;0&quot;</span><br><span class="line">                  :end-val=&quot;homeData.providentFund?.declarationTotal&quot;</span><br><span class="line">                  :duration=&quot;1000&quot;</span><br><span class="line">                /&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;info-list&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;待申报(人)&lt;/span&gt;</span><br><span class="line">                  &lt;count-to</span><br><span class="line">                    :start-val=&quot;0&quot;</span><br><span class="line">                    :end-val=&quot;homeData.providentFund?.toDeclareTotal&quot;</span><br><span class="line">                    :duration=&quot;1000&quot;</span><br><span class="line">                  /&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;申报中(人)&lt;/span&gt;</span><br><span class="line">                  &lt;count-to</span><br><span class="line">                    :start-val=&quot;0&quot;</span><br><span class="line">                    :end-val=&quot;homeData.providentFund?.declaringTotal&quot;</span><br><span class="line">                    :duration=&quot;1000&quot;</span><br><span class="line">                  /&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;info-list-item&quot;&gt;</span><br><span class="line">                  &lt;span&gt;已申报(人)&lt;/span&gt;</span><br><span class="line">                  &lt;count-to</span><br><span class="line">                    :start-val=&quot;0&quot;</span><br><span class="line">                    :end-val=&quot;homeData.providentFund?.declaredTotal&quot;</span><br><span class="line">                    :duration=&quot;1000&quot;</span><br><span class="line">                  /&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;chart&quot;&gt;</span><br><span class="line">              &lt;!-- 图表 --&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- 右侧内容 --&gt;</span><br><span class="line">      &lt;div class=&quot;right&quot;&gt;</span><br><span class="line">        &lt;!-- 帮助链接 --&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;help&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;help-left&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;panel-title&quot;&gt;帮助链接&lt;/div&gt;</span><br><span class="line">              &lt;div class=&quot;help-list&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;help-block&quot;&gt;</span><br><span class="line">                  &lt;i class=&quot;icon-entry&quot; /&gt;</span><br><span class="line">                  入门指南</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;help-block&quot;&gt;</span><br><span class="line">                  &lt;i class=&quot;icon-help&quot; /&gt;</span><br><span class="line">                  在线帮助手册</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;help-block&quot;&gt;</span><br><span class="line">                  &lt;i class=&quot;icon-support&quot; /&gt;</span><br><span class="line">                  联系技术支持</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;help-block&quot;&gt;</span><br><span class="line">                  &lt;i class=&quot;icon-add&quot; /&gt;</span><br><span class="line">                  添加链接</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;help-right&quot;&gt;</span><br><span class="line">              &lt;div class=&quot;calendar&quot;&gt;</span><br><span class="line">                &lt;!-- &lt;el-calendar /&gt; --&gt;</span><br><span class="line">                &lt;el-calendar /&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 通知公告 --&gt;</span><br><span class="line">        &lt;div class=&quot;panel&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;panel-title&quot;&gt;通知公告&lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;information-list&quot;&gt;</span><br><span class="line">            &lt;div v-for=&quot;(item,index) in list&quot; :key=&quot;index&quot; class=&quot;information-list-item&quot;&gt;</span><br><span class="line">              &lt;img :src=&quot;item.icon&quot; alt=&quot;&quot;&gt;</span><br><span class="line">              &lt;div&gt;</span><br><span class="line">                &lt;p&gt;</span><br><span class="line">                  &#123;&#123; item.notice &#125;&#125;</span><br><span class="line">                &lt;/p&gt;</span><br><span class="line">                &lt;p&gt;&#123;&#123; item.createTime &#125;&#125;&lt;/p&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import CountTo from &#x27;vue-count-to&#x27;</span><br><span class="line">import &#123; mapGetters &#125; from &#x27;vuex&#x27;</span><br><span class="line">import &#123; getHomeData, getMessageList &#125; from &#x27;@/api/home&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    CountTo</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      homeData: &#123;&#125;, // 存放首页数据的对象</span><br><span class="line">      list: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  // 计算属性</span><br><span class="line">  computed: &#123;</span><br><span class="line">    ...mapGetters([&#x27;name&#x27;, &#x27;avatar&#x27;, &#x27;company&#x27;, &#x27;departmentName&#x27;]) // 映射给了计算属性</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getHomeData()</span><br><span class="line">    this.getMessageList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    async getHomeData() &#123;</span><br><span class="line">      this.homeData = await getHomeData()</span><br><span class="line">    &#125;,</span><br><span class="line">    async getMessageList() &#123;</span><br><span class="line">      this.list = await getMessageList()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;scss&quot;&gt;</span><br><span class="line">.dashboard &#123;</span><br><span class="line">  background: #f5f6f8;</span><br><span class="line">  width: 100%;</span><br><span class="line">  min-height: calc(100vh - 80px);</span><br><span class="line"></span><br><span class="line">  ::v-deep .el-calendar-day &#123;</span><br><span class="line">  height:  40px;</span><br><span class="line"> &#125;</span><br><span class="line"> ::v-deep .el-calendar-table__row td,::v-deep .el-calendar-table tr td:first-child, ::v-deep .el-calendar-table__row td.prev&#123;</span><br><span class="line">  border:none;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">.date-content &#123;</span><br><span class="line">  height: 40px;</span><br><span class="line">  text-align: center;</span><br><span class="line">  line-height: 40px;</span><br><span class="line">  font-size: 14px;</span><br><span class="line">&#125;</span><br><span class="line">.date-content .rest &#123;</span><br><span class="line">  color: #fff;</span><br><span class="line">  border-radius: 50%;</span><br><span class="line">  background: rgb(250, 124, 77);</span><br><span class="line">  width: 20px;</span><br><span class="line">  height: 20px;</span><br><span class="line">  line-height: 20px;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  font-size: 12px;</span><br><span class="line">  margin-left: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.date-content .text&#123;</span><br><span class="line">  width: 20px;</span><br><span class="line">  height: 20px;</span><br><span class="line">  line-height: 20px;</span><br><span class="line"> display: inline-block;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">::v-deep .el-calendar-table td.is-selected .text&#123;</span><br><span class="line">   background: #409eff;</span><br><span class="line">   color: #fff;</span><br><span class="line">   border-radius: 50%;</span><br><span class="line"> &#125;</span><br><span class="line"> ::v-deep .el-calendar__header &#123;</span><br><span class="line">   display: none</span><br><span class="line"> &#125;</span><br><span class="line">  .container &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    .right &#123;</span><br><span class="line">      width: 40%;</span><br><span class="line">      .panel &#123;</span><br><span class="line">        margin-left: 8px;</span><br><span class="line">      &#125;</span><br><span class="line">      :nth-child(1) &#123;</span><br><span class="line">        margin-top: 0;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .left &#123;</span><br><span class="line">      flex: 1;</span><br><span class="line">      :nth-child(1) &#123;</span><br><span class="line">        margin-top: 0;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .panel &#123;</span><br><span class="line">      background-color: #fff;</span><br><span class="line"></span><br><span class="line">      margin-top: 8px;</span><br><span class="line">      padding: 20px;</span><br><span class="line">      .panel-title &#123;</span><br><span class="line">        font-size: 16px;</span><br><span class="line">        color: #383c4e;</span><br><span class="line">        font-weight: 500;</span><br><span class="line">      &#125;</span><br><span class="line">      // 用户信息样式</span><br><span class="line">      .user-info &#123;</span><br><span class="line">        display: flex;</span><br><span class="line">        .avatar &#123;</span><br><span class="line">          width: 48px;</span><br><span class="line">          height: 48px;</span><br><span class="line">          border-radius: 12px;</span><br><span class="line">          background-color: #d9d9d9;</span><br><span class="line">          line-height: 48px;</span><br><span class="line">          text-align: center;</span><br><span class="line">        &#125;</span><br><span class="line">         .username &#123;</span><br><span class="line">           width: 30px;</span><br><span class="line">           height: 30px;</span><br><span class="line">           text-align: center;</span><br><span class="line">           line-height: 30px;</span><br><span class="line">           border-radius: 50%;</span><br><span class="line">           background: #04c9be;</span><br><span class="line">           color: #fff;</span><br><span class="line">           margin-right: 4px;</span><br><span class="line">         &#125;</span><br><span class="line">        .company-info &#123;</span><br><span class="line">          margin-left: 10px;</span><br><span class="line">          height: 48px;</span><br><span class="line">          display: flex;</span><br><span class="line">          flex-direction: column;</span><br><span class="line">          justify-content: space-around;</span><br><span class="line">          .title &#123;</span><br><span class="line">            color: #383c4e;</span><br><span class="line">            font-weight: 500;</span><br><span class="line">            font-size: 16px;</span><br><span class="line">            font-family: PingFang SC, PingFang SC-Medium;</span><br><span class="line">            span &#123;</span><br><span class="line">              font-size: 12px;</span><br><span class="line">              background: #f5f6f8;</span><br><span class="line">              text-align: center;</span><br><span class="line">              padding: 2px 8px;</span><br><span class="line">              border-radius: 2px;</span><br><span class="line">              color: #697086;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          .depart &#123;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">            color: #697086;</span><br><span class="line">            font-weight: 400;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      // 代办样式</span><br><span class="line">      .todo-list &#123;</span><br><span class="line">        margin-top: 10px;</span><br><span class="line">        display: flex;</span><br><span class="line">        flex-wrap: wrap;</span><br><span class="line">        .todo-item &#123;</span><br><span class="line">          width: 18%;</span><br><span class="line">          height: 90px;</span><br><span class="line">          display: flex;</span><br><span class="line">          flex-direction: column;</span><br><span class="line">          padding: 10px;</span><br><span class="line">          justify-content: space-around;</span><br><span class="line">          :nth-child(1) &#123;</span><br><span class="line">            color: #697086;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">          &#125;</span><br><span class="line">          :nth-child(2) &#123;</span><br><span class="line">            color: #383c4e;</span><br><span class="line">            font-size: 30px;</span><br><span class="line">            font-weight: 500;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      // 快捷入口</span><br><span class="line">      .quick-entry &#123;</span><br><span class="line">        margin-top: 16px;</span><br><span class="line">        display: flex;</span><br><span class="line">        .entry-item &#123;</span><br><span class="line">          display: flex;</span><br><span class="line">          flex-direction: column;</span><br><span class="line">          align-items: center;</span><br><span class="line">          margin-left: 60px;</span><br><span class="line">          &amp;:nth-child(1) &#123;</span><br><span class="line">            margin-left: 0px;</span><br><span class="line">          &#125;</span><br><span class="line">          .entry-icon &#123;</span><br><span class="line">            width: 40px;</span><br><span class="line">            height: 40px;</span><br><span class="line">            border-radius: 10px;</span><br><span class="line">            background: #f5f6f8;</span><br><span class="line">            background-size: cover;</span><br><span class="line">            &amp;.approval &#123;</span><br><span class="line">              background-image: url(&#x27;~@/assets/common/approval.png&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">             &amp;.social &#123;</span><br><span class="line">              background-image: url(&#x27;~@/assets/common/social.png&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">             &amp;.salary &#123;</span><br><span class="line">              background-image: url(&#x27;~@/assets/common/salary.png&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">            &amp;.role &#123;</span><br><span class="line">              background-image: url(&#x27;~@/assets/common/role.png&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">             &amp;.bpm &#123;</span><br><span class="line">              background-image: url(&#x27;~@/assets/common/bpm.png&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          span &#123;</span><br><span class="line">            color: #697086;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">            margin-top: 8px;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      // 图表数据</span><br><span class="line">      .chart-container &#123;</span><br><span class="line">        display: flex;</span><br><span class="line">        .chart-info &#123;</span><br><span class="line">         width: 240px;</span><br><span class="line">          margin-top: 10px;</span><br><span class="line">          .info-main &#123;</span><br><span class="line">            padding: 10px;</span><br><span class="line">            display: flex;</span><br><span class="line">            flex-direction: column;</span><br><span class="line">            :nth-child(1) &#123;</span><br><span class="line">              font-size: 14px;</span><br><span class="line">              color: #697086;</span><br><span class="line">            &#125;</span><br><span class="line">            :nth-child(2) &#123;</span><br><span class="line">              margin-top: 10px;</span><br><span class="line">              font-size: 30px;</span><br><span class="line">              color: #04c9be;</span><br><span class="line">              font-weight: 500;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          .info-list &#123;</span><br><span class="line">            background: #f5f6f8;</span><br><span class="line">            border-radius: 4px;</span><br><span class="line">            padding: 12px 15px;</span><br><span class="line">            display: flex;</span><br><span class="line">            flex-wrap: wrap;</span><br><span class="line">            align-items: center;</span><br><span class="line">            .info-list-item &#123;</span><br><span class="line">              width: 50%;</span><br><span class="line">              margin-top: 10px;</span><br><span class="line">              display: flex;</span><br><span class="line">              flex-direction: column;</span><br><span class="line"></span><br><span class="line">              :nth-child(1) &#123;</span><br><span class="line">                font-size: 14px;</span><br><span class="line">                color: #697086;</span><br><span class="line">              &#125;</span><br><span class="line">              :nth-child(2) &#123;</span><br><span class="line">                margin-top: 10px;</span><br><span class="line">                font-size: 30px;</span><br><span class="line">                color: #383c4e;</span><br><span class="line">                font-weight: 500;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        .chart &#123;</span><br><span class="line">          flex:1</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      // 帮助链接</span><br><span class="line">      .help &#123;</span><br><span class="line">        display: flex;</span><br><span class="line">        .help-left &#123;</span><br><span class="line">          width: 40%;</span><br><span class="line">        &#125;</span><br><span class="line">        .help-right &#123;</span><br><span class="line">          flex: 1;</span><br><span class="line">        &#125;</span><br><span class="line">        .help-list &#123;</span><br><span class="line">          .help-block &#123;</span><br><span class="line">            background: #f5f6f8;</span><br><span class="line">            border-radius: 4px;</span><br><span class="line">            width: 264px;</span><br><span class="line">            height: 54px;</span><br><span class="line">            padding: 17px 10px;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">            color: #697086;</span><br><span class="line">            margin-top: 10px;</span><br><span class="line">            i &#123;</span><br><span class="line">              width: 14px;</span><br><span class="line">              height: 14px;</span><br><span class="line">              display: inline-block;</span><br><span class="line">              background-size: cover;</span><br><span class="line">              vertical-align: middle;</span><br><span class="line">            &#125;</span><br><span class="line">            i.icon-help &#123;</span><br><span class="line">              background-image: url(&quot;~@/assets/common/help.png&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">             i.icon-support &#123;</span><br><span class="line">              background-image: url(&quot;~@/assets/common/support.png&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">             i.icon-add &#123;</span><br><span class="line">              background-image: url(&quot;~@/assets/common/add.png&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">             i.icon-entry &#123;</span><br><span class="line">              background-image: url(&quot;~@/assets/common/entry.png&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      // 通知公告</span><br><span class="line">      .information-list &#123;</span><br><span class="line">        margin-top: 20px;</span><br><span class="line">        .information-list-item &#123;</span><br><span class="line">          display: flex;</span><br><span class="line">          align-items: center;</span><br><span class="line">          margin:15px 0;</span><br><span class="line">          img &#123;</span><br><span class="line">            width: 40px;</span><br><span class="line">            height: 40px;</span><br><span class="line">            border: 50%;</span><br><span class="line">          &#125;</span><br><span class="line">         .col &#123;</span><br><span class="line">           color: #8a97f8;</span><br><span class="line">         &#125;</span><br><span class="line">         div :nth-child(2) &#123;</span><br><span class="line">          color: #697086;</span><br><span class="line">          font-size: 14px;</span><br><span class="line">         &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="6-首页—echarts图表的应用"><a href="#6-首页—echarts图表的应用" class="headerlink" title="6.首页—echarts图表的应用"></a>6.首页—echarts图表的应用</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022032825.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022032556.png" alt="image.png"></p>
<ul>
<li>安装echarts包</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm i echarts </span><br><span class="line">$ yarn add echarts</span><br></pre></td></tr></table></figure>
<ul>
<li>放置两个图表的div，并给定高宽，代码位置(<strong>src/views/dashboard/index.vue</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;chart&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 图表 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&quot;social&quot;</span> <span class="attr">style</span>=<span class="string">&quot; width: 100%; height:100% &quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;chart&quot;</span>&gt;</span></span><br><span class="line">              <span class="comment">&lt;!-- 图表 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&quot;provident&quot;</span> <span class="attr">style</span>=<span class="string">&quot; width: 100%; height:100% &quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>在mounted中初始化图表-代码位置(<strong>src/views/dashboard/index.vue</strong>)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import CountTo from &#x27;vue-count-to&#x27;</span><br><span class="line">import &#123; mapGetters &#125; from &#x27;vuex&#x27;</span><br><span class="line">import &#123; getHomeData, getMessageList &#125; from &#x27;@/api/home&#x27;</span><br><span class="line">import * as echarts from &#x27;echarts&#x27; // 引入所有的echarts</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    CountTo</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      homeData: &#123;&#125;, // 存放首页数据的对象</span><br><span class="line">      list: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  // 计算属性</span><br><span class="line">  computed: &#123;</span><br><span class="line">    ...mapGetters([&#x27;name&#x27;, &#x27;avatar&#x27;, &#x27;company&#x27;, &#x27;departmentName&#x27;]) // 映射给了计算属性</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    homeData() &#123;</span><br><span class="line">      console.log(this.homeData)</span><br><span class="line">      // 设置图表</span><br><span class="line">      this.social.setOption(&#123;</span><br><span class="line">        xAxis: &#123;</span><br><span class="line">          type: &#x27;category&#x27;,</span><br><span class="line">          boundaryGap: false,</span><br><span class="line">          data: this.homeData.socialInsurance?.xAxis</span><br><span class="line">        &#125;,</span><br><span class="line">        yAxis: &#123;</span><br><span class="line">          type: &#x27;value&#x27;</span><br><span class="line">        &#125;,</span><br><span class="line">        series: [</span><br><span class="line">          &#123;</span><br><span class="line">            data: this.homeData.socialInsurance?.yAxis,</span><br><span class="line">            type: &#x27;line&#x27;,</span><br><span class="line">            areaStyle: &#123;</span><br><span class="line">              color: &#x27;#04c9be&#x27; // 填充颜色</span><br><span class="line">            &#125;,</span><br><span class="line">            lineStyle: &#123;</span><br><span class="line">              color: &#x27;#04c9be&#x27; // 线的颜色</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;)</span><br><span class="line">      this.provident.setOption(&#123;</span><br><span class="line">        xAxis: &#123;</span><br><span class="line">          type: &#x27;category&#x27;,</span><br><span class="line">          boundaryGap: false,</span><br><span class="line">          data: this.homeData.providentFund?.xAxis</span><br><span class="line">        &#125;,</span><br><span class="line">        yAxis: &#123;</span><br><span class="line">          type: &#x27;value&#x27;</span><br><span class="line">        &#125;,</span><br><span class="line">        series: [</span><br><span class="line">          &#123;</span><br><span class="line">            data: this.homeData.providentFund?.yAxis,</span><br><span class="line">            type: &#x27;line&#x27;,</span><br><span class="line">            areaStyle: &#123;</span><br><span class="line">              color: &#x27;#04c9be&#x27; // 填充颜色</span><br><span class="line">            &#125;,</span><br><span class="line">            lineStyle: &#123;</span><br><span class="line">              color: &#x27;#04c9be&#x27; // 线的颜色</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getHomeData()</span><br><span class="line">    this.getMessageList()</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    // 获取展示的数据 设置给图表</span><br><span class="line">    // 监听homeData的变化</span><br><span class="line">    this.social = echarts.init(this.$refs.social) // 初始化echart</span><br><span class="line">    // data中没有声明 不是响应式</span><br><span class="line">    this.provident = echarts.init(this.$refs.provident)</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    async getHomeData() &#123;</span><br><span class="line">      this.homeData = await getHomeData()</span><br><span class="line">    &#125;,</span><br><span class="line">    async getMessageList() &#123;</span><br><span class="line">      this.list = await getMessageList()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这里为什么要用watch，因为获取数据在created，初始化图表在mounted，执行mouted时，数据并不能保证能够获取到，所以采用获取watch监听数据变化，只要数据变化，就设置图表的options</p>
<p>为什么 this.social和this.provident 并没有在data中声明，注意，在data中声明的表示它是响应式数据，即它的变化要引起template模板的刷新，但是这里我们只是记录一下当前图表的实例，实例本身会有setOption来影响图表的动态渲染，所以这里并没有必要在data中声明这两个变量</p>
</blockquote>
<h2 id="7-首页—echarts图表的按需导入"><a href="#7-首页—echarts图表的按需导入" class="headerlink" title="7.首页—echarts图表的按需导入"></a>7.首页—echarts图表的按需导入</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022032276.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022032728.png" alt="image.png"></p>
<ul>
<li>echarts图表的按需导入-代码位置(<strong>src/views/dashboard/index.vue</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> echarts <span class="keyword">from</span> <span class="string">&#x27;echarts/core&#x27;</span> <span class="comment">// 引入核心包</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">LineChart</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;echarts/charts&#x27;</span> <span class="comment">// 引入折线图</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">GridComponent</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;echarts/components&#x27;</span> <span class="comment">// 引入组件</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CanvasRenderer</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;echarts/renderers&#x27;</span></span><br><span class="line">echarts.<span class="title function_">use</span>([</span><br><span class="line">  <span class="title class_">LineChart</span>,</span><br><span class="line">  <span class="title class_">GridComponent</span>,</span><br><span class="line">  <span class="title class_">CanvasRenderer</span></span><br><span class="line">])</span><br></pre></td></tr></table></figure>
<h2 id="8-路由模式—将路由改成history模式"><a href="#8-路由模式—将路由改成history模式" class="headerlink" title="8.路由模式—将路由改成history模式"></a>8.路由模式—将路由改成history模式</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022032051.png" alt="image.png"></p>
<ul>
<li>hash模式带#，#后面的地址变化不会引起页面的刷新</li>
<li><p>history没有#，地址变化会引起页面刷新，更符合页面地址的规范（开发环境不刷新-webpack配置）</p>
</li>
<li><p>将路由模式修改成history模式-代码位置(<strong>src/router/index.js)</strong></p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">createRouter</span> = (<span class="params"></span>) =&gt; <span class="keyword">new</span> <span class="title class_">Router</span>(&#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;history&#x27;</span>, <span class="comment">// require service support</span></span><br><span class="line">  <span class="attr">scrollBehavior</span>: <span class="function">() =&gt;</span> (&#123; <span class="attr">y</span>: <span class="number">0</span> &#125;),</span><br><span class="line">  <span class="attr">routes</span>: constantRoutes <span class="comment">// 默认引入静态路由</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="9-打包分析—分析"><a href="#9-打包分析—分析" class="headerlink" title="9. 打包分析—分析"></a>9. 打包分析—分析</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022033137.png" alt="image.png"></p>
<ul>
<li>打包分析代码</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm run preview -- --report</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022033453.png" alt="image.png"></p>
<ul>
<li>去除main.js中对于mock.js的引用</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022033582.png" alt="image.png"> </p>
<h2 id="10-CDN加速"><a href="#10-CDN加速" class="headerlink" title="10.CDN加速"></a>10.CDN加速</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022033676.png" alt="image.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022033312.png" alt="image.png"></p>
<blockquote>
<p>将几个比较大的多在打包时排除，这样可以缩小整体打包的大小，保证js的加载速度，排除的包采用cdn的方式用外链去引入，cdn本名为分发服务器，意为更近的访问区间更快的访问速度将所需要的文件返回给客户端</p>
</blockquote>
<ul>
<li>webpack排除打包-代码位置(<strong>vue.config.js</strong>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">configureWebpack</span>: &#123;</span><br><span class="line">   <span class="comment">// provide the app&#x27;s title in webpack&#x27;s name field, so that</span></span><br><span class="line">   <span class="comment">// it can be accessed in index.html to inject the correct title.</span></span><br><span class="line">   <span class="attr">name</span>: name,</span><br><span class="line">   <span class="attr">resolve</span>: &#123;</span><br><span class="line">     <span class="attr">alias</span>: &#123;</span><br><span class="line">       <span class="string">&#x27;@&#x27;</span>: <span class="title function_">resolve</span>(<span class="string">&#x27;src&#x27;</span>)</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="comment">// 配置需要排出的包</span></span><br><span class="line">   <span class="attr">externals</span>: &#123;</span><br><span class="line">     <span class="string">&#x27;vue&#x27;</span>: <span class="string">&#x27;Vue&#x27;</span>,</span><br><span class="line">     <span class="string">&#x27;element-ui&#x27;</span>: <span class="string">&#x27;ELEMENT&#x27;</span>,</span><br><span class="line">     <span class="string">&#x27;cos-js-sdk-v5&#x27;</span>: <span class="string">&#x27;COS&#x27;</span></span><br><span class="line">   &#125;</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure>
<ul>
<li>在html中采用外链引入排除的文件-代码位置(<strong>public/index.html</strong>)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge,chrome=1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%= BASE_URL %&gt;favicon.ico&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>&lt;%= webpackConfig.name %&gt;<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/element-ui/2.15.13/theme-chalk/index.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">noscript</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">strong</span>&gt;</span>We&#x27;re sorry but &lt;%= webpackConfig.name %&gt; doesn&#x27;t work properly without JavaScript enabled. Please enable it to continue.<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">noscript</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- built files will be auto injected --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/vue/2.6.14/vue.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/element-ui/2.15.13/index.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/cos-js-sdk-v5/dist/cos-js-sdk-v5.min.js&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="11-项目打包—安装nginx"><a href="#11-项目打包—安装nginx" class="headerlink" title="11.项目打包—安装nginx"></a>11.项目打包—安装nginx</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022033819.png" alt="image.png"></p>
<ul>
<li>执行打包命令</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm run build:prod</span><br><span class="line">$ yarn build:prod</span><br></pre></td></tr></table></figure>
<blockquote>
<p>得到dist文件包</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022034323.png" alt="image.png"></p>
<ul>
<li>安装nginx-mac</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew install nginx  <span class="comment"># mac安装nginx</span></span><br></pre></td></tr></table></figure>
<ul>
<li>查看版本-mac</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nginx -v  <span class="comment"># 查看版本</span></span><br></pre></td></tr></table></figure>
<ul>
<li>查看nginx-mac</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew info nginx <span class="comment">#查看nginx</span></span><br></pre></td></tr></table></figure>
<ul>
<li>nginx-windows版本</li>
</ul>
<blockquote>
<p>直接解压就可以直接使用</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022034029.png" alt="image.png"> </p>
<p>注意：<strong>mac安装</strong>可能遇到的问题</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022034596.png" alt="image.png"><br>遇到某个包发生错误，直接使用brew安装这个包，再安装nginx</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ brew install pcre2  <span class="comment"># 安装出错的包</span></span><br><span class="line">$ brew install nginx  <span class="comment"># 安装nginx</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022034417.png" alt="image.png"><br>遇到这个错误，可以直接执行该命令，安装对应的工具，再安装nginx</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$  xcode-select --install  <span class="comment"># 安装对应工具</span></span><br><span class="line">$  brew install nginx  <span class="comment"># 安装nginx</span></span><br></pre></td></tr></table></figure>
<h2 id="12-mac-windows环境下nginx部署启动项目"><a href="#12-mac-windows环境下nginx部署启动项目" class="headerlink" title="12.mac/windows环境下nginx部署启动项目"></a>12.mac/windows环境下nginx部署启动项目</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022034722.png" alt="image.png"></p>
<ul>
<li>mac查看nginx的相关目录</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew info nginx <span class="comment">#查看nginx</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022034929.png" alt="image.png"></p>
<p>mac-nginx安装目录-/opt/homebrew/Cellar/nginx/1.23.3<br>mac-配置文件路-/opt/homebrew/etc/nginx/nginx.conf </p>
<ul>
<li>将打包的文件放置到安装目录/html下</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022034743.png" alt="image.png"></p>
<ul>
<li>mac-启动服务命令</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ /opt/homebrew/Cellar/nginx/1.23.3/bin/nginx <span class="comment">#启动命令</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>mac-重启服务</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ /opt/homebrew/Cellar/nginx/1.23.3/bin/nginx -s stop  <span class="comment">#停止命令</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意： mac版本的nginx的默认端口为8080</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022035816.png" alt="image.png"></p>
<ul>
<li>windows版本启动服务</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022035328.png" alt="image.png"> </p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022035685.png" alt="image.png"></p>
<ul>
<li>windows下停止服务</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ./nginx -s stop  <span class="comment">#停止命令</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>注意: nginx默认的访问端口为80</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022036360.png" alt="image.png"></p>
<h2 id="13-nginx解决history的404问题"><a href="#13-nginx解决history的404问题" class="headerlink" title="13.nginx解决history的404问题"></a>13.nginx解决history的404问题</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022037731.png" alt="image.png"></p>
<ul>
<li>修改mac-windows配置文件</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">   try_files <span class="variable">$uri</span> <span class="variable">$uri</span>/ /index.html;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>设置不论请求什么地址，都返回index.html</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022037823.png" alt="image.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022037405.png" alt="image.png"><br>windows配置文件<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022037483.png" alt="image.png"></p>
<ul>
<li>mac重启服务</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ /opt/homebrew/Cellar/nginx/1.23.3/bin/nginx -s reload  <span class="comment">#重启</span></span><br></pre></td></tr></table></figure>
<ul>
<li>windows重启服务</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./nginx -s reload  <span class="comment">#重启</span></span><br></pre></td></tr></table></figure>
<h2 id="15-nginx配置代理解决生产环境跨域问题"><a href="#15-nginx配置代理解决生产环境跨域问题" class="headerlink" title="15.nginx配置代理解决生产环境跨域问题"></a>15.nginx配置代理解决生产环境跨域问题</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022037985.png" alt="image.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/8435673/1677862058407-f6b3725c-a57c-4711-acff-3088574d814b.png#averageHue=%23fdfdfd&amp;clientId=u0f540d11-b7d4-4&amp;from=paste&amp;height=270&amp;id=uf3364958&amp;name=image.png&amp;originHeight=540&amp;originWidth=1918&amp;originalType=binary&amp;ratio=2&amp;rotation=0&amp;showTitle=false&amp;size=53889&amp;status=done&amp;style=none&amp;taskId=uda212cc3-d7e4-47b7-83bf-5b394037c9d&amp;title=&amp;width=959" alt="image.png"></p>
<ul>
<li>nginx解决生产环境跨域</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://izdloyl-blog.oss-cn-hangzhou.aliyuncs.com/202408022037384.png" alt="image.png"></p>
<ul>
<li>修改配置文件</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location /prod-api  &#123;</span><br><span class="line">  proxy_pass https://heimahr-t.itheima.net;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>mac重启服务</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ /opt/homebrew/Cellar/nginx/1.23.3/bin/nginx -s reload  <span class="comment">#重启</span></span><br></pre></td></tr></table></figure>
<ul>
<li>windows重启服务</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./nginx -s reload  <span class="comment">#重启</span></span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>黑马人力资源项目</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="http://www.izdloyl.cn/2024/08/01/vue-Vue2%E4%BA%BA%E5%8A%9B%E8%B5%84%E6%BA%90%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/">http://www.izdloyl.cn/2024/08/01/vue-Vue2%E4%BA%BA%E5%8A%9B%E8%B5%84%E6%BA%90%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a"><h>作者</h><div class="post-copyright-cc-info"><h>IZDLOYL</h></div></div><div class="post-copyright-c"><h>发布于</h><div class="post-copyright-cc-info"><h>2024-08-01</h></div></div><div class="post-copyright-u"><h>更新于</h><div class="post-copyright-cc-info"><h>2024-08-02</h></div></div><div class="post-copyright-c"><h>许可协议</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/vue2/">vue2</a></div><div class="post_share"><div class="social-share" data-image="https://source.fomal.cc/img/default_cover_9.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/08/01/interview-%E9%9D%A2%E8%AF%95/" title="笔试"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_4.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">笔试</div></div></a></div><div class="next-post pull-right"><a href="/2024/08/01/vue-vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/" title="vue3"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_1.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">vue3</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../source/gallery/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">IZDLOYL</div><div class="author-info__description">个人博客</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">3</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/IZDLOYL-G"><i class="fab fa-github"></i><span>🛴前往小家...</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/IZDLOYL-G" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:1215472755@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #dfc600;"></i></a><a class="social-icon" href="https://res.abeim.cn/api/qq/?qq=1174008660" target="_blank" title="Weixin"><i class="fab fa-weixin" style="color: #48b700;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">welcome to my blog!</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E9%A1%B9%E7%9B%AE%E4%BB%8B%E7%BB%8D%E5%8F%8A%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">一、项目介绍及初始化</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E9%A1%B9%E7%9B%AE%E6%9E%B6%E6%9E%84"><span class="toc-text">1.项目架构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E9%A1%B9%E7%9B%AE%E6%9E%B6%E6%9E%84%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-text">1.1 项目架构和解决方案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E8%AF%BE%E7%A8%8B%E5%AE%89%E6%8E%92"><span class="toc-text">1.2 课程安排</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E8%AF%BE%E7%A8%8B%E5%85%B7%E5%A4%87%E8%83%BD%E5%8A%9B"><span class="toc-text">1.3 课程具备能力</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%9F%BA%E7%A1%80%E4%BB%A3%E7%A0%81%E6%8B%89%E5%8F%96"><span class="toc-text">2. 基础代码拉取</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95%E5%92%8C%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6%E4%BB%8B%E7%BB%8D"><span class="toc-text">3.项目目录和入口文件介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-App-vue%E6%A0%B9%E7%BB%84%E4%BB%B6%E8%A7%A3%E6%9E%90"><span class="toc-text">4.App.vue根组件解析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%9F%BA%E7%A1%80%E8%AE%BE%E7%BD%AEsettings-js%E5%92%8C%E5%AF%BC%E8%88%AA%E5%AE%88%E5%8D%ABpermission-js"><span class="toc-text">5.基础设置settings.js和导航守卫permission.js</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-Vuex%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-text">6.Vuex的结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF%E4%B8%AD%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-text">模板中的结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Vuex%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3"><span class="toc-text">Vuex的设计思想</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E4%BD%BF%E7%94%A8%E6%A8%A1%E6%9D%BF%E4%B8%AD%E7%9A%84Icon%E5%9B%BE%E6%A0%87"><span class="toc-text">7.使用模板中的Icon图标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E6%89%A9%E5%B1%95%E2%80%94%E8%A7%A3%E6%9E%90Icon%E5%9B%BE%E6%A0%87%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF"><span class="toc-text">8.扩展—解析Icon图标的实现思路</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E5%AF%BC%E5%85%A5%E6%A0%B7%E5%BC%8F%E8%B5%84%E6%BA%90%E5%B9%B6%E4%BD%BF%E7%94%A8git%E7%AE%A1%E7%90%86"><span class="toc-text">9.导入样式资源并使用git管理</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97"><span class="toc-text">二、登录模块</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E7%99%BB%E5%BD%95%E9%A1%B5%E7%9A%84%E7%BB%93%E6%9E%84%E5%92%8C%E8%A1%A8%E5%8D%95"><span class="toc-text">1.登录页的结构和表单</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E7%99%BB%E5%BD%95%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C-%E5%AE%9E%E7%8E%B0"><span class="toc-text">2.登录表单校验-实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%88%86%E6%9E%90%E7%99%BB%E5%BD%95%E6%B5%81%E7%A8%8B"><span class="toc-text">3. 分析登录流程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-Vuex%E4%B8%AD%E7%94%A8%E6%88%B7%E6%A8%A1%E5%9D%97%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-text">4. Vuex中用户模块的实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-Vue-cli%E4%BB%A3%E7%90%86%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F"><span class="toc-text">5.Vue-cli代理解决跨域</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-axios%E5%B0%81%E8%A3%85"><span class="toc-text">6.axios封装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E7%8E%AF%E5%A2%83%E5%8C%BA%E5%88%86"><span class="toc-text">7.环境区分</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E7%99%BB%E5%BD%95%E8%81%94%E8%B0%83"><span class="toc-text">8. 登录联调</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E4%B8%BB%E9%A1%B5%E6%9D%83%E9%99%90%E9%AA%8C%E8%AF%81%E2%80%94%E9%89%B4%E6%9D%83"><span class="toc-text">9.主页权限验证—鉴权</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E4%B8%BB%E9%A1%B5"><span class="toc-text">三、主页</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7%E8%B5%84%E6%96%99%E5%9C%A8Vuex%E4%B8%AD%E5%85%B1%E4%BA%AB"><span class="toc-text">1.获取用户资料在Vuex中共享</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%98%BE%E7%A4%BA%E7%94%A8%E6%88%B7%E5%A4%B4%E5%83%8F%E5%92%8C%E7%94%A8%E6%88%B7%E5%90%8D"><span class="toc-text">2.显示用户头像和用户名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%A4%84%E7%90%86%E5%A4%B4%E5%83%8F%E4%B8%BA%E7%A9%BA%E7%9A%84%E5%9C%BA%E6%99%AF"><span class="toc-text">3.处理头像为空的场景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%A4%84%E7%90%86token%E5%A4%B1%E6%95%88%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">4.处理token失效的问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E8%B0%83%E6%95%B4%E4%B8%8B%E6%8B%89%E8%8F%9C%E5%8D%95%EF%BC%8C%E5%AE%9E%E7%8E%B0%E9%80%80%E5%87%BA%E7%99%BB%E5%BD%95"><span class="toc-text">5.调整下拉菜单，实现退出登录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="toc-text">6.修改密码功能实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81-%E5%BC%B9%E5%87%BA%E5%B1%82"><span class="toc-text">6.1-修改密码-弹出层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81-%E8%A1%A8%E5%8D%95%E7%BB%93%E6%9E%84"><span class="toc-text">6.2-修改密码-表单结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81-%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C"><span class="toc-text">6.3-修改密码-表单校验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81-%E7%A1%AE%E5%AE%9A%E5%92%8C%E5%8F%96%E6%B6%88"><span class="toc-text">6.4-修改密码-确定和取消</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E6%B8%85%E7%90%86%E7%BB%84%E4%BB%B6%E5%92%8C%E8%B7%AF%E7%94%B1"><span class="toc-text">7. 清理组件和路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%E6%89%80%E9%9C%80%E8%A6%81%E7%9A%84%E7%BB%84%E4%BB%B6%E5%92%8C%E8%B7%AF%E7%94%B1"><span class="toc-text">8.创建项目所需要的组件和路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E6%89%A9%E5%B1%95%E2%80%94%E8%A7%A3%E6%9E%90%E5%B7%A6%E4%BE%A7%E8%8F%9C%E5%8D%95%E5%8E%9F%E7%90%86"><span class="toc-text">9.扩展—解析左侧菜单原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E5%B7%A6%E4%BE%A7%E8%8F%9C%E5%8D%95%E6%98%BE%E7%A4%BA%E9%A1%B9%E7%9B%AElogo"><span class="toc-text">10. 左侧菜单显示项目logo</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E7%BB%84%E7%BB%87%E6%9E%B6%E6%9E%84"><span class="toc-text">四、组织架构</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%A0%91%E7%BB%84%E4%BB%B6%E5%BA%94%E7%94%A8"><span class="toc-text">1.树组件应用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%A0%91%E7%BB%84%E4%BB%B6%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%93%E6%9E%84"><span class="toc-text">2.树组件自定义结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E8%8E%B7%E5%8F%96%E7%BB%84%E7%BB%87%E6%9E%B6%E6%9E%84%E6%95%B0%E6%8D%AE"><span class="toc-text">3.获取组织架构数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E9%80%92%E5%BD%92%E8%BD%AC%E5%8C%96%E6%A0%91%E5%BD%A2%E7%BB%93%E6%9E%84"><span class="toc-text">4.递归转化树形结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%B7%BB%E5%8A%A0%E5%AD%90%E9%83%A8%E9%97%A8%E2%80%94%E6%96%B0%E5%BB%BA%E5%BC%B9%E5%B1%82%E7%BB%84%E4%BB%B6"><span class="toc-text">5.添加子部门—新建弹层组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E6%B7%BB%E5%8A%A0%E5%AD%90%E9%83%A8%E9%97%A8%E2%80%94%E8%A1%A8%E5%8D%95%E7%BB%93%E6%9E%84"><span class="toc-text">6.添加子部门—表单结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E6%B7%BB%E5%8A%A0%E5%AD%90%E9%83%A8%E9%97%A8%E2%80%94%E8%A1%A8%E5%8D%95%E5%9F%BA%E6%9C%AC%E6%A0%A1%E9%AA%8C"><span class="toc-text">7.添加子部门—表单基本校验</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E6%B7%BB%E5%8A%A0%E5%AD%90%E9%83%A8%E9%97%A8%E2%80%94%E8%A1%A8%E5%8D%95%E4%B8%9A%E5%8A%A1%E6%A0%A1%E9%AA%8C"><span class="toc-text">8.添加子部门—表单业务校验</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E6%B7%BB%E5%8A%A0%E5%AD%90%E9%83%A8%E9%97%A8%E2%80%94%E8%8E%B7%E5%8F%96%E8%B4%9F%E8%B4%A3%E4%BA%BA%E6%95%B0%E6%8D%AE"><span class="toc-text">9.添加子部门—获取负责人数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E6%B7%BB%E5%8A%A0%E5%AD%90%E9%83%A8%E9%97%A8%E2%80%94%E8%AE%B0%E5%BD%95%E9%83%A8%E9%97%A8"><span class="toc-text">10.添加子部门—记录部门</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E6%B7%BB%E5%8A%A0%E5%AD%90%E9%83%A8%E9%97%A8%E2%80%94%E7%A1%AE%E5%AE%9A%E5%8F%96%E6%B6%88"><span class="toc-text">11.添加子部门—确定取消</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E7%BC%96%E8%BE%91%E9%83%A8%E9%97%A8%E2%80%94%E5%BC%B9%E5%87%BA%E5%B1%82%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="toc-text">12.编辑部门—弹出层获取数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-%E7%BC%96%E8%BE%91%E9%83%A8%E9%97%A8%E2%80%94%E7%BC%96%E8%BE%91%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C"><span class="toc-text">13.编辑部门—编辑表单校验</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-%E7%BC%96%E8%BE%91%E9%83%A8%E9%97%A8%E2%80%94%E7%A1%AE%E8%AE%A4%E5%8F%96%E6%B6%88"><span class="toc-text">14.编辑部门—确认取消</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-%E5%88%A0%E9%99%A4%E9%83%A8%E9%97%A8"><span class="toc-text">15.删除部门</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E8%A7%92%E8%89%B2%E7%AE%A1%E7%90%86"><span class="toc-text">五、角色管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%90%AD%E5%BB%BA%E9%A1%B5%E9%9D%A2%E7%BB%93%E6%9E%84"><span class="toc-text">1.搭建页面结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="toc-text">2.获取数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E8%A1%A8%E6%A0%BC%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%93%E6%9E%84"><span class="toc-text">3.表格自定义结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%88%86%E9%A1%B5%E5%8A%9F%E8%83%BD"><span class="toc-text">4.分页功能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%96%B0%E5%A2%9E%E5%8A%9F%E8%83%BD%E5%BC%B9%E5%B1%82"><span class="toc-text">5.新增功能弹层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E8%A1%A8%E5%8D%95%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C"><span class="toc-text">6.表单数据校验</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E6%96%B0%E5%A2%9E%E8%A7%92%E8%89%B2%E2%80%94%E7%A1%AE%E5%AE%9A%E5%8F%96%E6%B6%88"><span class="toc-text">7.新增角色—确定取消</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E7%BC%96%E8%BE%91%E8%A7%92%E8%89%B2%E2%80%94%E8%BF%9B%E5%85%A5%E8%A1%8C%E5%86%85%E7%BC%96%E8%BE%91"><span class="toc-text">8.编辑角色—进入行内编辑</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E8%A1%8C%E5%86%85%E7%BC%96%E8%BE%91%E2%80%94%E6%95%B0%E6%8D%AE%E7%BC%93%E5%AD%98"><span class="toc-text">9.行内编辑—数据缓存</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E7%BC%96%E8%BE%91%E8%A7%92%E8%89%B2%E2%80%94%E7%A1%AE%E5%AE%9A%E5%8F%96%E6%B6%88"><span class="toc-text">10.编辑角色—确定取消</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E5%88%A0%E9%99%A4%E8%A7%92%E8%89%B2"><span class="toc-text">11.删除角色</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E5%91%98%E5%B7%A5%E7%AE%A1%E7%90%86"><span class="toc-text">六、员工管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E9%A1%B5%E9%9D%A2%E7%BB%93%E6%9E%84"><span class="toc-text">1.页面结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%B7%A6%E4%BE%A7%E6%A0%91%E7%9A%84%E5%8A%A0%E8%BD%BD"><span class="toc-text">2.左侧树的加载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E9%80%89%E4%B8%AD%E9%A6%96%E4%B8%AA%E8%8A%82%E7%82%B9"><span class="toc-text">3.选中首个节点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%91%98%E5%B7%A5%E5%88%97%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-text">4.员工列表结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E8%8E%B7%E5%8F%96%E5%91%98%E5%B7%A5%E6%95%B0%E6%8D%AE"><span class="toc-text">5.获取员工数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E5%A4%B4%E5%83%8F%E5%92%8C%E8%81%98%E7%94%A8%E5%BD%A2%E5%BC%8F%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-text">6.头像和聘用形式的处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E5%91%98%E5%B7%A5%E5%88%86%E9%A1%B5%E5%A4%84%E7%90%86"><span class="toc-text">7.员工分页处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E5%91%98%E5%B7%A5%E6%A8%A1%E7%B3%8A%E6%90%9C%E7%B4%A2"><span class="toc-text">8.员工模糊搜索</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E5%AF%BC%E5%87%BAexcel"><span class="toc-text">9.导出excel</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-excel%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85"><span class="toc-text">10.excel组件封装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E4%B8%8B%E8%BD%BD%E5%AF%BC%E5%85%A5%E6%A8%A1%E6%9D%BF"><span class="toc-text">11.下载导入模板</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E5%91%98%E5%B7%A5%E5%AF%BC%E5%85%A5%E2%80%94%E4%B8%8A%E4%BC%A0excel"><span class="toc-text">12.员工导入—上传excel</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-%E5%88%A0%E9%99%A4%E5%91%98%E5%B7%A5"><span class="toc-text">13.删除员工</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E5%91%98%E5%B7%A5%E8%AF%A6%E6%83%85"><span class="toc-text">七、员工详情</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%91%98%E5%B7%A5%E8%AF%A6%E6%83%85%E5%92%8C%E8%B7%AF%E7%94%B1"><span class="toc-text">1.员工详情和路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E8%A1%A8%E5%8D%95%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C"><span class="toc-text">2.表单数据校验</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%B0%81%E8%A3%85%E9%83%A8%E9%97%A8%E7%BA%A7%E8%81%94%E7%BB%84%E4%BB%B6"><span class="toc-text">3.封装部门级联组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E7%BA%A7%E8%81%94%E7%BB%84%E4%BB%B6%E2%80%94%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A"><span class="toc-text">4.级联组件—双向绑定</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%96%B0%E5%A2%9E%E5%91%98%E5%B7%A5"><span class="toc-text">5.新增员工</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E7%BC%96%E8%BE%91%E5%91%98%E5%B7%A5%E2%80%94%E6%9F%A5%E7%9C%8B%E5%91%98%E5%B7%A5"><span class="toc-text">6.编辑员工—查看员工</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E7%BC%96%E8%BE%91%E5%91%98%E5%B7%A5%E2%80%94%E4%BF%9D%E5%AD%98"><span class="toc-text">7.编辑员工—保存</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E5%B0%81%E8%A3%85%E5%91%98%E5%B7%A5%E5%A4%B4%E5%83%8F%E7%BB%84%E4%BB%B6"><span class="toc-text">8.封装员工头像组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E2%80%94%E5%88%9B%E5%BB%BA%E8%85%BE%E8%AE%AF%E4%BA%91%E5%AD%98%E5%82%A8%E6%A1%B6"><span class="toc-text">9.上传图片—创建腾讯云存储桶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1%E8%8E%B7%E5%8F%96%E5%AD%98%E5%82%A8%E6%A1%B6%E7%9B%B8%E5%85%B3%E4%BF%A1%E6%81%AF"><span class="toc-text">9.1获取存储桶相关信息</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E4%BD%BF%E7%94%A8cos-sdk%E5%AE%8C%E6%88%90%E4%B8%8A%E4%BC%A0"><span class="toc-text">10.使用cos-sdk完成上传</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="toc-text">八、权限管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%90%AD%E5%BB%BA%E6%9D%83%E9%99%90%E9%A1%B5%E9%9D%A2"><span class="toc-text">1. 搭建权限页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E8%BD%AC%E5%8C%96%E6%A0%91%E5%BD%A2"><span class="toc-text">2.获取数据转化树形</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E2%80%94%E4%BD%9C%E4%B8%9A"><span class="toc-text">3.权限管理—作业</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%9D%83%E9%99%90%E6%A6%82%E5%BF%B5"><span class="toc-text">4.权限概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%91%98%E5%B7%A5%E5%88%86%E9%85%8D%E8%A7%92%E8%89%B2%E2%80%94%E5%BC%B9%E5%87%BA%E5%B1%82"><span class="toc-text">5.员工分配角色—弹出层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E5%91%98%E5%B7%A5%E5%88%86%E9%85%8D%E8%A7%92%E8%89%B2%E2%80%94%E5%9B%9E%E6%98%BE%E6%95%B0%E6%8D%AE%E5%B9%B6%E6%8F%90%E4%BA%A4"><span class="toc-text">6.员工分配角色—回显数据并提交</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E7%BB%99%E8%A7%92%E8%89%B2%E5%88%86%E9%85%8D%E6%9D%83%E9%99%90%E2%80%94%E5%BC%B9%E5%87%BA%E5%B1%82"><span class="toc-text">7.给角色分配权限—弹出层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E8%A7%92%E8%89%B2%E5%88%86%E9%85%8D%E6%9D%83%E9%99%90%E2%80%94%E6%98%BE%E7%A4%BA%E5%B7%B2%E6%9C%89%E6%9D%83%E9%99%90%E6%95%B0%E6%8D%AE"><span class="toc-text">8.角色分配权限—显示已有权限数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E8%A7%92%E8%89%B2%E5%88%86%E9%85%8D%E6%9D%83%E9%99%90%E2%80%94%E7%A1%AE%E5%AE%9A%E6%8F%90%E4%BA%A4"><span class="toc-text">9.角色分配权限—确定提交</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E6%8B%86%E5%88%86%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E2%80%94%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1"><span class="toc-text">10.拆分静态路由—动态路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E6%A0%B9%E6%8D%AE%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E6%B7%BB%E5%8A%A0%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1"><span class="toc-text">11.根据用户权限添加动态路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E6%A0%B9%E6%8D%AE%E6%9D%83%E9%99%90%E6%98%BE%E7%A4%BA%E5%B7%A6%E4%BE%A7%E8%8F%9C%E5%8D%95"><span class="toc-text">12.根据权限显示左侧菜单</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-%E9%80%80%E5%87%BA%E7%99%BB%E5%BD%95%E9%87%8D%E7%BD%AE%E8%B7%AF%E7%94%B1"><span class="toc-text">13.退出登录重置路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-%E5%8A%9F%E8%83%BD%E6%9D%83%E9%99%90%E2%80%94%E6%8C%89%E9%92%AE%E6%9D%83%E9%99%90%E6%A0%87%E8%AF%86"><span class="toc-text">14.功能权限—按钮权限标识</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4%E5%BA%94%E7%94%A8%E5%8A%9F%E8%83%BD%E6%9D%83%E9%99%90"><span class="toc-text">15.自定义指令应用功能权限</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B9%9D%E3%80%81%E5%85%B6%E4%BB%96%E6%A8%A1%E5%9D%97"><span class="toc-text">九、其他模块</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E9%9B%86%E6%88%90"><span class="toc-text">1.集成</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E9%A6%96%E9%A1%B5%E2%80%94%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84%E5%92%8C%E6%95%B0%E5%AD%97%E6%BB%9A%E5%8A%A8"><span class="toc-text">2.首页—基本结构和数字滚动</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E9%A6%96%E9%A1%B5%E2%80%94%E4%B8%AA%E4%BA%BA%E4%BF%A1%E6%81%AF%E5%B1%95%E7%A4%BA"><span class="toc-text">3.首页—个人信息展示</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E9%A6%96%E9%A1%B5%E2%80%94%E4%BC%81%E4%B8%9A%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96"><span class="toc-text">4.首页—企业数据获取</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E9%A6%96%E9%A1%B5%E2%80%94%E9%80%9A%E7%9F%A5%E6%B6%88%E6%81%AF%E8%8E%B7%E5%8F%96"><span class="toc-text">5.首页—通知消息获取</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E9%A6%96%E9%A1%B5%E2%80%94echarts%E5%9B%BE%E8%A1%A8%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-text">6.首页—echarts图表的应用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E9%A6%96%E9%A1%B5%E2%80%94echarts%E5%9B%BE%E8%A1%A8%E7%9A%84%E6%8C%89%E9%9C%80%E5%AF%BC%E5%85%A5"><span class="toc-text">7.首页—echarts图表的按需导入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E8%B7%AF%E7%94%B1%E6%A8%A1%E5%BC%8F%E2%80%94%E5%B0%86%E8%B7%AF%E7%94%B1%E6%94%B9%E6%88%90history%E6%A8%A1%E5%BC%8F"><span class="toc-text">8.路由模式—将路由改成history模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E6%89%93%E5%8C%85%E5%88%86%E6%9E%90%E2%80%94%E5%88%86%E6%9E%90"><span class="toc-text">9. 打包分析—分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-CDN%E5%8A%A0%E9%80%9F"><span class="toc-text">10.CDN加速</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85%E2%80%94%E5%AE%89%E8%A3%85nginx"><span class="toc-text">11.项目打包—安装nginx</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-mac-windows%E7%8E%AF%E5%A2%83%E4%B8%8Bnginx%E9%83%A8%E7%BD%B2%E5%90%AF%E5%8A%A8%E9%A1%B9%E7%9B%AE"><span class="toc-text">12.mac&#x2F;windows环境下nginx部署启动项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-nginx%E8%A7%A3%E5%86%B3history%E7%9A%84404%E9%97%AE%E9%A2%98"><span class="toc-text">13.nginx解决history的404问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-nginx%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86%E8%A7%A3%E5%86%B3%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98"><span class="toc-text">15.nginx配置代理解决生产环境跨域问题</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/08/02/algorithm-%E5%AD%97%E7%AC%A6%E4%B8%B2/" title="字符串篇"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_3.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="字符串篇"/></a><div class="content"><a class="title" href="/2024/08/02/algorithm-%E5%AD%97%E7%AC%A6%E4%B8%B2/" title="字符串篇">字符串篇</a><time datetime="2024-08-02T12:01:12.428Z" title="发表于 2024-08-02 20:01:12">2024-08-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/02/algorithm-%E6%A0%88%E4%B8%8E%E9%98%9F%E5%88%97/" title="栈与队列篇"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_8.webb" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="栈与队列篇"/></a><div class="content"><a class="title" href="/2024/08/02/algorithm-%E6%A0%88%E4%B8%8E%E9%98%9F%E5%88%97/" title="栈与队列篇">栈与队列篇</a><time datetime="2024-08-02T12:01:12.426Z" title="发表于 2024-08-02 20:01:12">2024-08-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/02/algorithm-%E6%95%B0%E7%BB%84/" title="数组篇"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_4.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="数组篇"/></a><div class="content"><a class="title" href="/2024/08/02/algorithm-%E6%95%B0%E7%BB%84/" title="数组篇">数组篇</a><time datetime="2024-08-02T12:01:12.424Z" title="发表于 2024-08-02 20:01:12">2024-08-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/02/algorithm-%E9%93%BE%E8%A1%A8%E7%AF%87/" title="链表篇"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_7.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="链表篇"/></a><div class="content"><a class="title" href="/2024/08/02/algorithm-%E9%93%BE%E8%A1%A8%E7%AF%87/" title="链表篇">链表篇</a><time datetime="2024-08-02T12:01:12.421Z" title="发表于 2024-08-02 20:01:12">2024-08-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/02/algorithm-%E5%93%88%E5%B8%8C%E8%A1%A8/" title="哈希表篇"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_3.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="哈希表篇"/></a><div class="content"><a class="title" href="/2024/08/02/algorithm-%E5%93%88%E5%B8%8C%E8%A1%A8/" title="哈希表篇">哈希表篇</a><time datetime="2024-08-02T12:01:12.419Z" title="发表于 2024-08-02 20:01:12">2024-08-02</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2024 By IZDLOYL</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hope you have a nice day!🍭🍭🍭</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.8/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"></div><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="30" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="http://www.izdloyl.cn/categories/项目/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🎮 IZDLOYLの项目 (1)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="http://www.izdloyl.cn/categories/算法/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🐱 IZDLOYLの算法笔记 (7)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="http://www.izdloyl.cn/categories/vue/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">👩‍💻 IZDLOYLの编程学习 (2)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="http://www.izdloyl.cn/categories/面试/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">💡 IZDLOYLの面试总结 (1)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><a class="magnet_link_more"  href="http://www.izdloyl.cn/categories" style="flex:1;text-align: center;margin-bottom: 10px;">查看更多...</a></div></div>';
    console.log('已挂载magnet')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script><style>#catalog_magnet{flex-wrap: wrap;display: flex;width:100%;justify-content:space-between;padding: 10px 10px 0 10px;align-content: flex-start;}.magnet_item{flex-basis: calc(50% - 5px);background: #f2f2f2;margin-bottom: 10px;border-radius: 8px;transition: all 0.2s ease-in-out;}.magnet_item:hover{background: #69e8f2}.magnet_link_more{color:#555}.magnet_link{color:black}.magnet_link:hover{color:white}@media screen and (max-width: 600px) {.magnet_item {flex-basis: 100%;}}.magnet_link_context{display:flex;padding: 10px;font-size:16px;transition: all 0.2s ease-in-out;}.magnet_link_context:hover{padding: 10px 20px;}</style>
    <style></style><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/08/01/vue-vue3快速上手/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_1.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-01</span><a class="blog-slider__title" href="2024/08/01/vue-vue3快速上手/" alt="">vue3</a><div class="blog-slider__text">vue3学习笔记</div><a class="blog-slider__button" href="2024/08/01/vue-vue3快速上手/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/08/01/vue-vue2/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_10.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-01</span><a class="blog-slider__title" href="2024/08/01/vue-vue2/" alt="">vue2</a><div class="blog-slider__text">vue2学习笔记</div><a class="blog-slider__button" href="2024/08/01/vue-vue2/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/08/02/algorithm-数组/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_4.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-02</span><a class="blog-slider__title" href="2024/08/02/algorithm-数组/" alt="">数组篇</a><div class="blog-slider__text">代码随想录 - 数组篇</div><a class="blog-slider__button" href="2024/08/02/algorithm-数组/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/08/02/algorithm-hot100/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_2.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-02</span><a class="blog-slider__title" href="2024/08/02/algorithm-hot100/" alt="">hot100</a><div class="blog-slider__text">LeetCode - hot100</div><a class="blog-slider__button" href="2024/08/02/algorithm-hot100/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/08/02/algorithm-字符串/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_3.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-02</span><a class="blog-slider__title" href="2024/08/02/algorithm-字符串/" alt="">字符串篇</a><div class="blog-slider__text">代码随想录 - 字符串篇</div><a class="blog-slider__button" href="2024/08/02/algorithm-字符串/" alt="">详情   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><!-- hexo injector body_end end --></body></html>